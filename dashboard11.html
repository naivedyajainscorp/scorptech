<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Analytics & Intelligence | Sapphire</title>
        <!-- Bootstrap CSS 5.3.3 (Latest) -->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
        <!-- Bootstrap Icons 1.11.3 (Latest) -->
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.min.css">
        <!-- Font Awesome 6.5.1 (Latest) -->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.1/css/all.min.css" integrity="sha512-2SwdPD6INVrV/lHTZbO2nodKhrnDdJK9/kg2XD1r9uGqPo1cUbujc+IYdlYdEErWNu69gVcYgdxlmVmzTWnetw==" crossorigin="anonymous" referrerpolicy="no-referrer" />
        <!-- Main Sapphire Stylesheet -->
        <!-- <link rel="stylesheet" href="style.css"> -->
        <!-- Analytics Page Stylesheet -->
        <link rel="stylesheet" href="dashboard11.css">
    </head>
    <body>
        <!-- Analytics Hero Section -->
        <section class="analytics-main-hero">
            <!-- Animated Analytics Background -->
            <div class="analytics-hero-bg">
                <canvas id="analytics-canvas"></canvas>
            </div>
            <!-- Hero Content -->
            <div class="container-fluid">
                <div class="analytics-hero-content">
                    <h1 class="analytics-hero-title">Smart Analytics</h1>
                    <p class="analytics-hero-subtitle">Transform raw data into strategic intelligence—where every number tells a story, every pattern predicts opportunity, and every insight drives confident decision-making across your enterprise.</p>
                </div>
            </div>
        </section>
        <!-- Analytics Pills Rail -->
        <section class="analytics-pills-rail">
            <div class="pills-track">
                <div class="s-pill s-pill-primary">
                    <i class="fas fa-calculator"></i>
                    <span>Cost Analysis</span>
                </div>
                <div class="s-pill s-pill-info">
                    <i class="fas fa-boxes"></i>
                    <span>Asset Tracking</span>
                </div>
                <div class="s-pill s-pill-purple">
                    <i class="fas fa-clipboard-list"></i>
                    <span>Requisition</span>
                </div>
                <div class="s-pill s-pill-green">
                    <i class="fas fa-chart-line"></i>
                    <span>Consumption</span>
                </div>
                <div class="s-pill s-pill-amber">
                    <i class="fas fa-file-alt"></i>
                    <span>Reports & Logs</span>
                </div>
                <div class="s-pill s-pill-indigo">
                    <i class="fas fa-tools"></i>
                    <span>Maintenance</span>
                </div>
                <div class="s-pill s-pill-pop">
                    <i class="fas fa-heartbeat"></i>
                    <span>Availability Index</span>
                </div>
                <div class="s-pill s-pill-info-special">
                    <i class="fas fa-flask"></i>
                    <span>Material Intelligence</span>
                </div>
                <div class="s-pill s-pill-primary">
                    <i class="fas fa-search"></i>
                    <span>Inspection Logs</span>
                </div>
                <div class="s-pill s-pill-royal">
                    <i class="fas fa-chart-bar"></i>
                    <span>Request Analytics</span>
                </div>
                <div class="s-pill s-pill-success">
                    <i class="fas fa-check-circle"></i>
                    <span>Compliance</span>
                </div>
                <div class="s-pill s-pill-amber">
                    <i class="fas fa-recycle"></i>
                    <span>Disposal Records</span>
                </div>
                <div class="s-pill s-pill-red">
                    <i class="fas fa-clock"></i>
                    <span>Downtime Tracking</span>
                </div>
                <div class="s-pill s-pill-warning">
                    <i class="fas fa-exclamation-triangle"></i>
                    <span>Expiry Management</span>
                </div>
                <div class="s-pill s-pill-slate">
                    <i class="fas fa-shield-alt"></i>
                    <span>Audit Trail</span>
                </div>
            </div>
            <!-- Gradient Fade Edges -->
            <div class="rail-gradient-left"></div>
            <div class="rail-gradient-right"></div>
        </section>
        <!-- Cost Analysis Section -->
        <section class="analytics-sections">
            <div class="container-fluid">
                <!-- Section Header -->
                <div class="analytics-hero analytics-cost-hero" id="analytics-cost-hero">
                    <div class="analytics-hero-content">
                        <h2 class="analytics-hero-title">
                            <i class="fas fa-calculator"></i> Cost Analysis
                        </h2>
                        <p class="analytics-hero-subtitle">
                            Every rupee spent on your assets is logged, tracked, and turned into intelligence—from the moment of purchase to final disposal.
                        </p>
                    </div>
                </div>
                <!-- Row 1: Purchase Cost Tracking -->
                <!-- ═══════════════════════════════════════════════════════════════
                    ROW 0: PURCHASE COST TRACKING - 4 CARD SYSTEM
                    ═══════════════════════════════════════════════════════════════ -->
                <div class="container-fluid">
                    <div class="row g-4" style="margin-bottom: 3rem;">
                        <!-- CARD 1: Purchase Concentration Heatmap (Viz LEFT) -->
                        <div class="col-12">
                            <div class="analytics-info-card">
                                <div class="row align-items-center g-0">
                                    <div class="col-lg-5">
                                        <div class="viz-placeholder" id="viz-purchase-concentration">
                                            <!-- Heatmap renders here -->
                                        </div>
                                    </div>
                                    <div class="col-lg-7">
                                        <div class="analytics-info-card-content">
                                            <h3><i class="bi bi-grid-3x2-gap-fill"></i> Purchase Concentration Analysis</h3>
                                            <p>Visualize where capital investment is concentrated across asset categories—this heatmap reveals which equipment types consumed the most procurement budget and helps identify <strong>over-investment patterns</strong> or <strong>under-resourced categories</strong>. Deep blue areas indicate high capital allocation, while lighter shades show minimal spending, enabling strategic rebalancing of future acquisition budgets based on operational priorities and ROI analysis.</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- CARD 2: Price-per-Unit Benchmark (Viz RIGHT) -->
                        <div class="col-12">
                            <div class="analytics-info-card">
                                <div class="row align-items-center g-0 flex-lg-row-reverse">
                                    <div class="col-lg-5">
                                        <div class="viz-placeholder" id="viz-purchase-benchmark">
                                            <!-- Infinite scroll renders here -->
                                        </div>
                                    </div>
                                    <div class="col-lg-7">
                                        <div class="analytics-info-card-content">
                                            <h3><i class="fas fa-balance-scale"></i> Price-per-Unit Benchmark</h3>
                                            <p>Compare average purchase prices across asset categories to identify <strong>overpayment risks</strong> and <strong>bulk discount opportunities</strong>. Each card displays the price range (minimum, average, maximum) with scatter plots showing all purchase orders throughout 2025. Spot outliers instantly—why did one order cost significantly more? This analysis guides vendor negotiations and highlights pricing patterns where consolidated purchasing could reduce per-unit costs.</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- CARD 3: Purchase Timeline & Seasonality (Viz LEFT) -->
                        <div class="col-12">
                            <div class="analytics-info-card">
                                <div class="row align-items-center g-0">
                                    <div class="col-lg-5">
                                        <div class="viz-placeholder" id="viz-purchase-timeline">
                                            <!-- Area chart renders here -->
                                        </div>
                                    </div>
                                    <div class="col-lg-7">
                                        <div class="analytics-info-card-content">
                                            <h3><i class="fas fa-chart-area"></i> Purchase Timeline & Seasonality</h3>
                                            <p>Track procurement patterns over 12-24 months to reveal <strong>seasonal buying trends</strong>, <strong>end-of-year budget rushes</strong>, and spending velocity throughout fiscal periods. The dual-axis visualization separates purchase volume from expenditure value, answering whether budget spikes came from buying more items or more expensive ones. Use this intelligence to plan strategic purchasing windows, negotiate better terms during low-demand periods, and optimize cash flow management.</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- CARD 4: Individual Purchase Ledger (Viz RIGHT) -->
                        <div class="col-12">
                            <div class="analytics-info-card">
                                <div class="row align-items-center g-0 flex-lg-row-reverse">
                                    <div class="col-lg-5">
                                        <div class="viz-placeholder" id="viz-purchase-ledger">
                                            <!-- Infinite scroll renders here -->
                                        </div>
                                    </div>
                                    <div class="col-lg-7">
                                        <div class="analytics-info-card-content">
                                            <h3><i class="fas fa-receipt"></i> Individual Purchase Ledger</h3>
                                            <p>Monitor every acquisition transaction with complete transparency—each entry displays asset code, purchase date, price, quantity (for materials), and vendor information. Smart badges highlight <strong>bulk discount</strong> purchases or <strong>premium pricing</strong> anomalies, enabling immediate spot-checks and accountability. This granular ledger helps track spending patterns at the transaction level, identify vendor performance trends, and maintain audit-ready procurement records for compliance and cost control.</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Row 2: Dual-Depreciation Intelligence -->
                <div class="analytics-info-card">
                    <div class="row align-items-center g-0 flex-lg-row-reverse">
                        <div class="col-lg-5">
                            <div class="viz-placeholder" id="viz-depreciation">
                                <div class="depreciation-viz">
                                    <div class="depreciation-graph-wrapper">
                                        <!-- Straight Line Method -->
                                        <div class="depreciation-graph">
                                            <div class="graph-header">
                                                <h4>Straight Line Method</h4>
                                                <span class="method-label">IT Act 1961</span>
                                            </div>
                                            <div class="bar-chart-container">
                                                <div class="y-axis-label">Book Value</div>
                                                <div class="bar-chart" id="straight-line-chart"></div>
                                                <div class="x-axis-label">Time</div>
                                            </div>
                                        </div>
                                        <!-- Written Down Value Method -->
                                        <div class="depreciation-graph">
                                            <div class="graph-header">
                                                <h4>Written Down Value Method</h4>
                                                <span class="method-label">Company Act 2013</span>
                                            </div>
                                            <div class="bar-chart-container">
                                                <div class="y-axis-label">Book Value</div>
                                                <div class="bar-chart" id="wdv-chart"></div>
                                                <div class="x-axis-label">Time</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-7">
                            <div class="analytics-info-card-content">
                                <h3><i class="fas fa-chart-line"></i> Dual-Depreciation Intelligence</h3>
                                <p>Dual-depreciation intelligence automatically calculates asset depreciation under <strong>both Company Act 2013 (Written Down Value) and IT Act 1961 (block depreciation)</strong> simultaneously—updating book values monthly without manual intervention. Financial teams access <strong>instant compliance-ready depreciation schedules</strong> for balance sheets and tax filings, while management sees real asset valuations that guide replacement timing, disposal decisions, and capital planning based on true remaining value rather than outdated estimates.</p>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Row 3: Protection Costs -->
                <!-- ═══════════════════════════════════════════════════════════════
                    PROTECTION COSTS VISUALIZATION - 4 CARD GRID
                    ═══════════════════════════════════════════════════════════════ -->
                <div class="container-fluid">
                    <div class="row g-4" style="margin-bottom: 3rem;">
                        <!-- CARD 1: CONSOLIDATED PROTECTION OVERVIEW (Viz LEFT) -->
                        <div class="col-12">
                            <div class="analytics-info-card">
                                <div class="row align-items-center g-0">
                                    <div class="col-lg-5">
                                        <div class="viz-placeholder" id="viz-protection-consolidated">
                                            <!-- Progressive bar will render here -->
                                        </div>
                                    </div>
                                    <div class="col-lg-7">
                                        <div class="analytics-info-card-content">
                                            <h3><i class="fas fa-shield-alt"></i> Consolidated Protection Overview</h3>
                                            <p>Track all protection costs in one unified view—extended warranties, insurance premiums, and maintenance contracts are aggregated to show your <strong>total asset protection investment</strong> across the organization. See at a glance where your protection budget is allocated and identify opportunities to optimize coverage spending without compromising asset security.</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- CARD 2: INDIVIDUAL ITEM TRACKING (Viz RIGHT) -->
                        <div class="col-12">
                            <div class="analytics-info-card">
                                <div class="row align-items-center g-0 flex-lg-row-reverse">
                                    <div class="col-lg-5">
                                        <div class="viz-placeholder" id="viz-protection-individual">
                                            <!-- Infinite scroll will render here -->
                                        </div>
                                    </div>
                                    <div class="col-lg-7">
                                        <div class="analytics-info-card-content">
                                            <h3><i class="fas fa-list-ul"></i> Individual Item Tracking</h3>
                                            <p>Monitor protection costs for every single item in your inventory—from vehicles and machinery to specialized tools. Each asset shows its unique breakdown of warranty, insurance, and maintenance expenditures, enabling you to <strong>identify high-cost items</strong> and make granular decisions about coverage renewal, policy adjustments, or contract renegotiation on an asset-by-asset basis.</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- CARD 3: ASSET CLASS COMPARISON (Viz LEFT) -->
                        <div class="col-12">
                            <div class="analytics-info-card">
                                <div class="row align-items-center g-0">
                                    <div class="col-lg-5">
                                        <div class="viz-placeholder" id="viz-protection-class">
                                            <!-- 2x2 donut grid will render here -->
                                        </div>
                                    </div>
                                    <div class="col-lg-7">
                                        <div class="analytics-info-card-content">
                                            <h3><i class="fas fa-layer-group"></i> Compare by Asset Class</h3>
                                            <p>Analyze protection spending patterns across <strong>vehicle, machinery, and tool</strong> categories. The grid reveals which asset classes consume the most protection budget and how warranty, insurance, and maintenance costs distribute differently across equipment types, helping you <strong>benchmark spending</strong> and allocate future budgets strategically based on asset class priorities.</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- CARD 4: DETAILED COST BREAKDOWN (Viz RIGHT) -->
                        <div class="col-12">
                            <div class="analytics-info-card">
                                <div class="row align-items-center g-0 flex-lg-row-reverse">
                                    <div class="col-lg-5">
                                        <div class="viz-placeholder" id="viz-protection-breakdown">
                                            <!-- Stacked donuts will render here -->
                                        </div>
                                    </div>
                                    <div class="col-lg-7">
                                        <div class="analytics-info-card-content">
                                            <h3><i class="fas fa-chart-pie"></i> Detailed Cost Breakdown</h3>
                                            <p>Dive deep into each protection category separately—see exactly how warranty spending differs from insurance or maintenance across your asset portfolio. This granular view helps you <strong>answer critical questions</strong>: Are we over-insuring vehicles but under-maintaining tools? Should we negotiate bulk warranty contracts? Perfect for making <strong>data-driven decisions</strong> on protection strategy optimization.</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Row 4: Operational Expenses -->
                <!-- ═══════════════════════════════════════════════════════════════
                    OPERATIONAL EXPENSES VISUALIZATION - 4 CARD GRID
                    ═══════════════════════════════════════════════════════════════ -->
                <div class="container-fluid">
                    <div class="row g-4" style="margin-bottom: 3rem;">
                        <!-- CARD 1: TOTAL EXPENSE OVERVIEW (Viz LEFT) -->
                        <div class="col-12">
                            <div class="analytics-info-card">
                                <div class="row align-items-center g-0">
                                    <div class="col-lg-5">
                                        <div class="viz-placeholder" id="viz-opex-overview">
                                            <!-- Compound progress bar will render here -->
                                        </div>
                                    </div>
                                    <div class="col-lg-7">
                                        <div class="analytics-info-card-content">
                                            <h3><i class="fas fa-tools"></i> Total Operational Expense Breakdown</h3>
                                            <p>Monitor all operational spending in a unified view—labor costs capture service charges separately from parts and materials installed, while miscellaneous expenses include paperwork, transportation, and handling fees. This consolidated perspective reveals whether your organization is <strong>overpaying for services</strong> or <strong>hemorrhaging money on frequent part replacements</strong>, enabling strategic decisions about service contracts and supplier negotiations.</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- CARD 2: COST RECOVERY WATERFALL (Viz RIGHT) -->
                        <div class="col-12">
                            <div class="analytics-info-card">
                                <div class="row align-items-center g-0 flex-lg-row-reverse">
                                    <div class="col-lg-5">
                                        <div class="viz-placeholder" id="viz-opex-recovery">
                                            <!-- Waterfall chart will render here -->
                                        </div>
                                    </div>
                                    <div class="col-lg-7">
                                        <div class="analytics-info-card-content">
                                            <h3><i class="fa-solid fa-file-invoice"></i> Net Cost After Recovery</h3>
                                            <p>See the real operational burden after all recoveries—monetary benefits claimed through insurance policies, product warranties, extended warranties, and maintenance contracts offset gross spending in real-time. This analysis shows your <strong>net operational expense</strong> instead of just raw spending, revealing which assets truly drain budgets after all recoveries are accounted for and highlighting opportunities to maximize claim efficiency.</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- CARD 3: COST TREND ANALYSIS (Viz LEFT) -->
                        <div class="col-12">
                            <div class="analytics-info-card">
                                <div class="row align-items-center g-0">
                                    <div class="col-lg-5">
                                        <div class="viz-placeholder" id="viz-opex-trends">
                                            <!-- Multi-line graph will render here -->
                                        </div>
                                    </div>
                                    <div class="col-lg-7">
                                        <div class="analytics-info-card-content">
                                            <h3><i class="fas fa-chart-line"></i>Cost Trend Analysis</h3>
                                            <p>Track operational spending patterns over time—identify seasonal fluctuations, cost escalation trends, and anomaly months that signal major repairs or maintenance events. <strong>Multi-line visualization</strong> separates labor, parts, and miscellaneous expenses, revealing whether rising costs stem from increased service fees, part replacements, or operational overhead, enabling proactive budget forecasting and vendor contract renegotiation timing.</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- CARD 4: HIGH-DRAIN ASSET MONITORING (Viz RIGHT) -->
                        <div class="col-12">
                            <div class="analytics-info-card">
                                <div class="row align-items-center g-0 flex-lg-row-reverse">
                                    <div class="col-lg-5">
                                        <div class="viz-placeholder" id="viz-opex-assets">
                                            <!-- Infinite scroll will render here -->
                                        </div>
                                    </div>
                                    <div class="col-lg-7">
                                        <div class="analytics-info-card-content">
                                            <h3><i class="fas fa-exclamation-triangle"></i> High-Cost Asset Tracking</h3>
                                            <p>Monitor operational expenses for every asset in real-time—from vehicles and machinery to specialized tools. Each item displays its unique cost breakdown across labor, parts, and miscellaneous charges, enabling you to <strong>identify budget-draining assets</strong> and make data-driven decisions about repair versus replace economics, service provider performance evaluation, or preventive maintenance prioritization on an asset-by-asset basis.</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Row 5: DISPOSAL INTELLIGENCE - 4 CARD GRID -->
                <div class="container-fluid">
                    <div class="row g-4" style="margin-bottom: 3rem;">
                        <!-- CARD 1: Disposal Method Breakdown (Viz LEFT) -->
                        <div class="col-12">
                            <div class="analytics-info-card">
                                <div class="row align-items-center g-0">
                                    <div class="col-lg-5">
                                        <div class="viz-placeholder" id="viz-disposal-methods">
                                            <!-- Donut chart renders here -->
                                        </div>
                                    </div>
                                    <div class="col-lg-7">
                                        <div class="analytics-info-card-content">
                                            <h3><i class="fas fa-circle-notch"></i> Disposal Method Distribution</h3>
                                            <p>Understand how assets exit the portfolio—whether through permanent loss incidents, reaching end-of-useful-life, successful resale, or outright disposal. This breakdown reveals patterns in asset retirement, helping <strong>identify whether premature failures dominate</strong> or if assets serve their full lifespan before disposal, guiding procurement strategies toward longer-lasting categories.</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- CARD 2: Value Recovery Waterfall (Viz RIGHT) -->
                        <div class="col-12">
                            <div class="analytics-info-card">
                                <div class="row align-items-center g-0 flex-lg-row-reverse">
                                    <div class="col-lg-5">
                                        <div class="viz-placeholder" id="viz-disposal-recovery">
                                            <!-- Waterfall grid renders here -->
                                        </div>
                                    </div>
                                    <div class="col-lg-7">
                                        <div class="analytics-info-card-content">
                                            <h3><i class="fas fa-coins"></i> Value Recovery Analysis</h3>
                                            <p>Track the financial journey from original purchase through depreciation to disposal—see book value at retirement, recovery via sales or insurance claims, and net gain or loss. This waterfall highlights <strong>whether disposals recoup value or represent sunk costs</strong>, informing future purchase decisions by showing which asset categories deliver better resale value and which become financial write-offs.</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- CARD 3: Asset Category Retention Comparison (Viz LEFT) -->
                        <div class="col-12">
                            <div class="analytics-info-card">
                                <div class="row align-items-center g-0">
                                    <div class="col-lg-5">
                                        <div class="viz-placeholder" id="viz-disposal-retention">
                                            <!-- Horizontal bar chart renders here -->
                                        </div>
                                    </div>
                                    <div class="col-lg-7">
                                        <div class="analytics-info-card-content">
                                            <h3><i class="fas fa-chart-bar"></i> Category Value Retention</h3>
                                            <p>Compare how different asset categories retain resale value—green bars indicate strong retention (60-100% recovered), yellow shows moderate loss (30-60%), and red signals sunk costs (0-30%). This category-level insight reveals <strong>which equipment types hold value best</strong>, guiding procurement toward assets with better residual worth and identifying categories that depreciate rapidly into write-offs.</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- CARD 4: Disposal Timeline Feed (Viz RIGHT) -->
                        <div class="col-12">
                            <div class="analytics-info-card">
                                <div class="row align-items-center g-0 flex-lg-row-reverse">
                                    <div class="col-lg-5">
                                        <div class="viz-placeholder" id="viz-disposal-timeline">
                                            <!-- Infinite scroll renders here -->
                                        </div>
                                    </div>
                                    <div class="col-lg-7">
                                        <div class="analytics-info-card-content">
                                            <h3><i class="fas fa-stream"></i> Recent Disposal Activity</h3>
                                            <p>Monitor real-time disposal events with complete financial transparency—each asset displays disposal method, purchase cost, depreciated book value, recovered amount, and net gain/loss. This live feed enables <strong>immediate visibility into disposal outcomes</strong>, helping identify successful resales versus total losses, track insurance claim effectiveness, and spot patterns in asset retirement that inform vendor negotiations and replacement timing.</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        <!-- Material Cost Intelligence Section (keep existing small cards) -->
        <section>
            <div class="container-fluid">
                <div class="analytics-hero analytics-material-hero" id="analytics-material-hero">
                    <div class="analytics-hero-content">
                        <h2 class="analytics-hero-title">
                            <i class="fas fa-flask"></i> Material Cost Intelligence
                        </h2>
                        <p class="analytics-hero-subtitle">
                            Every material consumed across the enterprise is tracked with precision—weighted average unit costs capture true expenditure for maintenance materials, employee consumables, and operational supplies.
                        </p>
                    </div>
                </div>
                <div class="row g-4 mt-3">
                    <!-- Card 1: Purchase Cost Tracking -->
                    <div class="col-xl-3 col-md-6 col-lg-4">
                        <div class="analytics-material-card">
                            <div class="material-infinite-scroll" id="viz-purchase-tracking">
                                <div class="material-scroll-track"></div>
                            </div>
                            <div class="analytics-material-card-content">
                                <h4><i class="fas fa-shopping-cart"></i> Purchase Cost Tracking</h4>
                                <p>Purchase cost tracking logs unit prices across all procurement orders, automatically calculating <strong>weighted average costs per material</strong>—ensuring maintenance and operational budgets reflect actual spending patterns instead of outdated procurement estimates.</p>
                            </div>
                        </div>
                    </div>
                    <!-- Card 2: Employee Consumption -->
                    <div class="col-xl-3 col-md-6 col-lg-4">
                        <div class="analytics-material-card">
                            <div class="material-infinite-scroll" id="viz-employee-consumption">
                                <div class="material-scroll-track"></div>
                            </div>
                            <div class="analytics-material-card-content">
                                <h4><i class="fas fa-users"></i> Employee Consumption</h4>
                                <p>Employee consumption tracking captures materials issued to personnel for operational activities, connecting direct material costs to <strong>labor productivity</strong>—revealing where consumables are used efficiently and where excessive requisitions signal training gaps or process inefficiencies.</p>
                            </div>
                        </div>
                    </div>
                    <!-- Card 3: Equipment Allocation -->
                    <div class="col-xl-3 col-md-6 col-lg-4">
                        <div class="analytics-material-card">
                            <div class="material-infinite-scroll" id="viz-equipment-allocation">
                                <div class="material-scroll-track"></div>
                            </div>
                            <div class="analytics-material-card-content">
                                <h4><i class="fas fa-cogs"></i> Equipment Allocation</h4>
                                <p>Equipment consumption allocation logs spare parts, lubricants, and components installed during maintenance events, directly linking material costs to <strong>specific assets and work orders</strong>—identifying which equipment drives material expenses and where part standardization could reduce inventory complexity.</p>
                            </div>
                        </div>
                    </div>
                    <!-- Card 4: Waste Accounting -->
                    <div class="col-xl-3 col-md-6 col-lg-4">
                        <div class="analytics-material-card">
                            <div class="material-infinite-scroll" id="viz-waste-accounting">
                                <div class="material-scroll-track"></div>
                            </div>
                            <div class="analytics-material-card-content">
                                <h4><i class="fas fa-trash-alt"></i> Waste Accounting</h4>
                                <p>Waste and damage accounting tracks materials reported as wasted, damaged, or lost during operations, ensuring <strong>total material costs include disposal and replacement expenses</strong>—so cost analysis reflects operational reality, not just successful installations.</p>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Expiry Note (keep as is) -->
                <div class="expiry-note">
                    <i class="fas fa-exclamation-triangle"></i>
                    <div>
                        <strong>Expiry and obsolescence management</strong> accounts for materials replaced due to shelf-life expiration or specification changes, capturing replacement costs when incurred or flagging zero-cost write-offs—preventing expired inventory from inflating asset counts while actual costs remain hidden.
                    </div>
                </div>
            </div>
        </section>
        <!-- Request Analytics Section -->
        <section class="analytics-sections">
            <div class="container-fluid">
                <!-- Section Header -->
                <div class="analytics-hero analytics-request-hero" id="analytics-request-hero">
                    <div class="analytics-hero-content">
                        <h2 class="analytics-hero-title">
                            <i class="fas fa-clipboard-list"></i> Request Analytics
                        </h2>
                        <p class="analytics-hero-subtitle">
                            Every asset request and material issue tracked from requisition to return—revealing demand patterns, user behavior, and resource allocation intelligence that drives inventory optimization.
                        </p>
                    </div>
                </div>
                <!-- Row 1: Viz LEFT | Content RIGHT -->
                <div class="analytics-info-card">
                    <div class="row align-items-center g-0">
                        <div class="col-lg-5">
                            <div class="demand-infinite-scroll" id="viz-demand-frequency">
                                <div class="demand-scroll-track"></div>
                            </div>
                        </div>
                        <div class="col-lg-7">
                            <div class="analytics-info-card-content">
                                <h3><i class="fas fa-chart-line"></i> Demand Frequency Tracking</h3>
                                <p>Demand frequency tracking identifies <strong>most-requested and least-requested assets with timeframe analysis</strong>—revealing which equipment drives operational demand and where underutilized inventory wastes capital, enabling targeted procurement strategies that match actual usage patterns, not historical assumptions.</p>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Row 2: Content LEFT | Viz RIGHT -->
                <div class="analytics-info-card">
                    <div class="row align-items-center g-0 flex-lg-row-reverse">
                        <div class="col-lg-5">
                            <div class="requester-infinite-scroll" id="viz-requester-profiling">
                                <div class="requester-scroll-track"></div>
                            </div>
                        </div>
                        <div class="col-lg-7">
                            <div class="analytics-info-card-content">
                                <h3><i class="bi bi-file-earmark-person"></i> Requester Profiling</h3>
                                <p>Requester profiling logs <strong>who requests specific assets most frequently</strong>—exposing individual usage patterns that guide training needs, workload distribution, and accountability measures while identifying power users whose demand signals genuine operational requirements versus occasional requesters who may need alternatives.</p>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Row 3: Viz LEFT | Content RIGHT -->
                <div class="analytics-info-card">
                    <div class="row align-items-center g-0">
                        <div class="col-lg-5">
                            <div class="return-infinite-scroll" id="viz-return-condition">
                                <div class="return-scroll-track"></div>
                            </div>
                        </div>
                        <div class="col-lg-7">
                            <div class="analytics-info-card-content">
                                <h3><i class="fas fa-exclamation-triangle"></i> Return Condition Analysis</h3>
                                <p>Return condition analysis captures <strong>damage reports filed during asset returns</strong>—identifying which users consistently return equipment damaged and which assets suffer frequent mishandling, connecting user behavior to asset lifecycle costs while flagging training gaps or equipment durability issues that inflate maintenance expenses.</p>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Row 4: Content LEFT | Viz RIGHT -->
                <div class="analytics-info-card">
                    <div class="row align-items-center g-0 flex-lg-row-reverse">
                        <div class="col-lg-5">
                            <div class="floor-infinite-scroll" id="viz-floor-time">
                                <div class="floor-scroll-track"></div>
                            </div>
                        </div>
                        <div class="col-lg-7">
                            <div class="analytics-info-card-content">
                                <h3><i class="fas fa-clock"></i> Floor Time vs Shelf Time</h3>
                                <p>Floor time versus shelf time calculates <strong>how long assets remain issued versus stored</strong>—distinguishing high-utilization equipment earning its keep from inventory sitting idle, optimizing purchase decisions by revealing which assets justify ownership and which could be rented, shared, or eliminated.</p>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Row 5: Viz LEFT | Content RIGHT -->
                <div class="analytics-info-card">
                    <div class="row align-items-center g-0">
                        <div class="col-lg-5">
                            <div class="rejection-infinite-scroll" id="viz-rejection-patterns">
                                <div class="rejection-scroll-track"></div>
                            </div>
                        </div>
                        <div class="col-lg-7">
                            <div class="analytics-info-card-content">
                                <h3><i class="fas fa-times-circle"></i> Rejection Pattern Tracking</h3>
                                <p>Rejection pattern tracking monitors <strong>most-rejected requests</strong>—surfacing resource bottlenecks, inappropriate requests, or policy friction points that slow operations, enabling workflow refinements that accelerate legitimate requests while filtering unnecessary demand.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        <!-- Material Request Intelligence Section -->
        <section class="analytics-sections">
            <div class="container-fluid">
                <div class="analytics-hero analytics-material-request-hero" id="analytics-material-request-hero">
                    <div class="analytics-hero-content">
                        <h2 class="analytics-hero-title">
                            <i class="fas fa-boxes"></i> Material Request Intelligence
                        </h2>
                        <p class="analytics-hero-subtitle">
                            Volumetric tracking and consumption analysis revealing material usage patterns, waste reduction opportunities, and optimal inventory positioning strategies.
                        </p>
                    </div>
                </div>
                <div class="row g-4 mt-3 d-flex justify-content-center">
                    <!-- Card 1: Volumetric Issue Tracking -->
                    <div class="col-md-6 col-lg-4">
                        <div class="analytics-material-card">
                            <div class="volumetric-infinite-scroll" id="viz-volumetric-tracking">
                                <div class="volumetric-scroll-track"></div>
                            </div>
                            <div class="analytics-material-card-content">
                                <h4><i class="fas fa-chart-bar"></i> Volumetric Issue Tracking</h4>
                                <p>Volumetric issue tracking logs material quantities dispensed per request—calculating <strong>consumption velocity that drives reorder points and inventory levels</strong>, ensuring stockrooms maintain optimal supply without overstocking or shortages that halt work orders.</p>
                            </div>
                        </div>
                    </div>
                    <!-- Card 2: Complete Consumption Analysis -->
                    <div class="col-md-6 col-lg-4">
                        <div class="analytics-material-card">
                            <div class="consumption-infinite-scroll" id="viz-consumption-analysis">
                                <div class="consumption-scroll-track"></div>
                            </div>
                            <div class="analytics-material-card-content">
                                <h4><i class="fas fa-pie-chart"></i> Complete Consumption Analysis</h4>
                                <p>Complete consumption analysis distinguishes fully-consumed materials requiring no return from partial usage returns—revealing whether <strong>issue quantities match actual needs</strong> or if overissuing drives waste, enabling portion optimization that cuts material costs.</p>
                            </div>
                        </div>
                    </div>
                    <!-- Card 3: Return Condition Assessment -->
                    <div class="col-md-6 col-lg-4">
                        <div class="analytics-material-card">
                            <div class="return-condition-infinite-scroll" id="viz-return-assessment">
                                <div class="return-condition-scroll-track"></div>
                            </div>
                            <div class="analytics-material-card-content">
                                <h4><i class="fas fa-search"></i> Return Condition Assessment</h4>
                                <p>Return condition assessment compares issued material state against returned condition—identifying whether materials degrade during use or return unused in original state, flagging <strong>improper storage, mishandling, or specification mismatches</strong> that waste inventory.</p>
                            </div>
                        </div>
                    </div>
                    <!-- Card 4: Requester Demand Profiling -->
                    <div class="col-md-6 col-lg-4">
                        <div class="analytics-material-card">
                            <div class="requester-demand-infinite-scroll" id="viz-requester-demand">
                                <div class="requester-demand-scroll-track"></div>
                            </div>
                            <div class="analytics-material-card-content">
                                <h4><i class="fas fa-users-cog"></i> Requester Demand Profiling</h4>
                                <p>Requester demand profiling tracks who requests materials most frequently—exposing <strong>consumption patterns by individual, team, or department</strong> that reveal training effectiveness, process efficiency, and potential waste or theft patterns requiring intervention.</p>
                            </div>
                        </div>
                    </div>
                    <!-- Card 5: Peak Demand Timing -->
                    <div class="col-md-6 col-lg-4">
                        <div class="analytics-material-card">
                            <div class="peak-demand-infinite-scroll" id="viz-peak-demand">
                                <div class="peak-demand-scroll-track"></div>
                            </div>
                            <div class="analytics-material-card-content">
                                <h4><i class="fas fa-calendar-alt"></i> Peak Demand Timing</h4>
                                <p>Peak demand timing identifies when materials are most frequently requested—enabling <strong>strategic inventory positioning and staffing optimization</strong> that ensures critical supplies are accessible during high-demand periods without maintaining excessive safety stock year-round.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        <!-- Blend Consumption Intelligence Section -->
        <section class="analytics-sections">
            <div class="container-fluid">
                <div class="analytics-hero analytics-blend-hero" id="analytics-blend-hero">
                    <div class="analytics-hero-content">
                        <h2 class="analytics-hero-title">
                            <i class="fas fa-flask"></i> Blend Consumption Analysis
                        </h2>
                        <p class="analytics-hero-subtitle">
                            Specialized tracking for blended materials without return data—optimizing production planning, batch sizing, and waste reduction through consumption pattern analysis.
                        </p>
                    </div>
                </div>
                <div class="row g-4 mt-3">
                    <!-- Card 1: Issue Frequency Analysis -->
                    <div class="col-xl-3 col-md-6 col-lg-4">
                        <div class="analytics-material-card">
                            <div class="blend-frequency-infinite-scroll" id="viz-issue-frequency">
                                <div class="blend-frequency-scroll-track"></div>
                            </div>
                            <div class="analytics-material-card-content">
                                <h4><i class="fas fa-tachometer-alt"></i> Issue Frequency Analysis</h4>
                                <p>Issue frequency analysis tracks blend requisitions without return data—measuring <strong>consumption rates that drive production planning and formulation demand forecasting</strong>, ensuring blended materials are prepared in quantities matching operational requirements without excess spoilage.</p>
                            </div>
                        </div>
                    </div>
                    <!-- Card 2: Requester Consumption Patterns -->
                    <div class="col-xl-3 col-md-6 col-lg-4">
                        <div class="analytics-material-card">
                            <div class="blend-requester-infinite-scroll" id="viz-requester-consumption">
                                <div class="blend-requester-scroll-track"></div>
                            </div>
                            <div class="analytics-material-card-content">
                                <h4><i class="fas fa-user-friends"></i> Requester Consumption Patterns</h4>
                                <p>Requester consumption patterns identify who requests blends most often—revealing which <strong>operations, teams, or processes drive blend usage</strong> and whether consumption aligns with production output expectations or signals inefficiency requiring process review.</p>
                            </div>
                        </div>
                    </div>
                    <!-- Card 3: Timeframe Demand Intelligence -->
                    <div class="col-xl-3 col-md-6 col-lg-4">
                        <div class="analytics-material-card">
                            <div class="blend-timeframe-infinite-scroll" id="viz-timeframe-demand">
                                <div class="blend-timeframe-scroll-track"></div>
                            </div>
                            <div class="analytics-material-card-content">
                                <h4><i class="fas fa-clock"></i> Timeframe Demand Intelligence</h4>
                                <p>Timeframe demand intelligence maps when blends are most frequently issued—<strong>optimizing preparation schedules and batch sizing</strong> to minimize waste from expired or unused blends while ensuring availability during peak operational periods.</p>
                            </div>
                        </div>
                    </div>
                    <!-- Card 4: Volume Optimization Tracking -->
                    <div class="col-xl-3 col-md-6 col-lg-4">
                        <div class="analytics-material-card">
                            <div class="blend-volume-infinite-scroll" id="viz-volume-optimization">
                                <div class="blend-volume-scroll-track"></div>
                            </div>
                            <div class="analytics-material-card-content">
                                <h4><i class="fas fa-balance-scale"></i> Volume Optimization Tracking</h4>
                                <p>Volume optimization tracking analyzes issued blend quantities—determining whether <strong>standard portions align with actual consumption</strong> or if customization opportunities exist to reduce waste and improve material efficiency without compromising operational effectiveness.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        <!-- INSPECTION & REPORTING SECTION -->
        <section class="analytics-sections">
            <div class="container-fluid">
                <!-- Section Hero -->
                <div class="analytics-hero analytics-inspection-hero" id="analytics-inspection-hero">
                    <div class="analytics-hero-content">
                        <h2 class="analytics-hero-title"><i class="fas fa-clipboard-check"></i> Inspection & Reporting</h2>
                        <p class="analytics-hero-subtitle">
                            Every inspection logged, every report tracked—from scheduled assessments to incident submissions, revealing compliance gaps, asset reliability patterns, and operational accountability across your enterprise.
                        </p>
                    </div>
                </div>
                <!-- ROW 1: Inspection Efficiency Tracking (Viz LEFT, Content RIGHT) -->
                <div class="analytics-info-card">
                    <div class="row align-items-center g-0">
                        <div class="col-lg-5">
                            <div class="viz-placeholder" id="viz-inspection-efficiency">
                                <!-- Infinite scroll renders here -->
                            </div>
                        </div>
                        <div class="col-lg-7">
                            <div class="analytics-info-card-content">
                                <h3><i class="fas fa-tasks"></i> Inspection Efficiency Tracking</h3>
                                <p>
                                    Monitor <strong>inspection completion rates</strong> across all asset categories—tracking which scheduled assessments were completed on time, delayed, or skipped entirely. Each entry reveals inspector accountability, asset coverage gaps, and compliance risk zones, enabling proactive scheduling adjustments and workload rebalancing before regulatory audits expose deficiencies.
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- ROW 2: Report Submission Feed (Content LEFT, Viz RIGHT) -->
                <div class="analytics-info-card">
                    <div class="row align-items-center g-0 flex-lg-row-reverse">
                        <div class="col-lg-5">
                            <div class="viz-placeholder" id="viz-report-submissions">
                                <!-- Infinite scroll renders here -->
                            </div>
                        </div>
                        <div class="col-lg-7">
                            <div class="analytics-info-card-content">
                                <h3><i class="fas fa-exclamation-circle"></i> Report Submission Activity</h3>
                                <p>
                                    Track every <strong>damage report, malfunction notification, and incident submission</strong> across tools, equipment, and materials. Real-time feed displays reporter identity, asset affected, severity classification, and timestamp—revealing reporting velocity patterns, chronic problem assets, and user accountability that guide targeted maintenance interventions and training programs.
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- ROW 3: Inspection vs Report Correlation (Viz LEFT, Content RIGHT) -->
                <div class="analytics-info-card">
                    <div class="row align-items-center g-0">
                        <div class="col-lg-5">
                            <div class="viz-placeholder" id="viz-inspection-report-correlation">
                                <!-- Compound progress bars render here -->
                            </div>
                        </div>
                        <div class="col-lg-7">
                            <div class="analytics-info-card-content">
                                <h3><i class="fas fa-chart-pie"></i> Inspection vs Report Balance</h3>
                                <p>
                                    Visualize the relationship between <strong>scheduled inspections and spontaneous reports</strong>—revealing whether proactive assessments catch issues before breakdowns occur, or if reactive reporting dominates. This balance metric exposes inspection effectiveness, guiding schedule intensification for high-report assets and validating inspection protocols for low-incident equipment.
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        <!--RESOLVING & OPEX MANAGEMENT SECTION-->
        <section class="analytics-sections">
            <div class="container-fluid">
                <!-- Section Hero -->
                <div class="analytics-hero analytics-resolving-hero" id="analytics-resolving-hero">
                    <div class="analytics-hero-content">
                        <h2 class="analytics-hero-title"><i class="fas fa-tools"></i> Resolving & OPEX Management</h2>
                        <p class="analytics-hero-subtitle">
                            Every reported issue tracked through resolution—repairs completed, replacements authorized, missing items recovered or written off—revealing operational response effectiveness, maintenance efficiency, and the true operational expense burden after all recoveries and interventions.
                        </p>
                    </div>
                </div>
                <!-- ROW 1: Resolution Status Tracking (Viz LEFT, Content RIGHT) -->
                <div class="analytics-info-card">
                    <div class="row align-items-center g-0">
                        <div class="col-lg-5">
                            <div class="viz-placeholder" id="viz-resolution-status">
                                <!-- Infinite scroll renders here -->
                            </div>
                        </div>
                        <div class="col-lg-7">
                            <div class="analytics-info-card-content">
                                <h3><i class="fas fa-check-circle"></i> Resolution Status Feed</h3>
                                <p>
                                    Track every reported issue through its complete resolution lifecycle—see which assets were <strong>repaired and returned to service</strong>, which required <strong>full replacement</strong>, and which missing items were <strong>recovered versus permanently damaged</strong>. Each entry displays resolution method, completion date, and associated OPEX charges, enabling accountability tracking and response time analysis across your maintenance operations.
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- ROW 2: OPEX Breakdown by Resolution Type (Content LEFT, Viz RIGHT) -->
                <div class="analytics-info-card">
                    <div class="row align-items-center g-0 flex-lg-row-reverse">
                        <div class="col-lg-5">
                            <div class="viz-placeholder" id="viz-resolution-opex">
                                <!-- Donut chart renders here -->
                            </div>
                        </div>
                        <div class="col-lg-7">
                            <div class="analytics-info-card-content">
                                <h3><i class="fas fa-money-bill-wave"></i> OPEX Distribution by Resolution</h3>
                                <p>
                                    Visualize <strong>operational spending patterns</strong> across resolution types—discover whether repair costs dominate your budget or if replacement expenses consume more resources. This breakdown reveals the <strong>cost-effectiveness</strong> of your repair-versus-replace decisions, showing which resolution strategies deliver better value and identifying opportunities to optimize maintenance contracts or supplier relationships.
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- ROW 3: Recovery Rate Analysis (Viz LEFT, Content RIGHT) -->
                <div class="analytics-info-card">
                    <div class="row align-items-center g-0">
                        <div class="col-lg-5">
                            <div class="viz-placeholder" id="viz-recovery-analysis">
                                <!-- Progress bars render here -->
                            </div>
                        </div>
                        <div class="col-lg-7">
                            <div class="analytics-info-card-content">
                                <h3><i class="fas fa-percentage"></i> Item Recovery Success Rate</h3>
                                <p>
                                    Monitor your organization's <strong>success rate in recovering missing or damaged items</strong>—tracking which reported losses were found and restored versus those marked as permanent damage write-offs. This metric reveals operational discipline, accountability effectiveness, and potential security gaps, helping you identify patterns in item recovery and implement targeted interventions to reduce permanent asset losses.
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        <!--VEHICLE MILEAGE & REFUELING SECTION-->
        <section class="analytics-sections">
            <div class="container-fluid">
                <!-- Section Hero -->
                <div class="analytics-hero analytics-vehicle-hero" id="analytics-vehicle-hero">
                    <div class="analytics-hero-content">
                        <h2 class="analytics-hero-title"><i class="fas fa-car"></i> Vehicle Mileage & Refueling</h2>
                        <p class="analytics-hero-subtitle">
                            Every kilometer tracked, every refueling logged—from diesel and petrol consumption to electric vehicle charging sessions—revealing fleet efficiency patterns, energy cost trends, and operational range optimization across conventional and electric mobility assets.
                        </p>
                    </div>
                </div>
                <!-- ROW 1: Vehicle Issuing & Mileage Tracking (Viz LEFT, Content RIGHT) -->
                <div class="analytics-info-card">
                    <div class="row align-items-center g-0">
                        <div class="col-lg-5">
                            <div class="viz-placeholder" id="viz-vehicle-mileage">
                                <!-- Infinite scroll renders here -->
                            </div>
                        </div>
                        <div class="col-lg-7">
                            <div class="analytics-info-card-content">
                                <h3><i class="fas fa-tachometer-alt"></i> Vehicle Issuing & Mileage Feed</h3>
                                <p>
                                    Track every <strong>vehicle assignment and mileage update</strong> across your fleet—monitoring who's driving which vehicle, departure and return odometer readings, and distance covered per trip. This real-time feed reveals driver accountability, vehicle utilization patterns, and mileage discrepancies that help identify unauthorized usage, optimize fleet allocation, and plan preventive maintenance based on actual distance traveled.
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- ROW 2: Refueling Activity Feed (Content LEFT, Viz RIGHT) -->
                <div class="analytics-info-card">
                    <div class="row align-items-center g-0 flex-lg-row-reverse">
                        <div class="col-lg-5">
                            <div class="viz-placeholder" id="viz-refueling-activity">
                                <!-- Infinite scroll renders here -->
                            </div>
                        </div>
                        <div class="col-lg-7">
                            <div class="analytics-info-card-content">
                                <h3><i class="fas fa-gas-pump"></i> Refueling & Charging Activity</h3>
                                <p>
                                    Monitor all <strong>fuel and charging events</strong> across conventional and electric vehicles—tracking petrol, diesel, and EV charging sessions with precise cost, quantity, and energy consumption data. For in-house grid charging where metering isn't commercial-grade, the system accepts "grid" entries to maintain continuous tracking without forcing estimated values, ensuring complete operational visibility while accommodating infrastructure limitations.
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- ROW 3: Fuel Efficiency Analysis (Viz LEFT, Content RIGHT) -->
                <div class="analytics-info-card">
                    <div class="row align-items-center g-0">
                        <div class="col-lg-5">
                            <div class="viz-placeholder" id="viz-fuel-efficiency">
                                <!-- Efficiency cards render here -->
                            </div>
                        </div>
                        <div class="col-lg-7">
                            <div class="analytics-info-card-content">
                                <h3><i class="fas fa-leaf"></i> Fleet Efficiency Metrics</h3>
                                <p>
                                    Analyze <strong>fuel economy and energy efficiency</strong> across your entire fleet—comparing kilometers-per-liter for conventional vehicles against cost-per-kilometer for electric assets. These metrics expose high-consumption vehicles requiring maintenance attention, validate the economic benefits of electrification investments, and guide future procurement decisions by revealing the true operational cost differences between fuel types and vehicle categories.
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        <!-- Logs & Registers Section -->
        <section class="analytics-sections">
            <div class="container-fluid">
                <!-- Section Hero -->
                <div class="analytics-hero analytics-logs-hero" id="analytics-logs-hero">
                    <div class="analytics-hero-content">
                        <h2 class="analytics-hero-title">
                            <i class="fas fa-clipboard-check"></i> Audit-Ready Logs & Registers
                        </h2>
                        <p class="analytics-hero-subtitle">
                            Every transaction permanently recorded in dual intelligence layers—instant compliance documentation at the click of a button.
                        </p>
                    </div>
                </div>
                <!-- Opening Statement Card -->
                <div class="logs-intro-card">
                    <div class="row g-0">
                        <div class="col-lg-8">
                            <div class="intro-content">
                                <p><strong>Universal activity log</strong> captures every action performed across the entire application in strict chronological sequence—creating <strong>filterable master records</strong> that reconstruct any operational event, user decision, or system transaction regardless of module or workflow, ensuring nothing escapes documentation when investigations demand comprehensive activity reconstruction.</p>
                                <p><strong>Item-specific lifecycle logs</strong> embed complete operational histories within individual asset profiles—documenting every request, relocation, maintenance event, repair action, inspection finding, and report submission chronologically so asset managers access complete provenance without navigating multiple systems, enabling instant lifecycle analysis that supports replacement decisions and warranty claims.</p>
                            </div>
                        </div>
                        <div class="col-lg-4 d-flex align-items-center justify-content-center">
                            <div class="audit-badge">
                                <i class="fas fa-award"></i>
                                <span>Compliance<br>Ready</span>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Register Grid -->
                <div class="register-grid">
                    <!-- Register Card 1 -->
                    <div class="register-card">
                        <div class="register-icon">
                            <i class="fas fa-clipboard-list"></i>
                        </div>
                        <h4>Request & Allotment Register</h4>
                        <p>Documents every asset requisition, approval decision, issue transaction, and return event—capturing <strong>who requested what, when, for how long, and in what condition items returned</strong>, creating accountability chains that prevent disputes over asset custody and reveal usage patterns guiding procurement optimization.</p>
                    </div>
                    <!-- Register Card 2 -->
                    <div class="register-card">
                        <div class="register-icon">
                            <i class="fas fa-exclamation-circle"></i>
                        </div>
                        <h4>Report Archive</h4>
                        <p>Preserves every damage notification, malfunction report, and incident submission with complete detail capture—enabling <strong>trend analysis across asset types, user groups, and operational periods</strong> that identifies chronic failure patterns, reveals training gaps, and supports root-cause investigations when incident clusters demand explanation.</p>
                    </div>
                    <!-- Register Card 3 -->
                    <div class="register-card">
                        <div class="register-icon">
                            <i class="fas fa-search"></i>
                        </div>
                        <h4>Inspection Register</h4>
                        <p>Logs every assessment conducted, skipped, or rescheduled with timestamped findings and remediation actions—providing <strong>compliance-ready audit trails</strong> that prove due diligence while revealing inspection workload patterns that optimize technician scheduling and prevent coverage gaps.</p>
                    </div>
                    <!-- Register Card 4 -->
                    <div class="register-card">
                        <div class="register-icon">
                            <i class="fas fa-tools"></i>
                        </div>
                        <h4>Resolution Chronicle</h4>
                        <p>Tracks every corrective action from initial response through closure—documenting <strong>repair decisions, parts consumed, labor invested, and outcome verification</strong> in centralized records that support warranty claims, justify maintenance budgets, and identify assets requiring excessive intervention before costs spiral uncontrollably.</p>
                    </div>
                    <!-- Register Card 5 -->
                    <div class="register-card">
                        <div class="register-icon">
                            <i class="fas fa-boxes"></i>
                        </div>
                        <h4>Consumption Archives</h4>
                        <p>Record material and blend usage volumetrically—capturing <strong>who consumed what, when, in what quantity, for which work order</strong> so inventory management reflects actual operational consumption rather than procurement estimates, preventing stockouts while eliminating overstocking waste.</p>
                    </div>
                    <!-- Register Card 6 -->
                    <div class="register-card">
                        <div class="register-icon">
                            <i class="fas fa-exchange-alt"></i>
                        </div>
                        <h4>Transfer & Relocation Log</h4>
                        <p>Workflow-tailored registers mimic physical record books with digital precision—maintaining <strong>dedicated archives for location transfers, damage reports, and timestamped findings</strong> that satisfy regulatory requirements while enabling cross-workflow pattern analysis impossible with paper-based systems.</p>
                    </div>
                </div>
                <!-- Infinite Filtering Intelligence (analytics-info-card style with animated blue gradient) -->
                <div class="infinite-filter-card">
                    <div class="animated-gradient-bg"></div>
                    <div class="filter-content-wrapper">
                        <div class="filter-icon-wrapper">
                            <i class="fas fa-filter"></i>
                        </div>
                        <h3>Infinite Filtering Intelligence</h3>
                        <p><strong>Infinite filtering intelligence</strong> enables slicing register data across any dimension—<strong>by asset, user, department, timeframe, workflow, or custom criteria</strong>—transforming historical records into strategic intelligence that drives future operational planning, budget forecasting, and process optimization based on documented reality rather than assumptions.</p>
                    </div>
                </div>
                <!-- Highlight: One-Click Audit Compliance (analytics-info-card style) -->
                <div class="analytics-info-card" style="margin-bottom: 3rem;">
                    <div class="row align-items-center g-0">
                        <div class="col-lg-5">
                            <div class="viz-placeholder" id="viz-audit-compliance">
                                <i class="fas fa-shield-check" style="font-size: 5rem; color: var(--scorp-primary);"></i>
                            </div>
                        </div>
                        <div class="col-lg-7">
                            <div class="analytics-info-card-content">
                                <h3><i class="fas fa-hand-pointer"></i> One-Click Audit Compliance</h3>
                                <p>Auditors demand proof. Regulators require documentation. Disputes need evidence. Sapphire delivers all three instantly—<strong>no scrambling for paperwork, no reconstructing timelines from memory, no gaps in documentation chains</strong>. When audits arrive, compliance verification takes clicks, not weeks, because every action was captured from day one in tamper-proof, chronologically sequenced records that survive scrutiny.</p>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Closing Power Statement: Animated Taglines + Content -->
                <div class="tagline-power-card">
                    <div class="tagline-animation-wrapper">
                        <div class="tagline-line tagline-1">
                            <span class="tagline-icon"><i class="bi bi-journals"></i></span>
                            <h2 class="animated-tagline">Be Audit-Ready.</h2>
                        </div>
                        <div class="tagline-line tagline-2">
                            <span class="tagline-icon"><i class="bi bi-database-fill-gear"></i></span>
                            <h2 class="animated-tagline">Let Data Drive Decisions.</h2>
                        </div>
                    </div>
                    <div class="tagline-content">
                        <p>Operational transparency isn't optional—<strong>it's operational insurance</strong>. When every action leaves a permanent trace, accountability becomes automatic, compliance becomes effortless, and strategic decisions rest on documented truth rather than institutional memory.</p>
                        <p class="tagline-footer"><strong>The future approaches with data-backed confidence. The past remains forever accessible. The present operates with complete clarity.</strong></p>
                    </div>
                </div>
            </div>
        </section>


        <!-- Bootstrap Bundle JS 5.3.3 (Latest - includes Popper) -->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>


        <!-- Analytics Background Animation Script -->
        <script>
            // ═══════════════════════════════════════════════════════════════
            // ANIMATED ANALYTICS BACKGROUND - Main Hero Canvas
            // ═══════════════════════════════════════════════════════════════
            
            document.addEventListener('DOMContentLoaded', function() {
                const canvas = document.getElementById('analytics-canvas');
                if (!canvas) return; // Safety check
                
                const ctx = canvas.getContext('2d');
                
                // Set canvas size
                function resizeCanvas() {
                    canvas.width = canvas.offsetWidth;
                    canvas.height = canvas.offsetHeight;
                }
                resizeCanvas();
                window.addEventListener('resize', resizeCanvas);
                
                // Sapphire blue colors for lines
                const lineColors = [
                    'rgba(0, 102, 204, 0.8)',
                    'rgba(51, 153, 255, 0.7)',
                    'rgba(102, 178, 255, 0.6)'
                ];
                
                // Colorful bar colors
                const barColors = [
                    'rgba(0, 102, 204, 0.7)',
                    'rgba(34, 197, 94, 0.7)',
                    'rgba(249, 115, 22, 0.7)',
                    'rgba(239, 68, 68, 0.7)',
                    'rgba(168, 85, 247, 0.7)',
                    'rgba(139, 92, 246, 0.7)',
                    'rgba(234, 179, 8, 0.7)'
                ];
                
                // Get random color different from previous
                function getRandomColor(previousColor) {
                    let newColor;
                    do {
                        newColor = barColors[Math.floor(Math.random() * barColors.length)];
                    } while (newColor === previousColor && barColors.length > 1);
                    return newColor;
                }
                
                // Animated line paths
                class AnimatedLine {
                    constructor() {
                        this.points = [];
                        this.color = lineColors[Math.floor(Math.random() * lineColors.length)];
                        this.speed = Math.random() * 0.5 + 0.3;
                        this.amplitude = Math.random() * 40 + 30;
                        this.frequency = Math.random() * 0.01 + 0.005;
                        this.yOffset = Math.random() * canvas.height;
                        this.phase = Math.random() * Math.PI * 2;
                        
                        for (let i = 0; i <= canvas.width; i += 10) {
                            this.points.push({ x: i, y: 0 });
                        }
                    }
                    
                    update(time) {
                        for (let i = 0; i < this.points.length; i++) {
                            const x = this.points[i].x;
                            this.points[i].y = this.yOffset + 
                                Math.sin(x * this.frequency + time * this.speed + this.phase) * this.amplitude;
                        }
                    }
                    
                    draw() {
                        ctx.beginPath();
                        ctx.strokeStyle = this.color;
                        ctx.lineWidth = 2;
                        ctx.moveTo(this.points[0].x, this.points[0].y);
                        for (let i = 1; i < this.points.length; i++) {
                            ctx.lineTo(this.points[i].x, this.points[i].y);
                        }
                        ctx.stroke();
                    }
                }
                
                // Create animated lines
                const lines = [];
                for (let i = 0; i < 5; i++) {
                    lines.push(new AnimatedLine());
                }
                
                // Flowing Bar Graph Rail
                class BarGraphRail {
                    constructor() {
                        this.bars = [];
                        this.barWidth = 29;
                        this.barGap = 3.39;
                        this.speed = 0.41;
                        
                        const numBars = Math.ceil(canvas.width / (this.barWidth + this.barGap)) + 20;
                        let previousColor = null;
                        
                        for (let i = 0; i < numBars; i++) {
                            const color = getRandomColor(previousColor);
                            this.bars.push({
                                x: i * (this.barWidth + this.barGap),
                                height: Math.random() * 120 + 60,
                                targetHeight: Math.random() * 120 + 60,
                                animationSpeed: Math.random() * 0.03 + 0.02,
                                color: color
                            });
                            previousColor = color;
                        }
                    }
                    
                    update() {
                        this.bars.forEach(bar => {
                            bar.x -= this.speed;
                            
                            if (Math.abs(bar.height - bar.targetHeight) < 2) {
                                bar.targetHeight = Math.random() * 120 + 60;
                            }
                            bar.height += (bar.targetHeight - bar.height) * bar.animationSpeed;
                        });
                        
                        this.bars = this.bars.filter(bar => bar.x + this.barWidth > 0);
                        
                        const lastBar = this.bars[this.bars.length - 1];
                        if (lastBar && lastBar.x < canvas.width + 50) {
                            const newColor = getRandomColor(lastBar.color);
                            this.bars.push({
                                x: lastBar.x + this.barWidth + this.barGap,
                                height: Math.random() * 120 + 60,
                                targetHeight: Math.random() * 120 + 60,
                                animationSpeed: Math.random() * 0.03 + 0.02,
                                color: newColor
                            });
                        }
                    }
                    
                    draw() {
                        this.bars.forEach(bar => {
                            const y = canvas.height - bar.height;
                            ctx.fillStyle = bar.color;
                            ctx.fillRect(bar.x, y, this.barWidth, bar.height);
                        });
                    }
                }
                
                const barRail = new BarGraphRail();
                
                // Grid dots
                const dots = [];
                const dotSpacing = 40;
                
                for (let x = 0; x < canvas.width; x += dotSpacing) {
                    for (let y = 0; y < canvas.height; y += dotSpacing) {
                        if (Math.random() > 0.7) {
                            dots.push({
                                x: x,
                                y: y,
                                radius: Math.random() * 2 + 1,
                                opacity: Math.random() * 0.5 + 0.3,
                                pulse: Math.random() * Math.PI * 2
                            });
                        }
                    }
                }
                
                // Animation loop
                let time = 0;
                function animate() {
                    ctx.clearRect(0, 0, canvas.width, canvas.height);
                    
                    dots.forEach(dot => {
                        const pulseOpacity = dot.opacity + Math.sin(time * 0.02 + dot.pulse) * 0.2;
                        ctx.fillStyle = `rgba(0, 102, 204, ${pulseOpacity})`;
                        ctx.beginPath();
                        ctx.arc(dot.x, dot.y, dot.radius, 0, Math.PI * 2);
                        ctx.fill();
                    });
                    
                    lines.forEach(line => {
                        line.update(time);
                        line.draw();
                    });
                    
                    barRail.update();
                    barRail.draw();
                    
                    time += 0.02;
                    requestAnimationFrame(animate);
                }
                
                animate();
            });
            
            // ═══════════════════════════════════════════════════════════════
            // ANALYTICS HERO ICON RAIN - Universal Function
            // ═══════════════════════════════════════════════════════════════
            
            function analyticsIconRain(heroId, icons, count, config = {}) {
            const hero = document.getElementById(heroId);
            if (!hero) return;
            
            const defaults = {
                minSize: 2,
                maxSize: 4,
                minDuration: 8,
                maxDuration: 15,
                maxDelay: 5
            };
            
            const settings = { ...defaults, ...config };
            const iconArray = Array.isArray(icons) ? icons : [icons];
            
            for (let i = 0; i < count; i++) {
                const randomIcon = iconArray[Math.floor(Math.random() * iconArray.length)];
                const icon = document.createElement('i');
                icon.className = randomIcon + ' analytics-falling-icon';
                
                icon.style.left = Math.random() * 100 + '%';
                icon.style.animationDelay = Math.random() * settings.maxDelay + 's';
                icon.style.animationDuration = (settings.minDuration + Math.random() * (settings.maxDuration - settings.minDuration)) + 's';
                icon.style.fontSize = (settings.minSize + Math.random() * (settings.maxSize - settings.minSize)) + 'rem';
                
                hero.appendChild(icon);
            }
            }
            
            // ═══════════════════════════════════════════════════════════════
            // INITIALIZE SECTION HEROES (Not Main Hero)
            // ═══════════════════════════════════════════════════════════════
            
            document.addEventListener('DOMContentLoaded', function() {
                // Cost Analytics
                analyticsIconRain('analytics-cost-hero', [
                    'fa-solid fa-money-bill-1',
                    'fa-solid fa-money-bill-transfer',
                    'fa-solid fa-money-bill-wave',
                    'fa-solid fa-money-bills',
                    'fa-solid fa-money-check',
                    'fa-solid fa-credit-card',
                    'fa-solid fa-wallet',
                    'fa-solid fa-indian-rupee-sign',
                    'fa-solid fa-money-bill-trend-up'
                ], 20);
                
                // Material Cost Intelligence
                analyticsIconRain('analytics-material-hero', [
                    'fas fa-flask',
                    'fas fa-vial',
                    'fas fa-droplet',
                    'fas fa-mortar-pestle'
                ], 20);
                
                // Maintenance Analytics
                analyticsIconRain('analytics-maintenance-hero', [
                    'fas fa-wrench',
                    'fas fa-screwdriver',
                    'fas fa-hammer',
                    'fas fa-tools'
                ], 20);
                
                // Performance Analytics
                analyticsIconRain('analytics-performance-hero', [
                    'fas fa-chart-line',
                    'fas fa-chart-area',
                    'fas fa-tachometer-alt',
                    'fas fa-rocket'
                ], 20);
                
                // Audit Analytics
                analyticsIconRain('analytics-audit-hero', [
                    'fas fa-clipboard-check',
                    'fas fa-file-signature',
                    'fas fa-stamp',
                    'fas fa-shield-check'
                ], 20);
                
                // Request Analytics
                analyticsIconRain('analytics-request-hero', [
                    'fas fa-clipboard-list',
                    'fas fa-chart-bar',
                    'fas fa-clock',
                    'fas fa-user-check'
                ], 20);
                
                // Material Request
                analyticsIconRain('analytics-material-request-hero', [
                    'fas fa-boxes',
                    'fas fa-box',
                    'fas fa-dolly',
                    'fas fa-warehouse'
                ], 20);
                
                // Blend Consumption
                analyticsIconRain('analytics-blend-hero', [
                    'fas fa-flask',
                    'fas fa-blender',
                    'fas fa-beaker',
                    'fas fa-atom'
                ], 20);
                
                // Logs & Registers
                analyticsIconRain('analytics-logs-hero', [
                    'fas fa-clipboard-check',
                    'fas fa-file-alt',
                    'fas fa-shield-check',
                    'fas fa-stamp'
                ], 15);
                
                // ═══════════════════════════════════════════════════════════════
                // NEW SECTION: Inspection & Reporting
                // ═══════════════════════════════════════════════════════════════
                analyticsIconRain('analytics-inspection-hero', [
                    'fas fa-clipboard-check',
                    'fas fa-tasks',
                    'fas fa-exclamation-circle',
                    'fas fa-file-alt'
                ], 20);
                
                analyticsIconRain('analytics-resolving-hero', [
                    'fas fa-tools',
                    'fas fa-wrench',
                    'fas fa-check-circle',
                    'fas fa-exchange-alt'
                ], 20);
                analyticsIconRain('analytics-vehicle-hero', [
                    'fas fa-car',
                    'fas fa-gas-pump',
                    'fas fa-charging-station',
                    'fas fa-tachometer-alt',
                    'fas fa-plug'
                ], 20);
            });

            
            // ═══════════════════════════════════════════════════════════════
            // DEPRECIATION BAR CHARTS GENERATOR
            // ═══════════════════════════════════════════════════════════════
            
            function generateDepreciationCharts() {
                const straightLineData = [
                    { book: 100, dep: 9 },
                    { book: 91, dep: 9 },
                    { book: 82, dep: 9 },
                    { book: 73, dep: 9 },
                    { book: 64, dep: 9 },
                    { book: 55, dep: 9 },
                    { book: 46, dep: 9 },
                    { book: 37, dep: 9 },
                    { book: 28, dep: 9 },
                    { book: 19, dep: 9 }
                ];
                
                const wdvData = [
                    { book: 100, dep: 15 },
                    { book: 85, dep: 12.75 },
                    { book: 72.25, dep: 10.84 },
                    { book: 61.41, dep: 9.21 },
                    { book: 52.2, dep: 7.83 },
                    { book: 44.37, dep: 6.66 },
                    { book: 37.71, dep: 5.66 },
                    { book: 32.05, dep: 4.81 },
                    { book: 27.24, dep: 4.09 },
                    { book: 23.15, dep: 3.47 }
                ];
                
                function createChart(chartId, data) {
                    const chart = document.getElementById(chartId);
                    if (!chart) return;
                    
                    data.forEach((item, index) => {
                        const barPair = document.createElement('div');
                        barPair.className = 'bar-pair';
                        
                        const bookBar = document.createElement('div');
                        bookBar.className = 'bar bar-book';
                        bookBar.style.height = `${item.book}%`;
                        bookBar.style.animationDelay = `${index * 0.2}s`;
                        
                        const depBar = document.createElement('div');
                        depBar.className = 'bar bar-dep-orange';
                        depBar.style.height = `${item.dep}%`;
                        depBar.style.animationDelay = `${index * 0.2 + 0.1}s`;
                        
                        barPair.appendChild(bookBar);
                        barPair.appendChild(depBar);
                        chart.appendChild(barPair);
                    });
                }
                
                createChart('straight-line-chart', straightLineData);
                createChart('wdv-chart', wdvData);
            }
            
            document.addEventListener('DOMContentLoaded', generateDepreciationCharts);
        </script>
        <script>
            // ═══════════════════════════════════════════════════════════════
            // PROTECTION COSTS VISUALIZATION ENGINE
            // ═══════════════════════════════════════════════════════════════
            
            
            // Sample data generator
            function generateProtectionData() {
                const warrantyBase = 435000;
                const insuranceBase = 523000;
                const maintenanceBase = 287000;
                
                const warranty = warrantyBase + Math.floor(Math.random() * 50000 - 25000);
                const insurance = insuranceBase + Math.floor(Math.random() * 50000 - 25000);
                const maintenance = maintenanceBase + Math.floor(Math.random() * 50000 - 25000);
                const total = warranty + insurance + maintenance;
                
                return {
                    warranty: warranty,
                    insurance: insurance,
                    maintenance: maintenance,
                    total: total,
                    warrantyPercent: Math.round((warranty / total) * 100),
                    insurancePercent: Math.round((insurance / total) * 100),
                    maintenancePercent: Math.round((maintenance / total) * 100)
                };
            }
            
            
            // Format currency
            function formatCurrency(amount) {
                return '₹' + amount.toLocaleString('en-IN');
            }
            
            
            // Initialize Card 1: Consolidated Progress Bar
            function initConsolidatedView() {
                const container = document.getElementById('viz-protection-consolidated');
                const data = generateProtectionData();
                
                container.innerHTML = `
                    <div class="protection-progress-container">            
                        <div class="protection-progress-bar">
                            <div class="protection-progress-segment protection-segment-warranty" style="width: ${data.warrantyPercent}%">
                                ${data.warrantyPercent}%
                            </div>
                            <div class="protection-progress-segment protection-segment-insurance" style="width: ${data.insurancePercent}%">
                                ${data.insurancePercent}%
                            </div>
                            <div class="protection-progress-segment protection-segment-maintenance" style="width: ${data.maintenancePercent}%">
                                ${data.maintenancePercent}%
                            </div>
                        </div>
                        
                        <div class="protection-legend">
                            <div class="protection-legend-item">
                                <div class="protection-legend-color protection-segment-warranty"></div>
                                <span class="protection-legend-label">Extended Warranty</span>
                                <span class="protection-legend-amount">${formatCurrency(data.warranty)}</span>
                                <span class="protection-legend-percent">${data.warrantyPercent}%</span>
                            </div>
                            <div class="protection-legend-item">
                                <div class="protection-legend-color protection-segment-insurance"></div>
                                <span class="protection-legend-label">Insurance Policies</span>
                                <span class="protection-legend-amount">${formatCurrency(data.insurance)}</span>
                                <span class="protection-legend-percent">${data.insurancePercent}%</span>
                            </div>
                            <div class="protection-legend-item">
                                <div class="protection-legend-color protection-segment-maintenance"></div>
                                <span class="protection-legend-label">Maintenance Contracts</span>
                                <span class="protection-legend-amount">${formatCurrency(data.maintenance)}</span>
                                <span class="protection-legend-percent">${data.maintenancePercent}%</span>
                            </div>
                        </div>
                        
                        <div class="protection-progress-header">
                            <div class="protection-total-amount">${formatCurrency(data.total)}</div>
                            <div class="protection-total-label">Total Protection Costs</div>
                        </div>
                    </div>
                `;
            }
            
            
            // Initialize Card 2: Infinite Scroll
            const assetNames = {
                vehicle: ['Office Car', 'Ambulance', 'Service Van', 'Delivery Truck', 'Executive Sedan', 'Field Vehicle', 'Transport Van', 'Cargo Truck'],
                machinery: ['AC Compressor', 'Hydraulic Press', 'CNC Machine', 'Welding Unit', 'Generator Set', 'Air Dryer', 'Packaging Machine', 'Conveyor System'],
                tool: ['2-Post Lift', 'Laptop', 'Multimeter', 'Drill Press', 'Angle Grinder', 'Diagnostic Scanner', 'Power Tools Set', 'Testing Equipment']
            };
            
            
            function generateItem() {
                const types = ['vehicle', 'machinery', 'tool'];
                const type = types[Math.floor(Math.random() * types.length)];
                const names = assetNames[type];
                const name = names[Math.floor(Math.random() * names.length)];
                
                const prefixes = { vehicle: 'VEH', machinery: 'MCH', tool: 'TL' };
                const code = `${prefixes[type]}-${String(Math.floor(Math.random() * 900) + 100).padStart(3, '0')}`;
                
                const warranty = Math.floor(Math.random() * 30000) + 5000;
                const insurance = Math.floor(Math.random() * 30000) + 5000;
                const maintenance = Math.floor(Math.random() * 15000) + 3000;
                const total = warranty + insurance + maintenance;
                
                const wPct = Math.round((warranty / total) * 100);
                const iPct = Math.round((insurance / total) * 100);
                const mPct = 100 - wPct - iPct;
                
                return { type, code, name, warranty, insurance, maintenance, total, wPct, iPct, mPct };
            }
            
            
            function initProtectionIndividual() {
            const container = document.getElementById('viz-protection-individual');
            const wrapper = document.createElement('div');
            wrapper.className = 'protection-infinite-scroll';
            const track = document.createElement('div');
            track.className = 'protection-scroll-track';
            
            wrapper.appendChild(track);
            container.appendChild(wrapper);
            
            for (let i = 0; i < 10; i++) {
            track.appendChild(createItemRow(generateItem()));
            }
            
            let scrollPos = 0;
            function animate() {
            scrollPos += 0.5;
            const firstItem = track.firstElementChild;
            if (firstItem) {
            const itemHeight = firstItem.offsetHeight + 16;
            if (scrollPos >= itemHeight) {
                scrollPos = 0;
                track.appendChild(createItemRow(generateItem()));
                track.removeChild(firstItem);
            }
            }
            track.style.transform = `translateY(-${scrollPos}px)`;
            requestAnimationFrame(animate);
            }
            animate();  // ✅ Start immediately
            }
            
            
            function createItemRow(item) {
                const row = document.createElement('div');
                row.className = 'protection-item-row';
                row.innerHTML = `
                    <div class="protection-item-header">
                        <span class="protection-item-type protection-type-${item.type}">${item.type.toUpperCase()}</span>
                        <span class="protection-item-code">${item.code}</span>
                        <span class="protection-item-name">${item.name}</span>
                    </div>
                    <div class="protection-item-progress">
                        <div class="protection-progress-segment protection-segment-warranty" style="width: ${item.wPct}%"></div>
                        <div class="protection-progress-segment protection-segment-insurance" style="width: ${item.iPct}%"></div>
                        <div class="protection-progress-segment protection-segment-maintenance" style="width: ${item.mPct}%"></div>
                    </div>
                    <div class="protection-item-details">
                    <div><span>Extended Warranty:</span><span>${formatCurrency(item.warranty)}</span></div>
                    <div><span>Insurance Policy:</span><span>${formatCurrency(item.insurance)}</span></div>
                    <div><span>Maintenance Contract:</span><span>${formatCurrency(item.maintenance)}</span></div>
            
                    <div class="protection-item-total">
                        <span>Total:</span><strong>${formatCurrency(item.total)}</strong>
                    </div>
                    </div>
                `;
                return row;
            }
            
            
            // Universal Donut Grid Initializer (Cards 3 & 4)
            function initDonutGrids(containerId, gridClass, donutDataArray) {
                const container = document.getElementById(containerId);
                const grid = document.createElement('div');
                grid.className = `protection-donut-grid ${gridClass}`;
                
                donutDataArray.forEach(donutData => {
                    grid.appendChild(createDonutItem(
                        donutData.title,
                        donutData.breakdown,
                        ['#0066cc', '#10b981', '#f59e0b']
                    ));
                });
                
                container.appendChild(grid);
            }
            
            
            function createDonutItem(title, data, colors) {
                const item = document.createElement('div');
                item.className = 'protection-donut-item';
                
                const total = data.vehicle + data.machinery + data.tool;
                
                // ⚙️ ADJUSTABLE GAP SIZE - Change this value to adjust separator width
                const gapSizePerSide = 1; // 0.5° gap on each side = 1° total gap per segment
                
                let angle = 0;
                
                const segments = [
                    { pct: data.vehicle, color: colors[0], label: 'Vehicle' },
                    { pct: data.machinery, color: colors[1], label: 'Machinery' },
                    { pct: data.tool, color: colors[2], label: 'Tool' }
                ];
                
                // Build gradient with GRADIENTS and transparent gaps
                const gradientStops = segments.map((seg, index) => {
                    const segmentAngle = (seg.pct / total) * 360;
                    
                    // Add gap at start of segment
                    const start = angle + gapSizePerSide;
                    // Subtract gap at end of segment
                    const end = angle + segmentAngle - gapSizePerSide;
                    
                    // Calculate midpoint for gradient transition
                    const mid = (start + end) / 2;
                    
                    // Move to next segment's starting position
                    angle += segmentAngle;
                    
                    // GRADIENT COLORS - Match progress bar exactly
                    const gradients = {
                        0: { start: '#0066cc', end: '#4d94ff' },  // Blue gradient (Labor/Vehicle)
                        1: { start: '#10b981', end: '#34d399' },  // Green gradient (Parts/Machinery)
                        2: { start: '#f59e0b', end: '#fbbf24' }   // Orange gradient (Misc/Tool)
                    };
                    
                    const grad = gradients[index];
                    
                    // Create transparent gaps before colored section starts
                    if (index === 0) {
                        // First segment: start with gap, then gradient
                        return `transparent 0deg ${gapSizePerSide}deg, ${grad.start} ${start}deg, ${grad.end} ${mid}deg, ${grad.start} ${end}deg, transparent ${end}deg ${angle}deg`;
                    } else if (index === segments.length - 1) {
                        // Last segment: gradient, then gap to complete circle
                        return `transparent ${angle - segmentAngle}deg ${start}deg, ${grad.start} ${start}deg, ${grad.end} ${mid}deg, ${grad.start} ${end}deg, transparent ${end}deg 360deg`;
                    } else {
                        // Middle segments: gap, gradient, gap
                        return `transparent ${angle - segmentAngle}deg ${start}deg, ${grad.start} ${start}deg, ${grad.end} ${mid}deg, ${grad.start} ${end}deg, transparent ${end}deg ${angle}deg`;
                    }
                }).join(', ');
            
                item.innerHTML = `
                    <div class="protection-donut-title">${title}</div>
                        <div class="protection-donut-chart" style="background: conic-gradient(from 0deg, ${gradientStops})"></div>
                        <div class="protection-donut-legend">
                            <div class="protection-donut-legend-row">
                                <span class="protection-donut-dot" style="background: ${colors[0]}"></span>
                                <span>Vehicle: ${data.vehicle}%</span>
                            </div>
                            <div class="protection-donut-legend-row">
                                <span class="protection-donut-dot" style="background: ${colors[1]}"></span>
                                <span>Machinery: ${data.machinery}%</span>
                            </div>
                            <div class="protection-donut-legend-row">
                                <span class="protection-donut-dot" style="background: ${colors[2]}"></span>
                                <span>Tool: ${data.tool}%</span>
                            </div>
                        </div>
                    `;
                
                return item;
            }
            
            // Initialize all on page load
            document.addEventListener('DOMContentLoaded', function() {
                initConsolidatedView();
                initProtectionIndividual();
                
                // Card 3: 2x2 Grid (4 Donuts)
                initDonutGrids('viz-protection-class', 'grid-2x2', [
                    { title: 'Overall Mix', breakdown: { vehicle: 42, machinery: 35, tool: 23 } },
                    { title: 'Warranty Breakdown', breakdown: { vehicle: 38, machinery: 40, tool: 22 } },
                    { title: 'Insurance Breakdown', breakdown: { vehicle: 45, machinery: 32, tool: 23 } },
                    { title: 'Maintenance Breakdown', breakdown: { vehicle: 40, machinery: 35, tool: 25 } }
                ]);
                
                // Card 4: Triangle Grid (3 Donuts)
                initDonutGrids('viz-protection-breakdown', 'grid-triangle', [
                    { title: 'Extended Warranties', breakdown: { vehicle: 38, machinery: 40, tool: 22 } },
                    { title: 'Insurance Policies', breakdown: { vehicle: 45, machinery: 32, tool: 23 } },
                    { title: 'Maintenance Contracts', breakdown: { vehicle: 40, machinery: 35, tool: 25 } }
                ]);
            });
            
            /* ═══════════════════════════════════════════════════════════════
            OPERATIONAL EXPENSES VISUALIZATION ENGINE - REVISED
            ═══════════════════════════════════════════════════════════════ */
            
            // CARD 1: Total Expense Overview - Matches Protection Costs style
            function initOpexOverview() {
            const container = document.getElementById('viz-opex-overview');
            const data = generateOpexData();
            
            container.innerHTML = `
            <div class="opex-progress-container">
            <div class="opex-progress-bar">
                <div class="opex-segment opex-segment-labor" style="width: ${data.laborPct}%">${data.laborPct}%</div>
                <div class="opex-segment opex-segment-parts" style="width: ${data.partsPct}%">${data.partsPct}%</div>
                <div class="opex-segment opex-segment-misc" style="width: ${data.miscPct}%">${data.miscPct}%</div>
            </div>
            <div class="opex-legend">
                <div class="opex-legend-item">
                    <div class="opex-legend-color opex-segment-labor"></div>
                    <span class="opex-legend-label opex-labor"><i class="fas fa-wrench"></i> Labor Costs</span>
                    <span class="opex-legend-amount">${formatINR(data.labor)}</span>
                    <span class="opex-legend-percent">${data.laborPct}%</span>
                </div>
                <div class="opex-legend-item">
                    <div class="opex-legend-color opex-segment-parts"></div>
                    <span class="opex-legend-label opex-parts"><i class="fas fas fa-puzzle-piece"></i> Spare Parts & Materials</span>
                    <span class="opex-legend-amount">${formatINR(data.parts)}</span>
                    <span class="opex-legend-percent">${data.partsPct}%</span>
                </div>
                <div class="opex-legend-item">
                    <div class="opex-legend-color opex-segment-misc"></div>
                    <span class="opex-legend-label opex-misc"><i class="fas fa-file-fragment"></i> Miscellaneous</span>
                    <span class="opex-legend-amount">${formatINR(data.misc)}</span>
                    <span class="opex-legend-percent">${data.miscPct}%</span>
                </div>
            </div>
            
            <div class="opex-total-header">
                <div class="opex-total-amount">${formatINR(data.total)}</div>
                <div class="opex-total-label">Total Operational Expenses</div>
            </div>
            </div>
            `;
            }
            
            // CARD 2: Waterfall Recovery - Properly arranged
            function initOpexRecovery() {
            const container = document.getElementById('viz-opex-recovery');
            const gross = 135000;
            const warranty = 18000;
            const extWarranty = 7000;
            const insurance = 12000;
            const maintenance = 5000;
            const totalRecovery = warranty + extWarranty + insurance + maintenance;
            const net = gross - totalRecovery;
            const recoveryRate = Math.round((totalRecovery / gross) * 100);
            
            container.innerHTML = `
            <div class="opex-waterfall-flow">
            <!-- Stage 1: Gross Cost -->
            <div class="opex-flow-stage opex-stage-negative">
            <div class="opex-stage-label">
            <i class="fa-solid fa-money-bill-trend-up"></i>
            <span>Gross Operational Cost</span>
            </div>
            <div class="opex-stage-bar opex-bar-gross">
            <span>${formatINR(gross)}</span>
            </div>
            </div>
            
            <!-- Stage 2: Recoveries -->
            <div class="opex-flow-stage opex-stage-positive">
            <div class="opex-stage-label">
            <i class="fas fa-coins"></i>
            <span>Total Recoveries</span>
            </div>
            <div class="opex-stage-bar opex-bar-recovery">
            <span>${formatINR(totalRecovery)}</span>
            </div>
            
            <!-- Recovery Breakdown -->
            <div class="opex-recovery-breakdown">
            <div class="opex-recovery-item">
                <span><i class="fas fa-shield-alt"></i> Product Warranty</span>
                <strong>${formatINR(warranty)}</strong>
            </div>
            <div class="opex-recovery-item">
                <span><i class="bi bi-shield-fill-check"></i> Extended Warranty</span>
                <strong>${formatINR(extWarranty)}</strong>
            </div>
            <div class="opex-recovery-item">
                <span><i class="fas fa-file-contract"></i> Insurance Policy</span>
                <strong>${formatINR(insurance)}</strong>
            </div>
            <div class="opex-recovery-item">
                <span><i class="bi bi-file-earmark-text-fill"></i> Maintenance Contract</span>
                <strong>${formatINR(maintenance)}</strong>
            </div>
            </div>
            </div>
            
            <!-- Stage 3: Net Expense -->
            <div class="opex-flow-stage opex-stage-net">
            <div class="opex-stage-label">
            <i class="fas fa-money-bills"></i>
            <span>Net Operational Expense</span>
            </div>
            <div class="opex-stage-bar opex-bar-net">
            <span>${formatINR(net)}</span>
            </div>
            <div class="opex-recovery-rate">
            <i class="fas fa-percent"></i> Recovery Rate: <strong>${recoveryRate}%</strong>
            <span class="opex-offset">(${formatINR(totalRecovery)} offset)</span>
            </div>
            </div>
            </div>
            `;
            }
            
            // CARD 3: Trend Line Graph with points and animations
            function initOpexTrends() {
            const container = document.getElementById('viz-opex-trends');
            
            const months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
            const totalData = [95000, 102000, 108000, 98000, 115000, 122000, 118000, 125000, 132000, 128000, 135000, 140000];
            const laborData = [32000, 35000, 38000, 34000, 40000, 42000, 41000, 43000, 45000, 44000, 45000, 47000];
            const partsData = [50000, 53000, 56000, 51000, 60000, 65000, 62000, 67000, 71000, 68000, 73000, 78000];
            const miscData = [13000, 14000, 14000, 13000, 15000, 15000, 15000, 15000, 16000, 16000, 17000, 15000];
            
            const maxValue = 160000;
            const chartHeight = 280;
            const chartWidth = 550;
            const padding = { top: 20, right: 20, bottom: 40, left: 60 };
            const plotHeight = chartHeight - padding.top - padding.bottom;
            const plotWidth = chartWidth - padding.left - padding.right;
            
            function buildPathWithPoints(data, color) {
            const xStep = plotWidth / (data.length - 1);
            const points = data.map((val, i) => {
            const x = padding.left + (i * xStep);
            const y = padding.top + (plotHeight - (val / maxValue) * plotHeight);
            return { x, y, value: val };
            });
            
            const path = points.map((p, i) => 
            `${i === 0 ? 'M' : 'L'} ${p.x} ${p.y}`
            ).join(' ');
            
            const circles = points.map(p => 
            `<circle cx="${p.x}" cy="${p.y}" class="opex-trend-point" stroke="${color}" />`
            ).join('');
            
            return { path, circles };
            }
            
            const totalPath = buildPathWithPoints(totalData, '#0066cc');
            const laborPath = buildPathWithPoints(laborData, '#f59e0b');
            const partsPath = buildPathWithPoints(partsData, '#10b981');
            const miscPath = buildPathWithPoints(miscData, '#facc15');
            
            // Y-axis labels
            const yLabels = [0, 40000, 80000, 120000, 160000].map((val, i) => {
            const y = padding.top + plotHeight - (i * plotHeight / 4);
            return `<text x="${padding.left - 10}" y="${y}" text-anchor="end" class="opex-axis-label">₹${(val/1000)}k</text>`;
            }).join('');
            
            // X-axis labels
            const xLabels = months.map((month, i) => {
            const x = padding.left + (i * plotWidth / (months.length - 1));
            const y = chartHeight - padding.bottom + 20;
            return `<text x="${x}" y="${y}" text-anchor="middle" class="opex-axis-label">${month}</text>`;
            }).join('');
            
            container.innerHTML = `
            <div class="opex-trend-chart">
            <div class="opex-trend-canvas">
                <svg class="opex-trend-svg" viewBox="0 0 ${chartWidth} ${chartHeight}">
                    <!-- Grid Lines -->
                    ${[0, 0.25, 0.5, 0.75, 1].map(pct => 
                        `<line x1="${padding.left}" y1="${padding.top + plotHeight * pct}" 
                               x2="${chartWidth - padding.right}" y2="${padding.top + plotHeight * pct}" 
                               stroke="rgba(0,0,0,0.08)" stroke-width="1"/>`
                    ).join('')}
                    
                    <!-- Axes -->
                    <line x1="${padding.left}" y1="${padding.top}" 
                          x2="${padding.left}" y2="${chartHeight - padding.bottom}" 
                          stroke="#333" stroke-width="2"/>
                    <line x1="${padding.left}" y1="${chartHeight - padding.bottom}" 
                          x2="${chartWidth - padding.right}" y2="${chartHeight - padding.bottom}" 
                          stroke="#333" stroke-width="2"/>
                    
                    <!-- Y-axis labels -->
                    ${yLabels}
                    
                    <!-- X-axis labels -->
                    ${xLabels}
                    
                    <!-- Lines -->
                    <path d="${miscPath.path}" stroke="#facc15" stroke-width="2" fill="none"/>
                    <path d="${partsPath.path}" stroke="#10b981" stroke-width="2" fill="none"/>
                    <path d="${laborPath.path}" stroke="#f59e0b" stroke-width="2" fill="none"/>
                    <path d="${totalPath.path}" stroke="#0066cc" stroke-width="3" fill="none"/>
                    
                    <!-- Points -->
                    ${miscPath.circles}
                    ${partsPath.circles}
                    ${laborPath.circles}
                    ${totalPath.circles}
                </svg>
            </div>
            
            <div class="opex-trend-legend">
                <div class="opex-trend-legend-item">
                    <div class="opex-trend-line-icon opex-line-total"></div>
                    <span>Total Cost</span>
                </div>
                <div class="opex-trend-legend-item">
                    <div class="opex-trend-line-icon opex-line-labor"></div>
                    <span>Labor</span>
                </div>
                <div class="opex-trend-legend-item">
                    <div class="opex-trend-line-icon opex-line-parts"></div>
                    <span>Spares & Materials</span>
                </div>
                <div class="opex-trend-legend-item">
                    <div class="opex-trend-line-icon opex-line-misc"></div>
                    <span>Miscellaneous</span>
                </div>
            </div>
            </div>
            `;
            }
            
            // CARD 4: Infinite Scroll - Clean 3-line layout
            function createOpexAssetCard(asset) {
            const card = document.createElement('div');
            card.className = 'opex-asset-card';
            card.innerHTML = `
            <div class="opex-asset-header">
            <span class="opex-asset-type opex-type-${asset.type}">${asset.type.toUpperCase()}</span>
            <span class="opex-asset-code">${asset.code}</span>
            <span class="opex-asset-name">${asset.name}</span>
            </div>
            <div class="opex-asset-progress">
            <div class="opex-segment opex-segment-labor" style="width: ${asset.lPct}%">
                ${asset.lPct > 10 ? asset.lPct + '%' : ''}
            </div>
            <div class="opex-segment opex-segment-parts" style="width: ${asset.pPct}%">
                ${asset.pPct > 10 ? asset.pPct + '%' : ''}
            </div>
            <div class="opex-segment opex-segment-misc" style="width: ${asset.mPct}%">
                ${asset.mPct > 10 ? asset.mPct + '%' : ''}
            </div>
            </div>
            <div class="opex-asset-details">
            <div class="opex-asset-detail-line">
                <span class="opex-detail-labor">Labor Cost:</span>
                <strong class="opex-detail-labor">${formatINR(asset.labor)}</strong>
            </div>
            <div class="opex-asset-detail-line">
                <span class="opex-detail-parts">Spare Parts & Materials Cost:</span>
                <strong class="opex-detail-parts">${formatINR(asset.parts)}</strong>
            </div>
            <div class="opex-asset-detail-line">
                <span class="opex-detail-misc">Miscellaneous Cost:</span>
                <strong class="opex-detail-misc">${formatINR(asset.misc)}</strong>
            </div>
            <div class="opex-asset-total">
                <span>Total Operational Cost:</span>
                <strong>${formatINR(asset.total)}</strong>
            </div>
            </div>
            `;
            return card;
            }
            
            function initOpexAssets() {
            const container = document.getElementById('viz-opex-assets');
            const wrapper = document.createElement('div');
            wrapper.className = 'opex-infinite-scroll';
            const track = document.createElement('div');
            track.className = 'opex-scroll-track';
            
            wrapper.appendChild(track);
            container.appendChild(wrapper);
            
            for (let i = 0; i < 10; i++) {
            track.appendChild(createOpexAssetCard(generateOpexAsset()));
            }
            
            let scrollPos = 0;
            function animate() {
            scrollPos += 0.5;
            const firstItem = track.firstElementChild;
            if (firstItem) {
            const itemHeight = firstItem.offsetHeight + 16;
            if (scrollPos >= itemHeight) {
                scrollPos = 0;
                track.appendChild(createOpexAssetCard(generateOpexAsset()));
                track.removeChild(firstItem);
            }
            }
            track.style.transform = `translateY(-${scrollPos}px)`;
            requestAnimationFrame(animate);
            }
            animate();
            }
            
            // Helper functions (keep these same)
            function generateOpexData() {
            const labor = 45000 + Math.floor(Math.random() * 10000 - 5000);
            const parts = 78000 + Math.floor(Math.random() * 15000 - 7500);
            const misc = 12000 + Math.floor(Math.random() * 3000 - 1500);
            const total = labor + parts + misc;
            return {
            labor, parts, misc, total,
            laborPct: Math.round((labor / total) * 100),
            partsPct: Math.round((parts / total) * 100),
            miscPct: Math.round((misc / total) * 100)
            };
            }
            
            function generateOpexAsset() {
            const types = ['vehicle', 'machinery', 'tool'];
            const names = {
            vehicle: ['Office Car', 'Ambulance', 'Service Van', 'Delivery Truck', 'Executive Sedan'],
            machinery: ['AC Compressor', 'Hydraulic Press', 'CNC Machine', 'Generator Set', 'Air Dryer'],
            tool: ['2-Post Lift', 'Laptop', 'Multimeter', 'Drill Press', 'Angle Grinder']
            };
            const type = types[Math.floor(Math.random() * types.length)];
            const name = names[type][Math.floor(Math.random() * names[type].length)];
            const prefixes = { vehicle: 'VEH', machinery: 'MCH', tool: 'TL' };
            const code = `${prefixes[type]}-${String(Math.floor(Math.random() * 900 + 100)).padStart(3, '0')}`;
            
            const total = Math.floor(Math.random() * 30000 + 20000);
            const miscPct = 0.10 + Math.random() * 0.05;
            const misc = Math.floor(total * miscPct);
            const remaining = total - misc;
            const laborPct = 0.15 + Math.random() * 0.60;
            const labor = Math.floor(remaining * laborPct);
            
            // Parts gets whatever's left
            const parts = remaining - labor;
            
            
            
            const lPct = Math.round((labor / total) * 100);
            const pPct = Math.round((parts / total) * 100);
            const mPct = 100 - lPct - pPct;
            
            return { type, code, name, labor, parts, misc, total, lPct, pPct, mPct };
            }
            
            function formatINR(amount) {
            return '₹' + amount.toLocaleString('en-IN');
            }
            
            // Initialize
            document.addEventListener('DOMContentLoaded', function() {
            initOpexOverview();
            initOpexRecovery();
            initOpexTrends();
            initOpexAssets();
            });
            
            /* ═══════════════════════════════════════════════════════════════
            DISPOSAL INTELLIGENCE VISUALIZATION ENGINE
            ═══════════════════════════════════════════════════════════════ */
            
            // CARD 1: Disposal Methods Donut Chart (Updated with 6 categories)
            function initDisposalMethods() {
            const container = document.getElementById('viz-disposal-methods');
            const data = {
            lost: 12,
            eol: 35,
            sold: 22,
            trashed: 15,
            mishandled: 8,
            replaced: 10
            };
            const total = Object.values(data).reduce((a, b) => a + b, 0);
            
            const percentages = {};
            let cumulative = 0;
            const colors = {
            lost: '#ef4444',
            eol: '#f59e0b',
            sold: '#10b981',
            trashed: '#6b7280',
            mishandled: '#8b5cf6',
            replaced: '#0066cc'
            };
            
            let gradientStr = 'from 0deg';
            Object.keys(data).forEach((key, index) => {
            percentages[key] = Math.round((data[key] / total) * 100);
            const start = cumulative;
            cumulative += percentages[key];
            gradientStr += `, ${colors[key]} ${start}% ${cumulative}%`;
            });
            
            container.innerHTML = `
            <div class="disposal-donut-container">
            <div class="disposal-donut-chart" style="background: conic-gradient(${gradientStr})">
                <div style="width: 160px; height: 160px; background: white; border-radius: 50%; display: flex; align-items: center; justify-content: center;">
                    <div class="disposal-donut-center">
                        <div class="disposal-donut-count">${total}</div>
                        <div class="disposal-donut-label">Assets Disposed</div>
                    </div>
                </div>
            </div>
            
            <div class="disposal-legend">
                <div class="disposal-legend-item">
                    <div class="disposal-legend-icon disposal-icon-lost">
                        <i class="fas fa-exclamation-triangle"></i>
                    </div>
                    <div class="disposal-legend-info">
                        <div class="disposal-legend-name">Permanently Lost</div>
                        <div class="disposal-legend-value">${data.lost}<span class="disposal-legend-percent">${percentages.lost}%</span></div>
                    </div>
                </div>
                
                <div class="disposal-legend-item">
                    <div class="disposal-legend-icon disposal-icon-eol">
                        <i class="fas fa-clock"></i>
                    </div>
                    <div class="disposal-legend-info">
                        <div class="disposal-legend-name">End of Life</div>
                        <div class="disposal-legend-value">${data.eol}<span class="disposal-legend-percent">${percentages.eol}%</span></div>
                    </div>
                </div>
                
                <div class="disposal-legend-item">
                    <div class="disposal-legend-icon disposal-icon-sold">
                        <i class="fa-solid fa-file-invoice"></i>
                    </div>
                    <div class="disposal-legend-info">
                        <div class="disposal-legend-name">Sold</div>
                        <div class="disposal-legend-value">${data.sold}<span class="disposal-legend-percent">${percentages.sold}%</span></div>
                    </div>
                </div>
                
                <div class="disposal-legend-item">
                    <div class="disposal-legend-icon disposal-icon-trashed">
                        <i class="fas fa-trash-alt"></i>
                    </div>
                    <div class="disposal-legend-info">
                        <div class="disposal-legend-name">Trashed/Discarded</div>
                        <div class="disposal-legend-value">${data.trashed}<span class="disposal-legend-percent">${percentages.trashed}%</span></div>
                    </div>
                </div>
                
                <div class="disposal-legend-item">
                    <div class="disposal-legend-icon disposal-icon-mishandled">
                        <i class="fas fa-user-times"></i>
                    </div>
                    <div class="disposal-legend-info">
                        <div class="disposal-legend-name">Mishandled</div>
                        <div class="disposal-legend-value">${data.mishandled}<span class="disposal-legend-percent">${percentages.mishandled}%</span></div>
                    </div>
                </div>
                
                <div class="disposal-legend-item">
                    <div class="disposal-legend-icon disposal-icon-replaced">
                        <i class="fa-solid fa-arrow-right-arrow-left"></i>
                    </div>
                    <div class="disposal-legend-info">
                        <div class="disposal-legend-name">Replaced</div>
                        <div class="disposal-legend-value">${data.replaced}<span class="disposal-legend-percent">${percentages.replaced}%</span></div>
                    </div>
                </div>
            </div>
            </div>
            `;
            }
            
            // CARD 2: Value Recovery Waterfall - 2 Column Grid
            function initDisposalRecovery() {
            const container = document.getElementById('viz-disposal-recovery');
            const purchase = 850000;
            const depreciation = 420000;
            const book = purchase - depreciation;
            const recovered = 315000;
            const netLoss = book - recovered;
            const recoveryPct = Math.round((recovered / book) * 100);
            
            const maxValue = purchase;
            
            function createBar(label, value, colorClass, valueClass, icon) {
            const pct = (value / maxValue) * 100;
            const showOutside = pct < 25;
            
            return `
            <div class="disposal-waterfall-item">
                <div class="disposal-waterfall-label">
                    <i class="${icon}"></i> ${label}
                </div>
                <div class="disposal-waterfall-bar-container">
                    <div class="disposal-waterfall-bar disposal-bar-${colorClass}" style="width: ${pct}%">
                        ${!showOutside ? formatINR(value) : ''}
                    </div>
                    ${showOutside ? `<div class="disposal-waterfall-value disposal-value-${valueClass}">${formatINR(value)}</div>` : ''}
                </div>
            </div>
            `;
            }
            
            container.innerHTML = `
            <div class="disposal-waterfall-grid">
            ${createBar('Original Purchase Value', purchase, 'purchase', 'purchase', 'fas fa-shopping-cart')}
            ${createBar('Accumulated Depreciation', depreciation, 'depreciation', 'depreciation', 'fas fa-arrow-down')}
            ${createBar('Book Value at Disposal', book, 'book', 'book', 'fas fa-book')}
            ${createBar('Recovered Amount', recovered, 'recovery', 'recovery', 'fas fa-plus-circle')}
            
            <div class="disposal-waterfall-item center-last">
                <div class="disposal-waterfall-label">
                    <i class="fas fa-equals"></i> Net Loss on Disposal
                </div>
                <div class="disposal-waterfall-bar-container">
                    <div class="disposal-waterfall-bar disposal-bar-loss" style="width: ${(netLoss/maxValue)*100}%">
                        ${formatINR(netLoss)}
                    </div>
                </div>
            </div>
            
            <div class="disposal-recovery-rate">
                <i class="fas fa-chart-pie"></i> Recovery Rate: ${recoveryPct}% of Book Value
            </div>
            </div>
            `;
            }
            
            // CARD 3: Category Retention Comparison
            function initDisposalRetention() {
            const container = document.getElementById('viz-disposal-retention');
            const categories = [
            { name: 'Vehicles', retention: 72, type: 'good' },
            { name: 'Machinery', retention: 58, type: 'moderate' },
            { name: 'IT Equipment', retention: 45, type: 'moderate' },
            { name: 'Office Furniture', retention: 28, type: 'poor' },
            { name: 'Tools & Equipment', retention: 15, type: 'poor' }
            ];
            
            const html = categories.map(cat => `
            <div class="disposal-retention-row">
            <div class="disposal-retention-label">
                <span>${cat.name}</span>
                <span style="color: var(--scorp-primary); font-weight: 700;">${cat.retention}% Retained</span>
            </div>
            <div class="disposal-retention-bar-wrapper">
                <div class="disposal-retention-bar disposal-retention-${cat.type}" style="width: ${cat.retention}%">
                    ${cat.retention}%
                </div>
            </div>
            </div>
            `).join('');
            
            container.innerHTML = `<div class="disposal-retention-container">${html}</div>`;
            }
            
            // CARD 4: Disposal Timeline Infinite Scroll
            function createDisposalCard(asset) {
            const card = document.createElement('div');
            card.className = 'disposal-asset-card';
            
            const profit = asset.recovered - (asset.isMaterial ? 0 : asset.book);
            const isProfit = profit > 0;
            const showProfit = asset.recovered > 0;
            
            // Format datetime
            const dateObj = new Date(asset.dateTime);
            const dateStr = dateObj.toLocaleDateString('en-IN', { day: '2-digit', month: 'short', year: 'numeric' });
            const timeStr = dateObj.toLocaleTimeString('en-IN', { hour: '2-digit', minute: '2-digit', hour12: true });
            
            card.innerHTML = `
            <div class="disposal-asset-header">
            <div class="disposal-method-badge disposal-badge-${asset.method}">
                <i class="${asset.icon}"></i> ${asset.methodName}
            </div>
            <div class="disposal-asset-info">
                <div class="disposal-asset-code">${asset.code}</div>
                <div class="disposal-asset-name">${asset.type}</div>
            </div>
            <div class="disposal-asset-datetime">
                <div>${dateStr}</div>
                <div>${timeStr}</div>
            </div>
            </div>
            
            <div class="disposal-financial-flow">
            <div class="disposal-flow-item disposal-flow-purchase">
                <div class="disposal-flow-label">Purchase</div>
                <div class="disposal-flow-value">${formatINR(asset.purchase)}</div>
            </div>
            ${!asset.isMaterial ? `
                <div class="disposal-flow-item disposal-flow-book">
                    <div class="disposal-flow-label">Book Value</div>
                    <div class="disposal-flow-value">${formatINR(asset.book)}</div>
                </div>
            ` : `
                <div class="disposal-flow-item disposal-flow-quantity">
                    <div class="disposal-flow-label">Quantity</div>
                    <div class="disposal-flow-value">${asset.quantity} ${asset.unit}</div>
                </div>
            `}
            <div class="disposal-flow-item disposal-flow-recovered">
                <div class="disposal-flow-label">Recovered</div>
                <div class="disposal-flow-value">${asset.recovered > 0 ? formatINR(asset.recovered) : '-'}</div>
            </div>
            </div>
            
            ${showProfit ? `
            <div class="disposal-outcome disposal-outcome-${isProfit ? 'profit' : 'loss'}">
                <span>${isProfit ? 'Profit' : 'Loss'}: ${formatINR(Math.abs(profit))}</span>
                <i class="fas fa-${isProfit ? 'arrow-up' : 'arrow-down'} disposal-outcome-icon"></i>
            </div>
            ` : ''}
            `;
            return card;
            }
            
            function generateDisposalAsset() {
            const isMaterial = Math.random() > 0.6;
            
            // Asset methods
            const assetMethods = [
            { key: 'lost', name: 'LOST', icon: 'fas fa-exclamation-triangle', canRecover: false },
            { key: 'eol', name: 'EOL', icon: 'fas fa-clock', canRecover: false },
            { key: 'sold', name: 'SOLD', icon: 'fa-solid fa-file-invoice', canRecover: true },
            { key: 'trashed', name: 'TRASHED', icon: 'fas fa-trash-alt', canRecover: false }
            ];
            
            // Material methods (expired can be replaced/trashed)
            const materialMethods = [
            { key: 'mishandled', name: 'MISHANDLED', icon: 'fas fa-user-times', canRecover: false },
            { key: 'replaced', name: 'REPLACED', icon: 'fa-solid fa-arrow-right-arrow-left', canRecover: false },
            { key: 'trashed', name: 'TRASHED', icon: 'fas fa-trash-alt', canRecover: false }
            ];
            
            const method = isMaterial ? 
            materialMethods[Math.floor(Math.random() * materialMethods.length)] :
            assetMethods[Math.floor(Math.random() * assetMethods.length)];
            
            // Asset types and codes
            const assetTypes = ['Vehicle', 'Machinery', 'Equipment', 'Furniture', 'Tool'];
            const materialTypes = ['Hydraulic Fluid', 'Coolant', 'Lubricant', 'Solvent', 'Paint'];
            const units = ['L', 'Kg', 'Units', 'N'];
            
            const type = isMaterial ? 
            materialTypes[Math.floor(Math.random() * materialTypes.length)] :
            assetTypes[Math.floor(Math.random() * assetTypes.length)];
            
            const code = isMaterial ? 
            `MAT-${Math.floor(Math.random() * 9000 + 1000)}` :
            `AST-${Math.floor(Math.random() * 9000 + 1000)}`;
            
            const purchase = Math.floor(Math.random() * 400000 + 100000);
            const book = isMaterial ? 0 : Math.floor(purchase * (0.3 + Math.random() * 0.4));
            
            // Only SOLD can have recovery
            const recovered = method.canRecover ? Math.floor(book * (0.6 + Math.random() * 0.4)) : 0;
            
            const quantity = isMaterial ? Math.floor(Math.random() * 900 + 100) : 0;
            const unit = isMaterial ? units[Math.floor(Math.random() * units.length)] : '';
            
            const dateTime = Date.now() - Math.random() * 30 * 24 * 60 * 60 * 1000;
            
            return {
            code,
            type,
            method: method.key,
            methodName: method.name,
            icon: method.icon,
            purchase,
            book,
            recovered,
            dateTime,
            isMaterial,
            quantity,
            unit
            };
            }
            
            function initDisposalTimeline() {
            const container = document.getElementById('viz-disposal-timeline');
            const wrapper = document.createElement('div');
            wrapper.className = 'disposal-timeline';
            const track = document.createElement('div');
            track.className = 'disposal-scroll-track';
            
            wrapper.appendChild(track);
            container.appendChild(wrapper);
            
            for (let i = 0; i < 8; i++) {
            track.appendChild(createDisposalCard(generateDisposalAsset()));
            }
            
            let scrollPos = 0;
            function animate() {
            scrollPos += 0.4;
            const firstItem = track.firstElementChild;
            if (firstItem) {
            const itemHeight = firstItem.offsetHeight + 16;
            if (scrollPos >= itemHeight) {
                scrollPos = 0;
                track.appendChild(createDisposalCard(generateDisposalAsset()));
                track.removeChild(firstItem);
            }
            }
            track.style.transform = `translateY(-${scrollPos}px)`;
            requestAnimationFrame(animate);
            }
            animate();
            }
            
            // Initialize all disposal visualizations
            document.addEventListener('DOMContentLoaded', function() {
            initDisposalMethods();
            initDisposalRecovery();
            initDisposalRetention();
            initDisposalTimeline();
            });
            
            /* ═══════════════════════════════════════════════════════════════
            PURCHASE COST TRACKING VISUALIZATION ENGINE
            ═══════════════════════════════════════════════════════════════ */
            
            // CARD 1: Purchase Concentration Heatmap
            function initPurchaseConcentration() {
            const container = document.getElementById('viz-purchase-concentration');
            const data = [
            { category: 'Vehicles', value: 2850000, count: 12, level: 5 },
            { category: 'Machinery', value: 1950000, count: 8, level: 4 },
            { category: 'Tools', value: 850000, count: 45, level: 3 },
            { category: 'IT Equipment', value: 1200000, count: 28, level: 4 },
            { category: 'Furniture', value: 450000, count: 62, level: 2 },
            { category: 'Materials', value: 680000, count: 152, level: 3 }
            ];
            
            const html = data.map(item => `
            <div class="purchase-heatmap-cell purchase-heat-level-${item.level}">
            <div class="purchase-heatmap-label">${item.category}</div>
            <div class="purchase-heatmap-value">${formatINR(item.value)}</div>
            <div class="purchase-heatmap-count">${item.count} items</div>
            </div>
            `).join('');
            
            container.innerHTML = `<div class="purchase-heatmap-container">${html}</div>`;
            }
            
            // CARD 2: Purchase Recovery Gauge
            // ═══════════════════════════════════════════════════════════════════
            // PRICE BENCHMARK - REDESIGNED FROM SCRATCH
            // ═══════════════════════════════════════════════════════════════════
            
            function initPurchaseBenchmark() {
            const container = document.getElementById('viz-purchase-benchmark');
            
            // Create wrapper and track - EXACT PATTERN AS OTHER WORKING SCROLLS
            const wrapper = document.createElement('div');
            wrapper.className = 'benchmark-container';
            
            const track = document.createElement('div');
            track.className = 'benchmark-scroll-track';
            
            wrapper.appendChild(track);
            container.appendChild(wrapper);
            
            const templates = [
            { name: "Hydraulic Jack - PowerLift 5T", code: "TL-661", category: "TOOL", min: 6500, max: 10000 },
            { name: "AC Compressor - CoolFlow Pro", code: "MC-201", category: "MACHINERY", min: 35000, max: 55000 },
            { name: "Forklift - HeavyLift 2000", code: "VH-435", category: "VEHICLE", min: 170000, max: 290000 },
            { name: "Drill Machine - TurboMax 1500W", code: "TL-305", category: "TOOL", min: 3500, max: 5000 },
            { name: "Generator Set - PowerMax 15KVA", code: "MC-189", category: "MACHINERY", min: 110000, max: 150000 },
            { name: "Service Van - MobileTech 3500", code: "VH-822", category: "VEHICLE", min: 520000, max: 630000 },
            { name: "Welding Machine - ArcPro 250", code: "TL-508", category: "TOOL", min: 12000, max: 18000 },
            { name: "Industrial Lathe - PrecisionMax", code: "MC-412", category: "MACHINERY", min: 85000, max: 125000 }
            ];
            
            function generateAssetData() {
            const template = templates[Math.floor(Math.random() * templates.length)];
            const minPrice = template.min + Math.floor(Math.random() * (template.max - template.min) * 0.15);
            const maxPrice = template.max - Math.floor(Math.random() * (template.max - template.min) * 0.15);
            const avgPrice = Math.floor((minPrice + maxPrice) / 2);
            
            const orderCount = 4 + Math.floor(Math.random() * 5);
            const orders = [];
            const usedMonths = new Set();
            let totalUnits = 0;
            
            for (let i = 0; i < orderCount; i++) {
            let month;
            do { month = Math.floor(Math.random() * 12); } while (usedMonths.has(month));
            usedMonths.add(month);
            
            const price = minPrice + Math.random() * (maxPrice - minPrice);
            const units = 5 + Math.floor(Math.random() * 85);
            totalUnits += units;
            
            orders.push({ month, price: Math.round(price), units });
            }
            
            return {
            ...template,
            minPrice, maxPrice, avgPrice,
            orderCount, totalUnits,
            orders: orders.sort((a, b) => a.month - b.month)
            };
            }
            
            function formatINR(val) {
            return '₹' + val.toLocaleString('en-IN');
            }
            
            function classifyPrice(price, min, avg, max) {
            if (Math.abs(price - min) < min * 0.08) return 'low';
            if (Math.abs(price - max) < max * 0.08) return 'high';
            return 'mid';
            }
            
            function calcRadius(units) {
            return Math.min(7 + Math.log10(units + 1) * 1.5, 12);
            }
            
            function createChart(data) {
            const w = 600, h = 260;
            const m = { top: 18, right: 12, bottom: 32, left: 48 };
            const cw = w - m.left - m.right;
            const ch = h - m.top - m.bottom;
            
            const { minPrice, maxPrice, avgPrice, orders } = data;
            const priceRange = maxPrice - minPrice;
            
            const xPos = (month) => m.left + (month / 11) * cw;
            const yPos = (price) => m.top + ch - ((price - minPrice) / priceRange * ch);
            
            const months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
            
            let svg = `<svg class="benchmark-chart-svg" viewBox="0 0 ${w} ${h}">`;
            
            for (let i = 0; i <= 5; i++) {
            const y = m.top + (i * ch / 5);
            svg += `<line class="benchmark-grid" x1="${m.left}" y1="${y}" x2="${w - m.right}" y2="${y}" />`;
            }
            
            svg += `<line class="benchmark-axis" x1="${m.left}" y1="${m.top}" x2="${m.left}" y2="${h - m.bottom}" />`;
            svg += `<line class="benchmark-axis" x1="${m.left}" y1="${h - m.bottom}" x2="${w - m.right}" y2="${h - m.bottom}" />`;
            
            const avgY = yPos(avgPrice);
            svg += `<line class="benchmark-avg-line" x1="${m.left}" y1="${avgY}" x2="${w - m.right}" y2="${avgY}" />`;
            
            [minPrice, avgPrice, maxPrice].forEach(price => {
            const y = yPos(price);
            svg += `<text class="benchmark-label benchmark-label-y" x="${m.left - 8}" y="${y + 4}">${formatINR(price)}</text>`;
            });
            
            months.forEach((month, i) => {
            const x = xPos(i);
            svg += `<text class="benchmark-label benchmark-label-x" x="${x}" y="${h - 10}">${month}</text>`;
            });
            
            orders.forEach(order => {
            const x = xPos(order.month);
            const y = yPos(order.price);
            const r = calcRadius(order.units);
            const type = classifyPrice(order.price, minPrice, avgPrice, maxPrice);
            
            svg += `<circle class="benchmark-point benchmark-point-${type}" cx="${x}" cy="${y}" r="${r}" />`;
            svg += `<text class="benchmark-units benchmark-units-${type}" x="${x}" y="${y}">${order.units}</text>`;
            });
            
            svg += '</svg>';
            return svg;
            }
            
            function createCard(data) {
            const card = document.createElement('div');
            card.className = 'benchmark-price-card';
            
            const badgeClass = `benchmark-badge-${data.category.toLowerCase()}`;
            
            card.innerHTML = `
            <div class="benchmark-header">
                <div class="benchmark-identity">
                    <span class="benchmark-badge ${badgeClass}">${data.category}</span>
                    <div class="benchmark-name">${data.name}</div>
                    <div class="benchmark-code">${data.code}</div>
                </div>
                <div class="benchmark-meta">
                    <div>${data.totalUnits} units</div>
                    <div>${data.orderCount} orders • 2025</div>
                </div>
            </div>
            
            <div class="benchmark-chart-area">
                ${createChart(data)}
            </div>
            
            <div class="benchmark-stats">
                <div class="benchmark-stat benchmark-stat-low">
                    <div class="benchmark-stat-label">MINIMUM</div>
                    <div class="benchmark-stat-value benchmark-stat-value-low">${formatINR(data.minPrice)}</div>
                </div>
                <div class="benchmark-stat benchmark-stat-mid">
                    <div class="benchmark-stat-label">AVERAGE</div>
                    <div class="benchmark-stat-value benchmark-stat-value-mid">${formatINR(data.avgPrice)}</div>
                </div>
                <div class="benchmark-stat benchmark-stat-high">
                    <div class="benchmark-stat-label">MAXIMUM</div>
                    <div class="benchmark-stat-value benchmark-stat-value-high">${formatINR(data.maxPrice)}</div>
                </div>
            </div>
            `;
            
            return card;
            }
            
            for (let i = 0; i < 6; i++) {
            track.appendChild(createCard(generateAssetData()));
            }
            
            let scrollPos = 0;
            const scrollSpeed = 0.5;
            
            function animate() {
            scrollPos += scrollSpeed;
            
            const firstCard = track.firstElementChild;
            if (firstCard) {
            const cardHeight = firstCard.offsetHeight + 16;
            
            if (scrollPos >= cardHeight) {
                scrollPos = 0;
                track.appendChild(createCard(generateAssetData()));
                track.removeChild(firstCard);
            }
            }
            
            track.style.transform = `translateY(-${scrollPos}px)`;
            requestAnimationFrame(animate);
            }
            
            setTimeout(() => animate(), 500);
            }
            
            
            // CARD 3: Purchase Timeline
            function initPurchaseTimeline() {
            const container = document.getElementById('viz-purchase-timeline');
            const months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
            const totalSpend = 7980000;
            const totalItems = 307;
            const peakMonth = 'March';
            
            container.innerHTML = `
            <div class="purchase-timeline-container">
            <div class="purchase-timeline-chart">
                <svg width="100%" height="100%" viewBox="0 0 800 200" preserveAspectRatio="none">
                    <defs>
                        <linearGradient id="purchaseGradient" x1="0%" y1="0%" x2="0%" y2="100%">
                            <stop offset="0%" style="stop-color:#0066cc;stop-opacity:0.4" />
                            <stop offset="100%" style="stop-color:#0066cc;stop-opacity:0.05" />
                        </linearGradient>
                    </defs>
                    <path d="M 0,150 L 67,120 L 133,80 L 200,90 L 267,110 L 333,130 L 400,100 L 467,115 L 533,125 L 600,105 L 667,140 L 733,145 L 800,135 L 800,200 L 0,200 Z" 
                        fill="url(#purchaseGradient)" stroke="none" />
                    <path d="M 0,150 L 67,120 L 133,80 L 200,90 L 267,110 L 333,130 L 400,100 L 467,115 L 533,125 L 600,105 L 667,140 L 733,145 L 800,135" 
                        fill="none" stroke="#0066cc" stroke-width="3" />
                </svg>
            </div>
            <div class="purchase-timeline-axis">
                ${months.map(m => `<div class="purchase-timeline-month">${m}</div>`).join('')}
            </div>
            <div class="purchase-timeline-stats">
                <div class="purchase-timeline-stat">
                    <div class="purchase-timeline-stat-label">Total Spend</div>
                    <div class="purchase-timeline-stat-value">${formatINR(totalSpend)}</div>
                </div>
                <div class="purchase-timeline-stat">
                    <div class="purchase-timeline-stat-label">Items Purchased</div>
                    <div class="purchase-timeline-stat-value">${totalItems}</div>
                </div>
                <div class="purchase-timeline-stat">
                    <div class="purchase-timeline-stat-label">Peak Month</div>
                    <div class="purchase-timeline-stat-value">${peakMonth}</div>
                </div>
            </div>
            </div>
            `;
            }
            
            // CARD 4: Purchase Ledger Infinite Scroll
            function createPurchaseLedgerEntry(purchase) {
            const entry = document.createElement('div');
            entry.className = 'purchase-ledger-entry';
            
            const dateObj = new Date(purchase.date);
            const dateStr = dateObj.toLocaleDateString('en-IN', { day: '2-digit', month: 'short', year: 'numeric' });
            
            entry.innerHTML = `
            <div class="purchase-ledger-header">
            <div class="purchase-ledger-asset">
                <div class="purchase-ledger-code">${purchase.code}</div>
                <div class="purchase-ledger-type">${purchase.type}</div>
            </div>
            <div class="purchase-ledger-badge purchase-badge-${purchase.priceType}">
                <i class="fas fa-${purchase.priceType === 'bulk' ? 'tags' : purchase.priceType === 'premium' ? 'star' : 'tag'}"></i>
                ${purchase.priceType.toUpperCase()}
            </div>
            </div>
            <div class="purchase-ledger-details">
            <div class="purchase-detail-item">
                <div class="purchase-detail-label">Purchase Date</div>
                <div class="purchase-detail-value">${dateStr}</div>
            </div>
            <div class="purchase-detail-item">
                <div class="purchase-detail-label">Price</div>
                <div class="purchase-detail-value">${formatINR(purchase.price)}</div>
            </div>
            ${purchase.quantity ? `
                <div class="purchase-detail-item">
                    <div class="purchase-detail-label">Quantity</div>
                    <div class="purchase-detail-value">${purchase.quantity} ${purchase.unit}</div>
                </div>
            ` : ''}
            </div>
            <div class="purchase-ledger-vendor">
            <i class="fas fa-store"></i>
            <span>Vendor: ${purchase.vendor}</span>
            </div>
            `;
            return entry;
            }
            
            function generatePurchaseEntry() {
            const types = [
            { name: 'Vehicle', prefix: 'VEH', vendors: ['Metro Motors', 'Prime Auto', 'City Fleet'], hasQty: false },
            { name: 'Machinery', prefix: 'MCH', vendors: ['Industrial Supply Co', 'Tech Equipment Ltd', 'Heavy Machinery Inc'], hasQty: false },
            { name: 'Tool', prefix: 'TL', vendors: ['Tool Mart', 'Professional Tools', 'Hardware Hub'], hasQty: false },
            { name: 'IT Equipment', prefix: 'IT', vendors: ['Tech Solutions', 'Computer World', 'Digital Store'], hasQty: false },
            { name: 'Material', prefix: 'MAT', vendors: ['Supply Chain Co', 'Materials Direct', 'Bulk Suppliers'], hasQty: true }
            ];
            
            const type = types[Math.floor(Math.random() * types.length)];
            const code = `${type.prefix}-${Math.floor(Math.random() * 9000 + 1000)}`;
            const price = Math.floor(Math.random() * 400000 + 50000);
            const vendor = type.vendors[Math.floor(Math.random() * type.vendors.length)];
            const date = Date.now() - Math.random() * 180 * 24 * 60 * 60 * 1000;
            
            const avgPrice = 225000;
            const priceType = price < avgPrice * 0.8 ? 'bulk' : price > avgPrice * 1.3 ? 'premium' : 'standard';
            
            const quantity = type.hasQty ? Math.floor(Math.random() * 500 + 50) : null;
            const unit = quantity ? ['L', 'Kg', 'Units', 'N'][Math.floor(Math.random() * 4)] : null;
            
            return {
            code,
            type: type.name,
            price,
            vendor,
            date,
            priceType,
            quantity,
            unit
            };
            }
            
            function initPurchaseLedger() {
            const container = document.getElementById('viz-purchase-ledger');
            const wrapper = document.createElement('div');
            wrapper.className = 'purchase-ledger';
            const track = document.createElement('div');
            track.className = 'purchase-scroll-track';
            
            wrapper.appendChild(track);
            container.appendChild(wrapper);
            
            for (let i = 0; i < 8; i++) {
            track.appendChild(createPurchaseLedgerEntry(generatePurchaseEntry()));
            }
            
            let scrollPos = 0;
            function animate() {
            scrollPos += 0.4;
            const firstItem = track.firstElementChild;
            if (firstItem) {
            const itemHeight = firstItem.offsetHeight + 16;
            if (scrollPos >= itemHeight) {
                scrollPos = 0;
                track.appendChild(createPurchaseLedgerEntry(generatePurchaseEntry()));
                track.removeChild(firstItem);
            }
            }
            track.style.transform = `translateY(-${scrollPos}px)`;
            requestAnimationFrame(animate);
            }
            animate();
            }
            
            // Initialize all purchase cost tracking visualizations
            document.addEventListener('DOMContentLoaded', function() {
            initPurchaseConcentration();
            initPurchaseBenchmark();
            initPurchaseTimeline();
            initPurchaseLedger();
            });
            
            // ═══════════════════════════════════════════════════════════════
            // MATERIAL COST TRACKING — INFINITE SCROLLS
            // ═══════════════════════════════════════════════════════════════
            
            // Track used batch numbers globally to prevent duplicates
            const usedBatches = new Set();
            
            // Helper: Format INR currency
            function formatINR(amount) {
            return new Intl.NumberFormat('en-IN', {
            style: 'currency',
            currency: 'INR',
            minimumFractionDigits: 0,
            maximumFractionDigits: 0
            }).format(amount);
            }
            
            // Helper: Generate unique batch number
            function getUniqueBatch() {
            let batch;
            do {
            batch = `B${Math.floor(Math.random() * 999) + 1}`;
            } while (usedBatches.has(batch));
            usedBatches.add(batch);
            return batch;
            }
            
            // Helper: Random date in 2025
            function randomDate2025() {
            const months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
            const day = String(Math.floor(Math.random() * 28) + 1).padStart(2, '0');
            const month = months[Math.floor(Math.random() * months.length)];
            return `${day}-${month}-2025`;
            }
            
            // ─────────────────────────────────────────────────────────────────
            // 1️⃣ PURCHASE COST TRACKING
            // ─────────────────────────────────────────────────────────────────
            const purchaseMaterials = [
            { code: 'HYD-320', name: 'Hydraulic Fluid Refill', unit: 'L' },
            { code: 'LUB-150', name: 'Industrial Lubricant', unit: 'L' },
            { code: 'SAN-240', name: 'Industrial Sandpaper', unit: 'ft' },
            { code: 'PNT-BC1', name: 'Paint Basecoat', unit: 'L' },
            { code: 'CLN-500', name: 'Industrial Washing Liquid', unit: 'L' },
            { code: 'GRS-220', name: 'Heavy Duty Grease', unit: 'kg' },
            { code: 'SOL-760', name: 'Industrial Solvent', unit: 'L' },
            { code: 'THA-180', name: 'Thinner', unit: 'L' }
            ];
            
            function generatePurchaseItem() {
            const mat = purchaseMaterials[Math.floor(Math.random() * purchaseMaterials.length)];
            const batch = getUniqueBatch();
            const qty = Math.floor(Math.random() * 200) + 50;
            const exclusive = Math.floor(Math.random() * 15000) + 5000;
            
            // GST structure: either CGST+SGST or IGST (+ optional Cess)
            const isIntraState = Math.random() > 0.3;
            let taxes = [];
            let totalTax = 0;
            
            if (isIntraState) {
            const cgst = [2.5, 6, 9, 14][Math.floor(Math.random() * 4)];
            const sgst = cgst;
            taxes.push({ label: 'CGST', rate: cgst });
            taxes.push({ label: 'SGST', rate: sgst });
            totalTax = cgst + sgst;
            } else {
            const igst = [5, 12, 18, 28][Math.floor(Math.random() * 4)];
            taxes.push({ label: 'IGST', rate: igst });
            totalTax = igst;
            }
            
            // Optional cess (5% chance)
            if (Math.random() < 0.05) {
            const cess = [1, 2, 3][Math.floor(Math.random() * 3)];
            taxes.push({ label: 'Cess', rate: cess });
            totalTax += cess;
            }
            
            const total = Math.round(exclusive * (1 + totalTax / 100));
            
            return {
            code: mat.code,
            batch: batch,
            name: mat.name,
            qty: qty,
            unit: mat.unit,
            date: randomDate2025(),
            exclusive: exclusive,
            taxes: taxes,
            total: total
            };
            }
            
            function createPurchaseCard(item) {
            const taxRows = item.taxes.map(t => 
            `<div><span>${t.label}:</span><span>${t.rate}%</span></div>`
            ).join('');
            
            return `
            <div class="material-card">
            <div class="material-card-header">
                <div class="material-code">${item.code} • ${item.batch}</div>
                <div class="material-date">${item.date}</div>
            </div>
            <div class="material-name">${item.name}</div>
            <div class="material-qty">${item.qty} ${item.unit}</div>
            <div class="material-cost-breakdown">
                <div><span>Exclusive Cost:</span><span>${formatINR(item.exclusive)}</span></div>
                ${taxRows}
                <div class="material-total"><span>Total Cost:</span><strong>${formatINR(item.total)}</strong></div>
            </div>
            </div>
            `;
            }
            
            // ─────────────────────────────────────────────────────────────────
            // 2️⃣ EMPLOYEE CONSUMPTION
            // ─────────────────────────────────────────────────────────────────
            const employees = [
            'Rajesh Kumar', 'Priya Singh', 'Amit Patel', 'Sneha Reddy', 'Vikram Sharma',
            'Anjali Desai', 'Karan Mehta', 'Pooja Verma', 'Arjun Nair', 'Divya Iyer'
            ];
            
            const departments = ['Production', 'Maintenance', 'Quality Control', 'Logistics', 'Assembly'];
            
            const consumptionMaterials = [
            { code: 'GLV-100', name: 'Safety Gloves', unit: 'N' },
            { code: 'MSK-200', name: 'Dust Masks', unit: 'N' },
            { code: 'CLN-500', name: 'Cleaning Fluid', unit: 'L' },
            { code: 'SAN-240', name: 'Sandpaper', unit: 'ft' },
            { code: 'TPA-300', name: 'Masking Tape', unit: 'm' },
            { code: 'WIR-150', name: 'Welding Wire', unit: 'kg' },
            { code: 'CUT-450', name: 'Cutting Discs', unit: 'N' },
            { code: 'LUB-150', name: 'Lubricant Spray', unit: 'L' }
            ];
            
            function generateEmployeeItem() {
            const emp = employees[Math.floor(Math.random() * employees.length)];
            const empId = `EMP${String(Math.floor(Math.random() * 9000) + 1000)}`;
            const dept = departments[Math.floor(Math.random() * departments.length)];
            const year = 2024 + Math.floor(Math.random() * 2);
            
            const numMats = 3 + Math.floor(Math.random() * 2); // 3-4 materials
            const materials = [];
            const selected = new Set();
            
            while (materials.length < numMats) {
            const mat = consumptionMaterials[Math.floor(Math.random() * consumptionMaterials.length)];
            if (!selected.has(mat.code)) {
            selected.add(mat.code);
            materials.push({
                code: mat.code,
                name: mat.name,
                qty: Math.floor(Math.random() * 150) + 20,
                unit: mat.unit
            });
            }
            }
            
            return { emp, empId, dept, year, materials };
            }
            
            function createEmployeeCard(item) {
            const matRows = item.materials.map(m => 
            `<div class="employee-mat-row">
            <span class="mat-code">${m.code}</span>
            <span class="mat-name">${m.name}</span>
            <span class="mat-qty">${m.qty} ${m.unit}</span>
            </div>`
            ).join('');
            
            return `
            <div class="material-card">
            <div class="employee-year">FY ${item.year}</div>
            <div class="employee-header">
                <div class="employee-name">${item.emp}</div>
                <div class="employee-id">${item.empId}</div>
            </div>
            <div class="employee-dept">${item.dept}</div>
            <div class="employee-materials">
                ${matRows}
            </div>
            </div>
            `;
            }
            
            // ─────────────────────────────────────────────────────────────────
            // 3️⃣ EQUIPMENT ALLOCATION
            // ─────────────────────────────────────────────────────────────────
            const equipment = [
            { code: 'CNC-210', name: 'CNC Milling Machine' },
            { code: 'HYD-450', name: 'Hydraulic Press' },
            { code: 'LTH-180', name: 'Industrial Lathe' },
            { code: 'WLD-320', name: 'Welding Station' },
            { code: 'CMP-560', name: 'Air Compressor' }
            ];
            
            const allocationMaterials = [
            { code: 'DTG-P12', batch: 'B45', name: 'Detergent Powder', max: 50, unit: 'kg', gradient: 'info' },
            { code: 'DLT-W08', batch: 'B67', name: 'Diluter', max: 120, unit: 'L', gradient: 'green' },
            { code: 'DST-W15', batch: 'B89', name: 'Distilled Water', max: 300, unit: 'L', gradient: 'blue' },
            { code: 'COL-520', batch: 'B23', name: 'Coolant Concentrate', max: 80, unit: 'L', gradient: 'indigo' },
            { code: 'SDA-450', batch: 'B91', name: 'Sodium Hydroxide', max: 60, unit: 'kg', gradient: 'purple' },
            { code: 'ACT-700', batch: 'B34', name: 'Acetone', max: 100, unit: 'L', gradient: 'orange' },
            { code: 'ETH-820', batch: 'B56', name: 'Ethanol', max: 150, unit: 'L', gradient: 'pink' },
            { code: 'HCL-310', batch: 'B78', name: 'Hydrochloric Acid', max: 70, unit: 'L', gradient: 'amber' }
            ];
            
            
            function generateEquipmentItem() {
            const eq = equipment[Math.floor(Math.random() * equipment.length)];
            const numMats = 3 + Math.floor(Math.random() * 3); // 3-5 materials
            const materials = [];
            const selected = new Set();
            const usedGradients = new Set();
            
            while (materials.length < numMats) {
            const mat = allocationMaterials[Math.floor(Math.random() * allocationMaterials.length)];
            if (!selected.has(mat.code) && !usedGradients.has(mat.gradient)) {
            selected.add(mat.code);
            usedGradients.add(mat.gradient);
            const current = Math.floor(Math.random() * mat.max);
            const percent = Math.round((current / mat.max) * 100);
            materials.push({
                code: mat.code,
                batch: mat.batch,
                name: mat.name,
                current: current,
                max: mat.max,
                unit: mat.unit,
                percent: percent,
                gradient: mat.gradient
            });
            }
            }
            
            return { eq, materials };
            }
            
            function createEquipmentCard(item) {
            const matBars = item.materials.map(m => {
            let barClass = `s-bg-${m.gradient}`;
            
            return `
            <div class="equipment-mat-bar">
                <div class="equipment-mat-header">
                    <span class="mat-code-batch">${m.code} • ${m.batch}</span>
                    <span class="mat-name">${m.name}</span>
                </div>
                <div class="equipment-mat-subheader">
                    <span class="mat-qty">${m.current}/${m.max} ${m.unit}</span>
                    <span class="mat-percent">${m.percent}%</span>
                </div>
                <div class="equipment-progress">
                    <div class="equipment-progress-fill ${barClass}" style="width: ${m.percent}%"></div>
                </div>
            </div>
            `;
            }).join('');
            
            return `
            <div class="material-card">
            <div class="equipment-header">
                <div class="equipment-code">${item.eq.code}</div>
                <div class="equipment-name">${item.eq.name}</div>
            </div>
            <div class="equipment-allocations">
                ${matBars}
            </div>
            </div>
            `;
            }
            
            // ─────────────────────────────────────────────────────────────────
            // 4️⃣ WASTE ACCOUNTING
            // ─────────────────────────────────────────────────────────────────
            const wasteMaterials = [
            { code: 'HYD-320', name: 'Hydraulic Fluid', unit: 'L', canExpire: true },
            { code: 'PNT-BC1', name: 'Paint Basecoat', unit: 'L', canExpire: true },
            { code: 'SOL-760', name: 'Industrial Solvent', unit: 'L', canExpire: true },
            { code: 'THA-180', name: 'Thinner', unit: 'L', canExpire: true },
            { code: 'CLN-500', name: 'Cleaning Fluid', unit: 'L', canExpire: true },
            { code: 'LUB-150', name: 'Industrial Lubricant', unit: 'L', canExpire: true },
            { code: 'CUT-450', name: 'Cutting Discs', unit: 'N', canExpire: false },
            { code: 'SAN-240', name: 'Sandpaper', unit: 'ft', canExpire: false }
            ];
            
            
            const wasteReasons = [
            { type: 'unfit', gradient: 'info-special', disposals: ['Trashed', 'Replaced'], allowExpired: false },
            { type: 'mishandled', gradient: 'purple', disposals: ['Trashed', 'Recovered'], allowExpired: false },
            { type: 'missing', gradient: 'yellow', disposals: ['Recovered', 'Permanently Lost'], allowExpired: false },
            { type: 'expired', gradient: 'red', disposals: ['Trashed', 'Replaced'], allowExpired: true }
            ];
            
            function generateWasteItem() {
            const mat = wasteMaterials[Math.floor(Math.random() * wasteMaterials.length)];
            
            // Filter reasons based on material's expiry capability
            let availableReasons = wasteReasons;
            if (!mat.canExpire) {
            availableReasons = wasteReasons.filter(r => !r.allowExpired);
            }
            
            const reason = availableReasons[Math.floor(Math.random() * availableReasons.length)];
            const qty = Math.floor(Math.random() * 50) + 5;
            const cost = Math.floor(Math.random() * 8000) + 1000;
            const disposal = reason.disposals[Math.floor(Math.random() * reason.disposals.length)];
            
            return {
            code: mat.code,
            name: mat.name,
            qty: qty,
            unit: mat.unit,
            cost: cost,
            reason: reason.type,
            gradient: reason.gradient,
            disposal: disposal
            };
            }
            
            function createWasteCard(item) {
            return `
            <div class="material-card">
            <div class="waste-header">
                <div class="waste-code">${item.code}</div>
                <div class="s-pill s-pill-${item.gradient}">${item.reason.toUpperCase()}</div>
            </div>
            <div class="waste-name">${item.name}</div>
            <div class="waste-qty">${item.qty} ${item.unit}</div>
            <div class="waste-cost-row">
                <span>Calculated Cost:</span>
                <span>${formatINR(item.cost)}</span>
            </div>
            <div class="waste-disposal">Disposal: <strong>${item.disposal}</strong></div>
            </div>
            `;
            }
            
            // ═══════════════════════════════════════════════════════════════
            // UNIVERSAL INFINITE SCROLL ENGINE
            // ═══════════════════════════════════════════════════════════════
            function initMaterialScroll(containerId, generateFn, createCardFn) {
            const container = document.getElementById(containerId);
            if (!container) return;
            
            const track = container.querySelector('.material-scroll-track');
            
            // Populate initial items
            for (let i = 0; i < 4; i++) {
            const item = generateFn();
            const card = document.createElement('div');
            card.innerHTML = createCardFn(item);
            track.appendChild(card.firstElementChild);
            }
            
            let scrollPos = 0;
            const speed = 0.5;
            
            function animate() {
            scrollPos += speed;
            const firstItem = track.children[0];
            
            if (firstItem) {
            const itemHeight = firstItem.offsetHeight + 16; // 1rem gap
            
            if (scrollPos >= itemHeight) {
                scrollPos = 0;
                const newItem = generateFn();
                const card = document.createElement('div');
                card.innerHTML = createCardFn(newItem);
                track.appendChild(card.firstElementChild);
                track.removeChild(firstItem);
            }
            
            track.style.transform = `translateY(-${scrollPos}px)`;
            }
            
            requestAnimationFrame(animate);
            }
            
            animate();
            }
            
            // ═══════════════════════════════════════════════════════════════
            //    ASSET TRACKING — 5 INFINITE SCROLL VISUALIZATIONS
            // ═══════════════════════════════════════════════════════════════
            
            // ─────────────────────────────────────────────────────────────────
            //    MASTER ASSET INVENTORY DATABASE
            // ─────────────────────────────────────────────────────────────────
            
            const ASSET_INVENTORY = {
            // TOOLS
            tools: [
            { name: "Phillips Screwdriver Set", code: "PSD-01" },
            { name: "Flathead Screwdriver Set", code: "FSD-02" },
            { name: "Torx Screwdriver Set", code: "TSD-03" },
            { name: "Open-End Spanner Set", code: "OES-04" },
            { name: "Ring Spanner Set", code: "RSS-05" },
            { name: "Combination Spanner Set", code: "CSS-06" },
            { name: "Adjustable Wrench 12\"", code: "ADW-07" },
            { name: "Pipe Wrench 18\"", code: "PWR-08" },
            { name: "Allen Key Set Metric", code: "AKM-09" },
            { name: "Allen Key Set Imperial", code: "AKI-10" },
            { name: "Hex Key Ball-End Set", code: "HKB-11" },
            { name: "Pliers Set", code: "PLS-12" },
            { name: "Wire Stripper", code: "WST-13" },
            { name: "Crimping Tool", code: "CRT-14" },
            { name: "Cable Cutter", code: "CCT-15" },
            { name: "Digital Multimeter", code: "DMM-16" },
            { name: "Analog Multimeter", code: "AMM-17" },
            { name: "Clamp Meter", code: "CLM-18" },
            { name: "Refractometer Digital", code: "RFD-19" },
            { name: "Caliper Digital 6\"", code: "CDG-20" },
            { name: "Micrometer Set", code: "MCS-21" },
            { name: "Torque Wrench 1/2\" Drive", code: "TRW-22" },
            { name: "Torque Screwdriver", code: "TRS-23" },
            { name: "Dial Indicator Set", code: "DIS-24" },
            { name: "Bore Gauge Set", code: "BGS-25" },
            { name: "Cordless Drill 18V", code: "CDD-26" },
            { name: "Impact Driver 20V", code: "IDP-27" },
            { name: "Angle Grinder 4.5\"", code: "ANG-28" },
            { name: "Orbital Sander", code: "ORS-29" },
            { name: "Heat Gun 1800W", code: "HTG-30" },
            { name: "Soldering Station", code: "SLS-31" },
            { name: "Hot Air Rework Station", code: "HAR-32" },
            { name: "Socket Set 1/4\" Drive", code: "SSQ-33" },
            { name: "Socket Set 1/2\" Drive", code: "SSH-34" },
            { name: "Socket Set 3/8\" Drive", code: "SST-35" },
            { name: "Ratchet Set Metric", code: "RSM-36" },
            { name: "Ratchet Set Imperial", code: "RSI-37" },
            { name: "Automotive Tool Kit", code: "ATK-38" },
            { name: "Electrician Tool Kit", code: "ETK-39" },
            { name: "Precision Screwdriver Kit", code: "PSK-40" },
            { name: "Brake Caliper Tool", code: "BCT-41" },
            { name: "Oil Filter Wrench", code: "OFW-42" },
            { name: "Spark Plug Socket Set", code: "SPS-43" },
            { name: "Compression Tester", code: "CMT-44" },
            { name: "Laptop ThinkPad X1", code: "LTP-45" },
            { name: "Laptop Dell Latitude", code: "LTD-46" },
            { name: "Laptop HP EliteBook", code: "LTH-47" },
            { name: "Desktop Workstation", code: "DSW-48" },
            { name: "Projector 4K Conference", code: "PRJ-49" },
            { name: "Oscilloscope Digital", code: "OSC-50" }
            ],
            
            // EQUIPMENT
            equipment: [
            { name: "Forklift 2-Ton", code: "FLT-01" },
            { name: "Forklift 5-Ton", code: "FLT-02" },
            { name: "2-Post Lift Automotive", code: "2PL-03" },
            { name: "4-Post Lift Heavy Duty", code: "4PL-04" },
            { name: "Infrared Drier Cabinet", code: "IRD-05" },
            { name: "Dent Puller Hydraulic", code: "DPH-06" },
            { name: "Spray Booth Industrial", code: "SBI-07" },
            { name: "Wheel Balancer Digital", code: "WBD-08" },
            { name: "Tire Changer Automatic", code: "TCA-09" },
            { name: "Hydraulic Press 50T", code: "HYP-10" },
            { name: "CNC Lathe Machine", code: "CNL-11" },
            { name: "CNC Milling Machine", code: "CNM-12" },
            { name: "Plasma Cutter Industrial", code: "PCI-13" },
            { name: "MIG Welder 250A", code: "MIG-14" },
            { name: "TIG Welder 200A", code: "TIG-15" },
            { name: "Spot Welder Pneumatic", code: "SPW-16" },
            { name: "Air Compressor 10HP", code: "ACM-17" },
            { name: "Generator Diesel 125KVA", code: "GEN-18" },
            { name: "Water Jet Cutter", code: "WJC-19" },
            { name: "Sandblasting Cabinet", code: "SBC-20" },
            { name: "Ultrasonic Cleaner 50L", code: "USC-21" },
            { name: "Vacuum Furnace", code: "VCF-22" },
            { name: "Coating Machine PVD", code: "PVD-23" },
            { name: "Testing Rig Universal", code: "UTR-24" },
            { name: "Coordinate Measuring Machine", code: "CMM-25" },
            { name: "X-Ray Inspection System", code: "XRI-26" },
            { name: "Leak Testing Equipment", code: "LTE-27" },
            { name: "Autoclave Sterilizer 200L", code: "ACS-28" },
            { name: "Centrifuge Laboratory", code: "CFL-29" },
            { name: "Incubator Medical Grade", code: "IMD-30" }
            ],
            
            // VEHICLES
            vehicles: [
            { name: "Ambulance Type-B", code: "AMB-01" },
            { name: "Service Van Toyota", code: "SVN-02" },
            { name: "Delivery Truck 5T", code: "DTK-03" },
            { name: "Executive Sedan BMW", code: "EXS-04" },
            { name: "Field Vehicle 4x4", code: "FVH-05" },
            { name: "Transport Van 15-Seater", code: "TVN-06" },
            { name: "Cargo Truck 10T", code: "CTK-07" },
            { name: "Mobile Workshop Unit", code: "MWU-08" },
            { name: "Tow Truck Flatbed", code: "TTF-09" },
            { name: "Inspection Vehicle", code: "INV-10" }
            ]
            };
            
            // Employee names database
            const EMPLOYEE_NAMES = [
            "Rajesh Kumar", "Priya Sharma", "Amit Patel", "Sneha Reddy", 
            "Vikram Singh", "Anita Desai", "Rahul Mehta", "Kavita Joshi",
            "Suresh Nair", "Deepika Iyer", "Manoj Verma", "Pooja Gupta",
            "Arjun Rao", "Meena Pillai", "Sanjay Mishra", "Neha Kapoor"
            ];
            
            const DEPARTMENTS = [
            "Maintenance", "Operations", "Production", "Quality Control",
            "Engineering", "Logistics", "IT Services", "Administration"
            ];
            
            const DAMAGE_NOTES = [
            "Hydraulic leak detected", "Power cable damaged", "Housing crack found",
            "Missing components", "Excessive wear noted", "Calibration drift observed",
            "Screen damage reported", "Battery failure", "Connector pins bent",
            "Belt wear excessive", "Oil contamination", "Motor overheating"
            ];
            
            const REJECTION_REASONS = [
            { type: "Asset Unavailable", class: "rejection-unavailable" },
            { type: "Insufficient Access", class: "rejection-access" },
            { type: "Policy Violation", class: "rejection-policy" }
            ];
            
            // ─────────────────────────────────────────────────────────────────
            //    UTILITY FUNCTIONS
            // ─────────────────────────────────────────────────────────────────
            
            function getRandomElement(arr) {
            return arr[Math.floor(Math.random() * arr.length)];
            }
            
            function getRandomAsset() {
            const allAssets = [
            ...ASSET_INVENTORY.tools,
            ...ASSET_INVENTORY.equipment,
            ...ASSET_INVENTORY.vehicles
            ];
            return getRandomElement(allAssets);
            }
            
            function getRandomInt(min, max) {
            return Math.floor(Math.random() * (max - min + 1)) + min;
            }
            
            // ─────────────────────────────────────────────────────────────────
            //    1️⃣ DEMAND FREQUENCY TRACKING
            // ─────────────────────────────────────────────────────────────────
            
            function generateDemandItem() {
            const asset = getRandomAsset();
            const requests = getRandomInt(5, 350);
            
            let trend, trendClass;
            if (requests > 200) {
            trend = "High Demand";
            trendClass = "demand-trend-high";
            } else if (requests > 80) {
            trend = "Low Demand";
            trendClass = "demand-trend-low";
            } else {
            trend = "Underutilized";
            trendClass = "demand-trend-underutilized";
            }
            
            return { ...asset, requests, trend, trendClass };
            }
            
            function createDemandCard(item) {
            return `
            <div class="demand-card">
            <div class="demand-card-header">
                <div class="demand-asset-code">${item.code}</div>
                <div class="demand-trend-badge ${item.trendClass}">${item.trend}</div>
            </div>
            <div class="demand-asset-name">${item.name}</div>
            <div class="demand-request-count">${item.requests} requests</div>
            </div>
            `;
            }
            
            function initDemandScroll() {
            const container = document.getElementById('viz-demand-frequency');
            if (!container) return;
            
            const track = container.querySelector('.demand-scroll-track');
            
            // Generate initial cards
            for (let i = 0; i < 5; i++) {
            const item = generateDemandItem();
            const card = document.createElement('div');
            card.innerHTML = createDemandCard(item);
            track.appendChild(card.firstElementChild);
            }
            
            let scrollPos = 0;
            const speed = 0.5;
            
            function animate() {
            scrollPos += speed;
            const firstCard = track.firstElementChild;
            
            if (firstCard) {
            const cardHeight = firstCard.offsetHeight + 14; // 0.85rem gap
            
            if (scrollPos >= cardHeight) {
                scrollPos = 0;
                const newItem = generateDemandItem();
                const card = document.createElement('div');
                card.innerHTML = createDemandCard(newItem);
                track.appendChild(card.firstElementChild);
                track.removeChild(firstCard);
            }
            }
            
            track.style.transform = `translateY(-${scrollPos}px)`;
            requestAnimationFrame(animate);
            }
            
            animate();
            }
            
            // ─────────────────────────────────────────────────────────────────
            //    2️⃣ REQUESTER PROFILING
            // ─────────────────────────────────────────────────────────────────
            
            function generateRequesterItem() {
            const name = getRandomElement(EMPLOYEE_NAMES);
            const empId = `EMP-${getRandomInt(1001, 9999)}`;
            const dept = getRandomElement(DEPARTMENTS);
            const requests = getRandomInt(8, 180);
            const topAsset = getRandomAsset();
            const topCount = getRandomInt(3, 25);
            
            let badge, badgeClass;
            if (requests > 100) {
            badge = "Power User";
            badgeClass = "requester-power";
            } else {
            badge = "Frequent";
            badgeClass = "requester-frequent";
            }
            
            return { name, empId, dept, requests, badge, badgeClass, topAsset, topCount };
            }
            
            function createRequesterCard(item) {
            return `
            <div class="requester-card">
            <div class="requester-header">
                <div class="requester-info">
                    <div class="requester-name">${item.name}</div>
                    <div class="requester-id">${item.empId}</div>
                </div>
                <div class="requester-user-badge ${item.badgeClass}">${item.badge}</div>
            </div>
            <div class="requester-dept">${item.dept}</div>
            <div class="requester-stats">
                <div class="requester-count">${item.requests} requests</div>
                <div class="requester-top-asset">${item.topAsset.name} × ${item.topCount}</div>
            </div>
            </div>
            `;
            }
            
            function initRequesterScroll() {
            const container = document.getElementById('viz-requester-profiling');
            if (!container) return;
            
            const track = container.querySelector('.requester-scroll-track');
            
            for (let i = 0; i < 5; i++) {
            const item = generateRequesterItem();
            const card = document.createElement('div');
            card.innerHTML = createRequesterCard(item);
            track.appendChild(card.firstElementChild);
            }
            
            let scrollPos = 0;
            const speed = 0.5;
            
            function animate() {
            scrollPos += speed;
            const firstCard = track.firstElementChild;
            
            if (firstCard) {
            const cardHeight = firstCard.offsetHeight + 14;
            
            if (scrollPos >= cardHeight) {
                scrollPos = 0;
                const newItem = generateRequesterItem();
                const card = document.createElement('div');
                card.innerHTML = createRequesterCard(newItem);
                track.appendChild(card.firstElementChild);
                track.removeChild(firstCard);
            }
            }
            
            track.style.transform = `translateY(-${scrollPos}px)`;
            requestAnimationFrame(animate);
            }
            
            animate();
            }
            
            // ─────────────────────────────────────────────────────────────────
            //    3️⃣ RETURN CONDITION ANALYSIS
            // ─────────────────────────────────────────────────────────────────
            
            function generateReturnItem() {
            const asset = getRandomAsset();
            const employee = getRandomElement(EMPLOYEE_NAMES);
            const rand = Math.random();
            
            let condition, conditionClass, damageNote;
            if (rand > 0.7) {
            condition = "Good";
            conditionClass = "return-good";
            damageNote = null;
            } else if (rand > 0.3) {
            condition = "Minor Damage";
            conditionClass = "return-minor";
            damageNote = getRandomElement(DAMAGE_NOTES);
            } else {
            condition = "Major Damage";
            conditionClass = "return-major";
            damageNote = getRandomElement(DAMAGE_NOTES);
            }
            
            return { ...asset, employee, condition, conditionClass, damageNote };
            }
            
            function createReturnCard(item) {
            return `
            <div class="return-card">
            <div class="return-header">
                <div class="return-asset-code">${item.code}</div>
                <div class="return-condition-badge ${item.conditionClass}">${item.condition}</div>
            </div>
            <div class="return-asset-name">${item.name}</div>
            <div class="return-employee">Returned by: ${item.employee}</div>
            ${item.damageNote ? `<div class="return-damage-note">${item.damageNote}</div>` : ''}
            </div>
            `;
            }
            
            function initReturnScroll() {
            const container = document.getElementById('viz-return-condition');
            if (!container) return;
            
            const track = container.querySelector('.return-scroll-track');
            
            for (let i = 0; i < 5; i++) {
            const item = generateReturnItem();
            const card = document.createElement('div');
            card.innerHTML = createReturnCard(item);
            track.appendChild(card.firstElementChild);
            }
            
            let scrollPos = 0;
            const speed = 0.5;
            
            function animate() {
            scrollPos += speed;
            const firstCard = track.firstElementChild;
            
            if (firstCard) {
            const cardHeight = firstCard.offsetHeight + 14;
            
            if (scrollPos >= cardHeight) {
                scrollPos = 0;
                const newItem = generateReturnItem();
                const card = document.createElement('div');
                card.innerHTML = createReturnCard(newItem);
                track.appendChild(card.firstElementChild);
                track.removeChild(firstCard);
            }
            }
            
            track.style.transform = `translateY(-${scrollPos}px)`;
            requestAnimationFrame(animate);
            }
            
            animate();
            }
            
            // ─────────────────────────────────────────────────────────────────
            //    4️⃣ FLOOR TIME VS SHELF TIME
            // ─────────────────────────────────────────────────────────────────
            
            function generateFloorItem() {
            const asset = getRandomAsset();
            const floorDays = getRandomInt(10, 350);
            const totalDays = floorDays + getRandomInt(5, 100);
            const floorPct = Math.round((floorDays / totalDays) * 100);
            
            let util, utilClass;
            if (floorPct > 70) {
            util = "High";
            utilClass = "floor-util-high";
            } else if (floorPct > 40) {
            util = "Medium";
            utilClass = "floor-util-medium";
            } else {
            util = "Low";
            utilClass = "floor-util-low";
            }
            
            const shelfDays = totalDays - floorDays;
            
            return { ...asset, floorDays, shelfDays, floorPct, util, utilClass };
            }
            
            function createFloorCard(item) {
            return `
            <div class="floor-card">
            <div class="floor-header">
                <div class="floor-asset-code">${item.code}</div>
                <div class="floor-util-badge ${item.utilClass}">${item.util}</div>
            </div>
            <div class="floor-asset-name">${item.name}</div>
            <div class="floor-progress-bar">
                <div class="floor-progress-fill" style="width: ${item.floorPct}%"></div>
            </div>
            <div class="floor-stats">${item.floorDays} days active / ${item.shelfDays} days idle</div>
            </div>
            `;
            }
            
            function initFloorScroll() {
            const container = document.getElementById('viz-floor-time');
            if (!container) return;
            
            const track = container.querySelector('.floor-scroll-track');
            
            for (let i = 0; i < 5; i++) {
            const item = generateFloorItem();
            const card = document.createElement('div');
            card.innerHTML = createFloorCard(item);
            track.appendChild(card.firstElementChild);
            }
            
            let scrollPos = 0;
            const speed = 0.5;
            
            function animate() {
            scrollPos += speed;
            const firstCard = track.firstElementChild;
            
            if (firstCard) {
            const cardHeight = firstCard.offsetHeight + 14;
            
            if (scrollPos >= cardHeight) {
                scrollPos = 0;
                const newItem = generateFloorItem();
                const card = document.createElement('div');
                card.innerHTML = createFloorCard(newItem);
                track.appendChild(card.firstElementChild);
                track.removeChild(firstCard);
            }
            }
            
            track.style.transform = `translateY(-${scrollPos}px)`;
            requestAnimationFrame(animate);
            }
            
            animate();
            }
            
            // ─────────────────────────────────────────────────────────────────
            //    5️⃣ REJECTION PATTERN TRACKING
            // ─────────────────────────────────────────────────────────────────
            
            function generateRejectionItem() {
            const asset = getRandomAsset();
            const requester = getRandomElement(EMPLOYEE_NAMES);
            const dept = getRandomElement(DEPARTMENTS);
            const reason = getRandomElement(REJECTION_REASONS);
            
            const now = new Date();
            const daysAgo = getRandomInt(0, 30);
            const date = new Date(now.setDate(now.getDate() - daysAgo));
            const dateStr = date.toLocaleDateString('en-IN', { day: '2-digit', month: 'short', year: 'numeric' });
            
            return { ...asset, requester, dept, reason, dateStr };
            }
            
            function createRejectionCard(item) {
            return `
            <div class="rejection-card">
            <div class="rejection-header">
                <div class="rejection-asset-name">${item.name}</div>
                <div class="rejection-reason-badge ${item.reason.class}">${item.reason.type}</div>
            </div>
            <div class="rejection-requester">
                <div class="rejection-name">${item.requester}</div>
                <div class="rejection-dept">${item.dept}</div>
            </div>
            <div class="rejection-date">${item.dateStr}</div>
            </div>
            `;
            }
            
            function initRejectionScroll() {
            const container = document.getElementById('viz-rejection-patterns');
            if (!container) return;
            
            const track = container.querySelector('.rejection-scroll-track');
            
            for (let i = 0; i < 5; i++) {
            const item = generateRejectionItem();
            const card = document.createElement('div');
            card.innerHTML = createRejectionCard(item);
            track.appendChild(card.firstElementChild);
            }
            
            let scrollPos = 0;
            const speed = 0.5;
            
            function animate() {
            scrollPos += speed;
            const firstCard = track.firstElementChild;
            
            if (firstCard) {
            const cardHeight = firstCard.offsetHeight + 14;
            
            if (scrollPos >= cardHeight) {
                scrollPos = 0;
                const newItem = generateRejectionItem();
                const card = document.createElement('div');
                card.innerHTML = createRejectionCard(newItem);
                track.appendChild(card.firstElementChild);
                track.removeChild(firstCard);
            }
            }
            
            track.style.transform = `translateY(-${scrollPos}px)`;
            requestAnimationFrame(animate);
            }
            
            animate();
            }
            
            
            // ═══════════════════════════════════════════════════════════════
            //    MATERIAL REQUEST INTELLIGENCE — 5 COMPACT INFINITE SCROLLS
            // ═══════════════════════════════════════════════════════════════
            
            // ─────────────────────────────────────────────────────────────────
            //    MATERIALS INVENTORY DATABASE
            // ─────────────────────────────────────────────────────────────────
            
            const MATERIALS_INVENTORY = {
            lubricants: [
            { name: "SAE 10W-40 Engine Oil", code: "OIL-1040", unit: "L" },
            { name: "SAE 5W-30 Synthetic Oil", code: "OIL-530", unit: "L" },
            { name: "Hydraulic Oil ISO 68", code: "HYD-68", unit: "L" },
            { name: "Gear Oil SAE 90", code: "GEAR-90", unit: "L" },
            { name: "Lithium Grease EP2", code: "GRS-EP2", unit: "kg" },
            { name: "Coolant Concentrate", code: "CLT-CON", unit: "L" },
            { name: "Brake Fluid DOT 4", code: "BRK-DOT4", unit: "L" },
            { name: "Transmission Fluid ATF", code: "TRN-ATF", unit: "L" }
            ],
            consumables: [
            { name: "Oil Filter Cartridge", code: "FLT-OIL", unit: "pcs" },
            { name: "Air Filter Element", code: "FLT-AIR", unit: "pcs" },
            { name: "Fuel Filter Diesel", code: "FLT-FUEL", unit: "pcs" },
            { name: "Gasket Set Engine", code: "GSK-ENG", unit: "set" },
            { name: "V-Belt Set", code: "BLT-V", unit: "set" },
            { name: "Spark Plug Set", code: "SPK-SET", unit: "set" },
            { name: "Brake Pad Kit", code: "BRK-PAD", unit: "set" },
            { name: "Wiper Blade Pair", code: "WPR-BLD", unit: "pair" }
            ],
            chemicals: [
            { name: "Degreaser Industrial", code: "CLN-DEG", unit: "L" },
            { name: "Rust Remover Spray", code: "CLN-RST", unit: "L" },
            { name: "Contact Cleaner", code: "CLN-CNT", unit: "L" },
            { name: "Thread Locker Medium", code: "ADH-THD", unit: "ml" },
            { name: "Epoxy Adhesive 2-Part", code: "ADH-EPX", unit: "ml" },
            { name: "Silicone Sealant", code: "SEL-SIL", unit: "ml" },
            { name: "WD-40 Penetrant", code: "PEN-WD40", unit: "ml" }
            ],
            medical: [
            { name: "Sterile Gauze Pads 4x4", code: "MED-GAU", unit: "pcs" },
            { name: "Surgical Gloves Size M", code: "MED-GLV", unit: "pair" },
            { name: "Disposable Syringes 10ml", code: "MED-SYR", unit: "pcs" },
            { name: "Saline Solution 0.9%", code: "MED-SAL", unit: "ml" },
            { name: "Antiseptic Povidone", code: "MED-PVD", unit: "ml" },
            { name: "Adhesive Bandage Strip", code: "MED-BND", unit: "pcs" },
            { name: "Medical Tape Roll", code: "MED-TPE", unit: "roll" },
            { name: "Alcohol Swabs", code: "MED-ALC", unit: "pcs" }
            ]
            };
            
            function getRandomMaterial() {
            const allMaterials = [
            ...MATERIALS_INVENTORY.lubricants,
            ...MATERIALS_INVENTORY.consumables,
            ...MATERIALS_INVENTORY.chemicals,
            ...MATERIALS_INVENTORY.medical
            ];
            return getRandomElement(allMaterials);
            }
            
            const CONDITION_NOTES = [
            "Original condition maintained",
            "Storage damage detected",
            "Minor degradation observed",
            "Packaging compromised",
            "Contamination suspected",
            "Seal broken during storage"
            ];
            
            const WEEKDAYS = ["Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday", "Sunday"];
            
            // ─────────────────────────────────────────────────────────────────
            //    1️⃣ VOLUMETRIC ISSUE TRACKING
            // ─────────────────────────────────────────────────────────────────
            
            function generateVolumetricItem() {
            const material = getRandomMaterial();
            const quantity = getRandomInt(5, 500);
            const velocityRand = Math.random();
            
            let velocity, velocityClass;
            if (velocityRand > 0.6) {
            velocity = "High Velocity";
            velocityClass = "velocity-high";
            } else if (velocityRand > 0.3) {
            velocity = "Medium";
            velocityClass = "velocity-medium";
            } else {
            velocity = "Low";
            velocityClass = "velocity-low";
            }
            
            return { ...material, quantity, velocity, velocityClass };
            }
            
            function createVolumetricCard(item) {
            return `
            <div class="volumetric-card">
            <div class="volumetric-header">
                <div class="volumetric-material-code">${item.code}</div>
                <div class="volumetric-velocity-badge ${item.velocityClass}">${item.velocity}</div>
            </div>
            <div class="volumetric-material-name">${item.name}</div>
            <div class="volumetric-quantity">${item.quantity}${item.unit} issued</div>
            </div>
            `;
            }
            
            function initVolumetricScroll() {
            const container = document.getElementById('viz-volumetric-tracking');
            if (!container) return;
            
            const track = container.querySelector('.volumetric-scroll-track');
            
            for (let i = 0; i < 4; i++) {
            const item = generateVolumetricItem();
            const card = document.createElement('div');
            card.innerHTML = createVolumetricCard(item);
            track.appendChild(card.firstElementChild);
            }
            
            let scrollPos = 0;
            const speed = 0.4;
            
            function animate() {
            scrollPos += speed;
            const firstCard = track.firstElementChild;
            
            if (firstCard) {
            const cardHeight = firstCard.offsetHeight + 11; // 0.7rem gap
            
            if (scrollPos >= cardHeight) {
                scrollPos = 0;
                const newItem = generateVolumetricItem();
                const card = document.createElement('div');
                card.innerHTML = createVolumetricCard(newItem);
                track.appendChild(card.firstElementChild);
                track.removeChild(firstCard);
            }
            }
            
            track.style.transform = `translateY(-${scrollPos}px)`;
            requestAnimationFrame(animate);
            }
            
            animate();
            }
            
            // ─────────────────────────────────────────────────────────────────
            //    2️⃣ COMPLETE CONSUMPTION ANALYSIS
            // ─────────────────────────────────────────────────────────────────
            
            function generateConsumptionItem() {
            const material = getRandomMaterial();
            const issued = getRandomInt(10, 200);
            const returnedRand = Math.random();
            const returned = returnedRand > 0.6 ? 0 : getRandomInt(1, Math.floor(issued * 0.5));
            const consumed = issued - returned;
            const rate = Math.round((consumed / issued) * 100);
            
            let status, statusClass;
            if (returned === 0) {
            status = "Fully Consumed";
            statusClass = "consumption-full";
            } else {
            status = "Partial Return";
            statusClass = "consumption-partial";
            }
            
            return { ...material, issued, returned, rate, status, statusClass };
            }
            
            function createConsumptionCard(item) {
            return `
            <div class="consumption-card">
            <div class="consumption-header">
                <div class="consumption-material-code">${item.code}</div>
                <div class="consumption-status-badge ${item.statusClass}">${item.status}</div>
            </div>
            <div class="consumption-material-name">${item.name}</div>
            <div class="consumption-quantities">${item.issued}${item.unit} issued / ${item.returned}${item.unit} returned</div>
            <div class="consumption-rate">${item.rate}% consumed</div>
            </div>
            `;
            }
            
            function initConsumptionScroll() {
            const container = document.getElementById('viz-consumption-analysis');
            if (!container) return;
            
            const track = container.querySelector('.consumption-scroll-track');
            
            for (let i = 0; i < 4; i++) {
            const item = generateConsumptionItem();
            const card = document.createElement('div');
            card.innerHTML = createConsumptionCard(item);
            track.appendChild(card.firstElementChild);
            }
            
            let scrollPos = 0;
            const speed = 0.4;
            
            function animate() {
            scrollPos += speed;
            const firstCard = track.firstElementChild;
            
            if (firstCard) {
            const cardHeight = firstCard.offsetHeight + 11;
            
            if (scrollPos >= cardHeight) {
                scrollPos = 0;
                const newItem = generateConsumptionItem();
                const card = document.createElement('div');
                card.innerHTML = createConsumptionCard(newItem);
                track.appendChild(card.firstElementChild);
                track.removeChild(firstCard);
            }
            }
            
            track.style.transform = `translateY(-${scrollPos}px)`;
            requestAnimationFrame(animate);
            }
            
            animate();
            }
            
            // ─────────────────────────────────────────────────────────────────
            //    3️⃣ RETURN CONDITION ASSESSMENT
            // ─────────────────────────────────────────────────────────────────
            
            function generateReturnConditionItem() {
            const material = getRandomMaterial();
            const conditionRand = Math.random();
            
            let condition, conditionClass, note;
            if (conditionRand > 0.7) {
            condition = "Good";
            conditionClass = "condition-good";
            note = "Original condition maintained";
            } else if (conditionRand > 0.4) {
            condition = "Degraded";
            conditionClass = "condition-degraded";
            note = getRandomElement(CONDITION_NOTES);
            } else {
            condition = "Damaged";
            conditionClass = "condition-damaged";
            note = getRandomElement(CONDITION_NOTES);
            }
            
            return { ...material, condition, conditionClass, note };
            }
            
            function createReturnConditionCard(item) {
            return `
            <div class="return-condition-card">
            <div class="return-condition-header">
                <div class="return-condition-material-code">${item.code}</div>
                <div class="return-condition-badge ${item.conditionClass}">${item.condition}</div>
            </div>
            <div class="return-condition-material-name">${item.name}</div>
            <div class="return-condition-note">${item.note}</div>
            </div>
            `;
            }
            
            function initReturnConditionScroll() {
            const container = document.getElementById('viz-return-assessment');
            if (!container) return;
            
            const track = container.querySelector('.return-condition-scroll-track');
            
            for (let i = 0; i < 4; i++) {
            const item = generateReturnConditionItem();
            const card = document.createElement('div');
            card.innerHTML = createReturnConditionCard(item);
            track.appendChild(card.firstElementChild);
            }
            
            let scrollPos = 0;
            const speed = 0.4;
            
            function animate() {
            scrollPos += speed;
            const firstCard = track.firstElementChild;
            
            if (firstCard) {
            const cardHeight = firstCard.offsetHeight + 11;
            
            if (scrollPos >= cardHeight) {
                scrollPos = 0;
                const newItem = generateReturnConditionItem();
                const card = document.createElement('div');
                card.innerHTML = createReturnConditionCard(newItem);
                track.appendChild(card.firstElementChild);
                track.removeChild(firstCard);
            }
            }
            
            track.style.transform = `translateY(-${scrollPos}px)`;
            requestAnimationFrame(animate);
            }
            
            animate();
            }
            
            // ─────────────────────────────────────────────────────────────────
            //    4️⃣ REQUESTER DEMAND PROFILING
            // ─────────────────────────────────────────────────────────────────
            
            function generateRequesterDemandItem() {
            const name = getRandomElement(EMPLOYEE_NAMES);
            const empId = `EMP-${getRandomInt(1001, 9999)}`;
            const dept = getRandomElement(DEPARTMENTS);
            const material = getRandomMaterial();
            const topCount = getRandomInt(5, 30);
            const totalRequests = getRandomInt(20, 120);
            
            return { name, empId, dept, material, topCount, totalRequests };
            }
            
            function createRequesterDemandCard(item) {
            return `
            <div class="requester-demand-card">
            <div class="requester-demand-header">
                <div class="requester-demand-info">
                    <div class="requester-demand-name">${item.name}</div>
                    <div class="requester-demand-id">${item.empId}</div>
                </div>
            </div>
            <div class="requester-demand-dept">${item.dept}</div>
            <div class="requester-demand-stats">
                <div class="requester-demand-count">${item.totalRequests} materials requested</div>
                <div class="requester-demand-top">${item.material.name} × ${item.topCount}</div>
            </div>
            </div>
            `;
            }
            
            function initRequesterDemandScroll() {
            const container = document.getElementById('viz-requester-demand');
            if (!container) return;
            
            const track = container.querySelector('.requester-demand-scroll-track');
            
            for (let i = 0; i < 4; i++) {
            const item = generateRequesterDemandItem();
            const card = document.createElement('div');
            card.innerHTML = createRequesterDemandCard(item);
            track.appendChild(card.firstElementChild);
            }
            
            let scrollPos = 0;
            const speed = 0.4;
            
            function animate() {
            scrollPos += speed;
            const firstCard = track.firstElementChild;
            
            if (firstCard) {
            const cardHeight = firstCard.offsetHeight + 11;
            
            if (scrollPos >= cardHeight) {
                scrollPos = 0;
                const newItem = generateRequesterDemandItem();
                const card = document.createElement('div');
                card.innerHTML = createRequesterDemandCard(newItem);
                track.appendChild(card.firstElementChild);
                track.removeChild(firstCard);
            }
            }
            
            track.style.transform = `translateY(-${scrollPos}px)`;
            requestAnimationFrame(animate);
            }
            
            animate();
            }
            
            // ─────────────────────────────────────────────────────────────────
            //    5️⃣ PEAK DEMAND TIMING
            // ─────────────────────────────────────────────────────────────────
            
            function generatePeakDemandItem() {
            const material = getRandomMaterial();
            const dayIndex = getRandomInt(0, 6);
            const day = WEEKDAYS[dayIndex];
            const hour = getRandomInt(7, 18);
            const minute = getRandomInt(0, 59);
            const dateObj = new Date(2025, 9, 14 + dayIndex);
            const dateStr = `${day}, ${dateObj.getDate()}-Oct-2025`;
            const timeStr = `${hour.toString().padStart(2, '0')}:${minute.toString().padStart(2, '0')}`;
            
            let dayClass, status;
            if (dayIndex < 5 && (hour >= 9 && hour <= 11)) {
            dayClass = "day-peak";
            status = "Peak Hour";
            } else if (dayIndex < 5) {
            dayClass = "day-normal";
            status = "Normal";
            } else {
            dayClass = "day-low";
            status = "Low Activity";
            }
            
            return { ...material, day, dateStr, timeStr, dayClass, status };
            }
            
            function createPeakDemandCard(item) {
            return `
            <div class="peak-demand-card">
            <div class="peak-demand-header">
                <div class="peak-demand-material-code">${item.code}</div>
                <div class="peak-demand-day-badge ${item.dayClass}">${item.day}</div>
            </div>
            <div class="peak-demand-material-name">${item.name}</div>
            <div class="peak-demand-datetime">${item.dateStr}, ${item.timeStr}</div>
            <div class="peak-demand-status">${item.status}</div>
            </div>
            `;
            }
            
            function initPeakDemandScroll() {
            const container = document.getElementById('viz-peak-demand');
            if (!container) return;
            
            const track = container.querySelector('.peak-demand-scroll-track');
            
            for (let i = 0; i < 4; i++) {
            const item = generatePeakDemandItem();
            const card = document.createElement('div');
            card.innerHTML = createPeakDemandCard(item);
            track.appendChild(card.firstElementChild);
            }
            
            let scrollPos = 0;
            const speed = 0.4;
            
            function animate() {
            scrollPos += speed;
            const firstCard = track.firstElementChild;
            
            if (firstCard) {
            const cardHeight = firstCard.offsetHeight + 11;
            
            if (scrollPos >= cardHeight) {
                scrollPos = 0;
                const newItem = generatePeakDemandItem();
                const card = document.createElement('div');
                card.innerHTML = createPeakDemandCard(newItem);
                track.appendChild(card.firstElementChild);
                track.removeChild(firstCard);
            }
            }
            
            track.style.transform = `translateY(-${scrollPos}px)`;
            requestAnimationFrame(animate);
            }
            
            animate();
            }
            
            // ═══════════════════════════════════════════════════════════════
            //    BLEND CONSUMPTION ANALYSIS — 4 COMPACT INFINITE SCROLLS
            // ═══════════════════════════════════════════════════════════════
            
            // ─────────────────────────────────────────────────────────────────
            //    BLEND INVENTORY DATABASE (Real Operational Units)
            // ─────────────────────────────────────────────────────────────────
            
            const BLEND_INVENTORY = {
            beverages: [
            { 
            name: "Small Cup Coffee", 
            code: "BLD-CFF-SM", 
            unit: "Small Cup",
            ingredients: [
                { name: "Coffee", amount: "5g" },
                { name: "Sugar", amount: "7g" },
                { name: "Milk", amount: "15ml" },
                { name: "Water", amount: "180ml" }
            ]
            },
            { 
            name: "Medium Cup Coffee", 
            code: "BLD-CFF-MD", 
            unit: "Medium Cup",
            ingredients: [
                { name: "Coffee", amount: "7g" },
                { name: "Sugar", amount: "10g" },
                { name: "Milk", amount: "20ml" },
                { name: "Water", amount: "250ml" }
            ]
            },
            { 
            name: "Large Cup Coffee", 
            code: "BLD-CFF-LG", 
            unit: "Large Cup",
            ingredients: [
                { name: "Coffee", amount: "9g" },
                { name: "Sugar", amount: "12g" },
                { name: "Milk", amount: "30ml" },
                { name: "Water", amount: "350ml" }
            ]
            },
            { 
            name: "Pitcher Iced Tea", 
            code: "BLD-TEA-PT", 
            unit: "Pitcher",
            ingredients: [
                { name: "Tea Leaves", amount: "25g" },
                { name: "Sugar", amount: "150g" },
                { name: "Lemon Juice", amount: "50ml" },
                { name: "Water", amount: "2L" }
            ]
            }
            ],
            adhesives: [
            { 
            name: "Standard Batch Epoxy", 
            code: "BLD-EPX-ST", 
            unit: "Standard Batch",
            ingredients: [
                { name: "Resin", amount: "500g" },
                { name: "Hardener", amount: "200g" },
                { name: "Accelerator", amount: "50g" }
            ]
            },
            { 
            name: "Half Batch Structural Adhesive", 
            code: "BLD-STR-HF", 
            unit: "Half Batch",
            ingredients: [
                { name: "Resin", amount: "250g" },
                { name: "Hardener", amount: "100g" }
            ]
            },
            { 
            name: "Production Run Thread Locker", 
            code: "BLD-THD-PR", 
            unit: "Production Run",
            ingredients: [
                { name: "Base Compound", amount: "1L" },
                { name: "Activator", amount: "200ml" }
            ]
            }
            ],
            coatings: [
            { 
            name: "Small Block Basecoat", 
            code: "BLD-BSE-SM", 
            unit: "Small Block",
            ingredients: [
                { name: "Pigment", amount: "2kg" },
                { name: "Solvent", amount: "5L" },
                { name: "Binder", amount: "500ml" }
            ]
            },
            { 
            name: "Big Block Protective Coating", 
            code: "BLD-PRT-BG", 
            unit: "Big Block",
            ingredients: [
                { name: "Pigment", amount: "5kg" },
                { name: "Solvent", amount: "12L" },
                { name: "Binder", amount: "1.5L" }
            ]
            },
            { 
            name: "Standard Batch Anti-Rust", 
            code: "BLD-RST-ST", 
            unit: "Standard Batch",
            ingredients: [
                { name: "Pigment", amount: "3kg" },
                { name: "Solvent", amount: "8L" },
                { name: "Rust Inhibitor", amount: "1L" }
            ]
            }
            ],
            cleaners: [
            { 
            name: "Regular Serve Degreaser", 
            code: "BLD-DGR-RG", 
            unit: "Regular Serve",
            ingredients: [
                { name: "Concentrate", amount: "500ml" },
                { name: "Water", amount: "4.5L" },
                { name: "Surfactant", amount: "50ml" }
            ]
            },
            { 
            name: "Double Portion Heavy Duty Cleaner", 
            code: "BLD-HDC-DB", 
            unit: "Double Portion",
            ingredients: [
                { name: "Concentrate", amount: "1L" },
                { name: "Water", amount: "9L" },
                { name: "Surfactant", amount: "100ml" }
            ]
            },
            { 
            name: "Production Run Floor Sanitizer", 
            code: "BLD-SNT-PR", 
            unit: "Production Run",
            ingredients: [
                { name: "Concentrate", amount: "5L" },
                { name: "Water", amount: "45L" },
                { name: "Disinfectant", amount: "500ml" }
            ]
            }
            ],
            lubricants: [
            { 
            name: "Quarter Batch Cutting Fluid", 
            code: "BLD-CUT-QT", 
            unit: "Quarter Batch",
            ingredients: [
                { name: "Oil", amount: "2L" },
                { name: "Water", amount: "8L" },
                { name: "Emulsifier", amount: "200ml" }
            ]
            },
            { 
            name: "Standard Batch Coolant Mix", 
            code: "BLD-COL-ST", 
            unit: "Standard Batch",
            ingredients: [
                { name: "Coolant", amount: "5L" },
                { name: "Water", amount: "15L" },
                { name: "Additive", amount: "500ml" }
            ]
            },
            { 
            name: "Half Batch Hydraulic Blend", 
            code: "BLD-HYD-HF", 
            unit: "Half Batch",
            ingredients: [
                { name: "Hydraulic Oil", amount: "5L" },
                { name: "Additive", amount: "2L" },
                { name: "Viscosity Modifier", amount: "500ml" }
            ]
            }
            ],
            medical: [
            { 
            name: "Single Dose Antiseptic", 
            code: "BLD-ANT-SG", 
            unit: "Single Dose",
            ingredients: [
                { name: "Povidone", amount: "50ml" },
                { name: "Saline", amount: "450ml" },
                { name: "Alcohol", amount: "10ml" }
            ]
            },
            { 
            name: "Treatment Pack Irrigation", 
            code: "BLD-IRG-TP", 
            unit: "Treatment Pack",
            ingredients: [
                { name: "Saline", amount: "500ml" },
                { name: "Antiseptic", amount: "50ml" }
            ]
            },
            { 
            name: "Emergency Kit Wound Care", 
            code: "BLD-WND-EK", 
            unit: "Emergency Kit",
            ingredients: [
                { name: "Saline", amount: "200ml" },
                { name: "Povidone", amount: "100ml" },
                { name: "Analgesic", amount: "50ml" }
            ]
            }
            ]
            };
            
            function getRandomBlend() {
            const allBlends = [
            ...BLEND_INVENTORY.beverages,
            ...BLEND_INVENTORY.adhesives,
            ...BLEND_INVENTORY.coatings,
            ...BLEND_INVENTORY.cleaners,
            ...BLEND_INVENTORY.lubricants,
            ...BLEND_INVENTORY.medical
            ];
            return getRandomElement(allBlends);
            }
            
            // ─────────────────────────────────────────────────────────────────
            //    1️⃣ ISSUE FREQUENCY ANALYSIS
            // ─────────────────────────────────────────────────────────────────
            
            function generateBlendFrequencyItem() {
            const blend = getRandomBlend();
            const monthlyIssues = getRandomInt(5, 120);
            const frequencyRand = Math.random();
            
            let frequency, frequencyClass;
            if (frequencyRand > 0.6) {
            frequency = "High Frequency";
            frequencyClass = "frequency-high";
            } else if (frequencyRand > 0.3) {
            frequency = "Medium";
            frequencyClass = "frequency-medium";
            } else {
            frequency = "Low";
            frequencyClass = "frequency-low";
            }
            
            return { ...blend, monthlyIssues, frequency, frequencyClass };
            }
            
            function createBlendFrequencyCard(item) {
            return `
            <div class="blend-frequency-card">
            <div class="blend-frequency-header">
                <div class="blend-frequency-code">${item.code}</div>
                <div class="blend-frequency-badge ${item.frequencyClass}">${item.frequency}</div>
            </div>
            <div class="blend-frequency-name">${item.name}</div>
            <div class="blend-frequency-stats">
                <div class="blend-frequency-count">${item.monthlyIssues} issues/month</div>
                <div class="blend-frequency-batch">${item.unit}</div>
            </div>
            </div>
            `;
            }
            
            function initBlendFrequencyScroll() {
            const container = document.getElementById('viz-issue-frequency');
            if (!container) return;
            
            const track = container.querySelector('.blend-frequency-scroll-track');
            
            for (let i = 0; i < 4; i++) {
            const item = generateBlendFrequencyItem();
            const card = document.createElement('div');
            card.innerHTML = createBlendFrequencyCard(item);
            track.appendChild(card.firstElementChild);
            }
            
            let scrollPos = 0;
            const speed = 0.4;
            
            function animate() {
            scrollPos += speed;
            const firstCard = track.firstElementChild;
            
            if (firstCard) {
            const cardHeight = firstCard.offsetHeight + 11;
            
            if (scrollPos >= cardHeight) {
                scrollPos = 0;
                const newItem = generateBlendFrequencyItem();
                const card = document.createElement('div');
                card.innerHTML = createBlendFrequencyCard(newItem);
                track.appendChild(card.firstElementChild);
                track.removeChild(firstCard);
            }
            }
            
            track.style.transform = `translateY(-${scrollPos}px)`;
            requestAnimationFrame(animate);
            }
            
            animate();
            }
            
            // ─────────────────────────────────────────────────────────────────
            //    2️⃣ REQUESTER CONSUMPTION PATTERNS
            // ─────────────────────────────────────────────────────────────────
            
            function generateBlendRequesterItem() {
            const name = getRandomElement(EMPLOYEE_NAMES);
            const empId = `EMP-${getRandomInt(1001, 9999)}`;
            const dept = getRandomElement(DEPARTMENTS);
            const blend = getRandomBlend();
            const topCount = getRandomInt(5, 30);
            const totalRequests = getRandomInt(20, 120);
            
            return { name, empId, dept, blend, topCount, totalRequests };
            }
            
            function createBlendRequesterCard(item) {
            return `
            <div class="blend-requester-card">
            <div class="blend-requester-header">
                <div class="blend-requester-info">
                    <div class="blend-requester-name">${item.name}</div>
                    <div class="blend-requester-id">${item.empId}</div>
                </div>
            </div>
            <div class="blend-requester-dept">${item.dept}</div>
            <div class="blend-requester-stats">
                <div class="blend-requester-count">${item.totalRequests} blend requests</div>
                <div class="blend-requester-top">${item.blend.name} × ${item.topCount}</div>
            </div>
            </div>
            `;
            }
            
            function initBlendRequesterScroll() {
            const container = document.getElementById('viz-requester-consumption');
            if (!container) return;
            
            const track = container.querySelector('.blend-requester-scroll-track');
            
            for (let i = 0; i < 4; i++) {
            const item = generateBlendRequesterItem();
            const card = document.createElement('div');
            card.innerHTML = createBlendRequesterCard(item);
            track.appendChild(card.firstElementChild);
            }
            
            let scrollPos = 0;
            const speed = 0.4;
            
            function animate() {
            scrollPos += speed;
            const firstCard = track.firstElementChild;
            
            if (firstCard) {
            const cardHeight = firstCard.offsetHeight + 11;
            
            if (scrollPos >= cardHeight) {
                scrollPos = 0;
                const newItem = generateBlendRequesterItem();
                const card = document.createElement('div');
                card.innerHTML = createBlendRequesterCard(newItem);
                track.appendChild(card.firstElementChild);
                track.removeChild(firstCard);
            }
            }
            
            track.style.transform = `translateY(-${scrollPos}px)`;
            requestAnimationFrame(animate);
            }
            
            animate();
            }
            
            // ─────────────────────────────────────────────────────────────────
            //    3️⃣ TIMEFRAME DEMAND INTELLIGENCE
            // ─────────────────────────────────────────────────────────────────
            
            function generateBlendTimeframeItem() {
            const blend = getRandomBlend();
            const dayIndex = getRandomInt(0, 6);
            const day = WEEKDAYS[dayIndex];
            const hour = getRandomInt(7, 18);
            const minute = getRandomInt(0, 59);
            const dateObj = new Date(2025, 9, 14 + dayIndex);
            const dateStr = `${day}, ${dateObj.getDate()}-Oct-2025`;
            const timeStr = `${hour.toString().padStart(2, '0')}:${minute.toString().padStart(2, '0')}`;
            
            let timeClass, timeBadge;
            if (dayIndex < 5 && (hour >= 9 && hour <= 12)) {
            timeClass = "timeframe-peak";
            timeBadge = "Peak Hours";
            } else if (dayIndex < 5) {
            timeClass = "timeframe-normal";
            timeBadge = "Normal";
            } else {
            timeClass = "timeframe-offpeak";
            timeBadge = "Off-Peak";
            }
            
            return { ...blend, day, dateStr, timeStr, timeClass, timeBadge };
            }
            
            function createBlendTimeframeCard(item) {
            return `
            <div class="blend-timeframe-card">
            <div class="blend-timeframe-header">
                <div class="blend-timeframe-code">${item.code}</div>
                <div class="blend-timeframe-badge ${item.timeClass}">${item.timeBadge}</div>
            </div>
            <div class="blend-timeframe-name">${item.name}</div>
            <div class="blend-timeframe-datetime">${item.dateStr}, ${item.timeStr}</div>
            <div class="blend-timeframe-batch">${item.unit} issued</div>
            </div>
            `;
            }
            
            function initBlendTimeframeScroll() {
            const container = document.getElementById('viz-timeframe-demand');
            if (!container) return;
            
            const track = container.querySelector('.blend-timeframe-scroll-track');
            
            for (let i = 0; i < 4; i++) {
            const item = generateBlendTimeframeItem();
            const card = document.createElement('div');
            card.innerHTML = createBlendTimeframeCard(item);
            track.appendChild(card.firstElementChild);
            }
            
            let scrollPos = 0;
            const speed = 0.4;
            
            function animate() {
            scrollPos += speed;
            const firstCard = track.firstElementChild;
            
            if (firstCard) {
            const cardHeight = firstCard.offsetHeight + 11;
            
            if (scrollPos >= cardHeight) {
                scrollPos = 0;
                const newItem = generateBlendTimeframeItem();
                const card = document.createElement('div');
                card.innerHTML = createBlendTimeframeCard(newItem);
                track.appendChild(card.firstElementChild);
                track.removeChild(firstCard);
            }
            }
            
            track.style.transform = `translateY(-${scrollPos}px)`;
            requestAnimationFrame(animate);
            }
            
            animate();
            }
            
            // ─────────────────────────────────────────────────────────────────
            //    4️⃣ VOLUME OPTIMIZATION TRACKING
            // ─────────────────────────────────────────────────────────────────
            
            function generateBlendVolumeItem() {
            const blend = getRandomBlend();
            const servesDispensed = getRandomInt(100, 2000);
            
            // Calculate total ingredient consumption
            const ingredientsHtml = blend.ingredients.map(ing => {
            // Parse and multiply ingredient amounts
            const match = ing.amount.match(/(\d+\.?\d*)(\w+)/);
            if (match) {
            const baseAmount = parseFloat(match[1]);
            const unit = match[2];
            const totalAmount = (baseAmount * servesDispensed).toFixed(2);
            return `<div><span class="blend-ingredient-name">${ing.name}:</span> <span class="blend-ingredient-amount">${totalAmount}${unit}</span></div>`;
            }
            return '';
            }).join('');
            
            return { ...blend, servesDispensed, ingredientsHtml };
            }
            
            function createBlendVolumeCard(item) {
            return `
            <div class="blend-volume-card">
            <div class="blend-volume-header">
                <div class="blend-volume-code">${item.code}</div>
            </div>
            <div class="blend-volume-name">${item.name}</div>
            <div class="blend-volume-serves">${item.servesDispensed} serves dispensed</div>
            <div class="blend-volume-ingredients">
                ${item.ingredientsHtml}
            </div>
            </div>
            `;
            }
            
            function initBlendVolumeScroll() {
            const container = document.getElementById('viz-volume-optimization');
            if (!container) return;
            
            const track = container.querySelector('.blend-volume-scroll-track');
            
            for (let i = 0; i < 4; i++) {
            const item = generateBlendVolumeItem();
            const card = document.createElement('div');
            card.innerHTML = createBlendVolumeCard(item);
            track.appendChild(card.firstElementChild);
            }
            
            let scrollPos = 0;
            const speed = 0.4;
            
            function animate() {
            scrollPos += speed;
            const firstCard = track.firstElementChild;
            
            if (firstCard) {
            const cardHeight = firstCard.offsetHeight + 11;
            
            if (scrollPos >= cardHeight) {
                scrollPos = 0;
                const newItem = generateBlendVolumeItem();
                const card = document.createElement('div');
                card.innerHTML = createBlendVolumeCard(newItem);
                track.appendChild(card.firstElementChild);
                track.removeChild(firstCard);
            }
            }
            
            track.style.transform = `translateY(-${scrollPos}px)`;
            requestAnimationFrame(animate);
            }
            
            animate();
            }
            // ═══════════════════════════════════════════════════════════════
            // INSPECTION & REPORTING VISUALIZATION ENGINE
            // ═══════════════════════════════════════════════════════════════
            
            // ═══════════════════════════════════════════════════════════════
            // EMPLOYEE NAMES ARRAY (Required for inspection/report generation)
            // ═══════════════════════════════════════════════════════════════
            
            const EMPLOYEENAMES = [
            'Rajesh Kumar',
            'Priya Sharma',
            'Amit Patel',
            'Sneha Reddy',
            'Vikram Singh',
            'Anjali Gupta',
            'Arjun Mehta',
            'Kavita Iyer',
            'Rohit Desai',
            'Deepika Nair',
            'Sanjay Verma',
            'Pooja Malhotra',
            'Kiran Rao',
            'Manish Joshi',
            'Swati Kapoor',
            'Arun Kumar',
            'Meera Pillai',
            'Rahul Agarwal',
            'Nisha Bansal',
            'Varun Chopra'
            ];
            
            
            // INSPECTION EFFICIENCY TRACKING
            function generateInspectionItem() {
            const asset = getRandomAsset();
            const status = ['completed', 'delayed', 'skipped'][Math.floor(Math.random() * 3)];
            const inspector = getRandomElement(EMPLOYEENAMES);
            const scheduledDate = randomDate2025();
            const completedDate = status === 'completed' || status === 'delayed' 
            ? randomDate2025() 
            : 'N/A';
            const delay = status === 'delayed' ? `${getRandomInt(1, 14)} days` : '—';
            
            let statusClass, statusLabel, statusIcon;
            if (status === 'completed') {
            statusClass = 'inspection-completed';
            statusLabel = 'Completed';
            statusIcon = 'fa-check-circle';
            } else if (status === 'delayed') {
            statusClass = 'inspection-delayed';
            statusLabel = 'Delayed';
            statusIcon = 'fa-clock';
            } else {
            statusClass = 'inspection-skipped';
            statusLabel = 'Skipped';
            statusIcon = 'fa-times-circle';
            }
            
            return {
            ...asset,
            status,
            statusClass,
            statusLabel,
            statusIcon,
            inspector,
            scheduledDate,
            completedDate,
            delay
            };
            }
            
            function createInspectionCard(item) {
            return `
            <div class="inspection-card">
            <div class="inspection-header">
            <div class="inspection-asset-info">
            <div class="inspection-asset-code">${item.code}</div>
            <div class="inspection-asset-name">${item.name}</div>
            </div>
            <div class="inspection-status-badge ${item.statusClass}">
            <i class="fas ${item.statusIcon}"></i>${item.statusLabel}
            </div>
            </div>
            <div class="inspection-details">
            <div class="inspection-detail-item">
            <div class="inspection-detail-label">Scheduled</div>
            <div class="inspection-detail-value">${item.scheduledDate}</div>
            </div>
            <div class="inspection-detail-item">
            <div class="inspection-detail-label">Completed</div>
            <div class="inspection-detail-value">${item.completedDate}</div>
            </div>
            ${item.status === 'delayed' ? `
            <div class="inspection-detail-item">
            <div class="inspection-detail-label">Delay</div>
            <div class="inspection-detail-value">${item.delay}</div>
            </div>
            ` : ''}
            </div>
            <div class="inspection-inspector">
            <i class="fas fa-user-check"></i>
            ${item.inspector}
            </div>
            </div>
            `;
            }
            
            function initInspectionScroll() {
            const container = document.getElementById('viz-inspection-efficiency');
            if (!container) return;
            
            container.classList.add('inspection-infinite-scroll');
            
            const track = document.createElement('div');
            track.className = 'inspection-scroll-track';
            container.appendChild(track);
            
            for (let i = 0; i < 5; i++) {
            const item = generateInspectionItem();
            const card = document.createElement('div');
            card.innerHTML = createInspectionCard(item);
            track.appendChild(card.firstElementChild);
            }
            
            let scrollPos = 0;
            const speed = 0.5;
            
            function animate() {
            scrollPos += speed;
            const firstCard = track.firstElementChild;
            
            if (firstCard) {
            const cardHeight = firstCard.offsetHeight + 16;
            if (scrollPos >= cardHeight) {
            scrollPos = 0;
            const newItem = generateInspectionItem();
            const card = document.createElement('div');
            card.innerHTML = createInspectionCard(newItem);
            track.appendChild(card.firstElementChild);
            track.removeChild(firstCard);
            }
            }
            
            track.style.transform = `translateY(-${scrollPos}px)`;
            requestAnimationFrame(animate);
            }
            
            animate();
            }
            
            // REPORT SUBMISSIONS TRACKING
            function generateReportItem() {
            const asset = getRandomAsset();
            const severities = [
            { level: 'critical', class: 'report-critical', icon: 'fa-exclamation-triangle' },
            { level: 'high', class: 'report-high', icon: 'fa-exclamation-circle' },
            { level: 'medium', class: 'report-medium', icon: 'fa-info-circle' },
            { level: 'low', class: 'report-low', icon: 'fa-check-circle' }
            ];
            const severity = getRandomElement(severities);
            const reporter = getRandomElement(EMPLOYEENAMES);
            const timestamp = randomDate2025() + ' ' + `${getRandomInt(0, 23).toString().padStart(2, '0')}:${getRandomInt(0, 59).toString().padStart(2, '0')}`;
            
            const descriptions = [
            'Hydraulic system pressure fluctuation detected',
            'Electrical connector showing signs of corrosion',
            'Unusual vibration during operation',
            'Display screen malfunction reported',
            'Mechanical component wear beyond tolerance',
            'Coolant leak identified during inspection',
            'Software error causing operational delay',
            'Physical damage to protective housing',
            'Calibration drift exceeding acceptable range',
            'Battery performance degradation observed'
            ];
            const description = getRandomElement(descriptions);
            
            return {
            ...asset,
            severity: severity.level.toUpperCase(),
            severityClass: severity.class,
            severityIcon: severity.icon,
            reporter,
            timestamp,
            description
            };
            }
            
            function createReportCard(item) {
            return `
            <div class="report-card">
            <div class="report-header">
            <div class="report-asset-info">
            <div class="report-asset-code">${item.code}</div>
            <div class="report-asset-name">${item.name}</div>
            </div>
            <div class="report-severity-badge ${item.severityClass}">
            <i class="fas ${item.severityIcon}"></i>${item.severity}
            </div>
            </div>
            <div class="report-description">${item.description}</div>
            <div class="report-meta">
            <div class="report-reporter">
            <i class="fas fa-user"></i>
            ${item.reporter}
            </div>
            <div class="report-timestamp">${item.timestamp}</div>
            </div>
            </div>
            `;
            }
            
            function initReportScroll() {
            const container = document.getElementById('viz-report-submissions');
            if (!container) return;
            
            container.classList.add('report-infinite-scroll');
            
            const track = document.createElement('div');
            track.className = 'report-scroll-track';
            container.appendChild(track);
            
            for (let i = 0; i < 5; i++) {
            const item = generateReportItem();
            const card = document.createElement('div');
            card.innerHTML = createReportCard(item);
            track.appendChild(card.firstElementChild);
            }
            
            let scrollPos = 0;
            const speed = 0.5;
            
            function animate() {
            scrollPos += speed;
            const firstCard = track.firstElementChild;
            
            if (firstCard) {
            const cardHeight = firstCard.offsetHeight + 16;
            if (scrollPos >= cardHeight) {
            scrollPos = 0;
            const newItem = generateReportItem();
            const card = document.createElement('div');
            card.innerHTML = createReportCard(newItem);
            track.appendChild(card.firstElementChild);
            track.removeChild(firstCard);
            }
            }
            
            track.style.transform = `translateY(-${scrollPos}px)`;
            requestAnimationFrame(animate);
            }
            
            animate();
            }
            
            // INSPECTION REPORT CORRELATION
            function initCorrelationViz() {
            const container = document.getElementById('viz-inspection-report-correlation');
            if (!container) return;
            
            const totalInspections = getRandomInt(1200, 1800);
            const totalReports = getRandomInt(400, 800);
            const total = totalInspections + totalReports;
            
            const inspectionPct = Math.round((totalInspections / total) * 100);
            const reportPct = Math.round((totalReports / total) * 100);
            const ratio = (totalInspections / totalReports).toFixed(2);
            
            container.innerHTML = `
            <div class="correlation-viz-container">
            <div class="correlation-summary">
            <div class="correlation-total">${total}</div>
            <div class="correlation-label">Total Activities</div>
            </div>
            
            <div class="correlation-bars">
            <div class="correlation-bar-item">
            <div class="correlation-bar-header">
            <div class="correlation-bar-label">
              <i class="fas fa-clipboard-check"></i>
              Inspections
            </div>
            <div class="correlation-bar-value">${totalInspections}</div>
            </div>
            <div class="correlation-bar-wrapper">
            <div class="correlation-bar-fill correlation-bar-inspections" style="width: ${inspectionPct}%">
              ${inspectionPct}%
            </div>
            </div>
            </div>
            
            <div class="correlation-bar-item">
            <div class="correlation-bar-header">
            <div class="correlation-bar-label">
              <i class="fas fa-exclamation-circle"></i>
              Reports
            </div>
            <div class="correlation-bar-value">${totalReports}</div>
            </div>
            <div class="correlation-bar-wrapper">
            <div class="correlation-bar-fill correlation-bar-reports" style="width: ${reportPct}%">
              ${reportPct}%
            </div>
            </div>
            </div>
            </div>
            
            <div class="correlation-ratio">
            Inspection-to-Report Ratio: <strong>${ratio}:1</strong> — ${ratio > 2 ? 'Proactive maintenance dominates' : 'Reactive reporting prevalent'}
            </div>
            </div>
            `;
            }
            
            
            // ═══════════════════════════════════════════════════════════════
            // RESOLVING & OPEX MANAGEMENT VISUALIZATION ENGINE
            // ═══════════════════════════════════════════════════════════════
            
            // RESOLUTION STATUS TRACKING
            function generateResolutionItem() {
            const asset = getRandomAsset();
            const methods = [
            { status: 'repaired', label: 'Repaired', icon: 'fa-wrench', class: 'resolution-repaired' },
            { status: 'replaced', label: 'Replaced', icon: 'fa-exchange-alt', class: 'resolution-replaced' },
            { status: 'recovered', label: 'Recovered', icon: 'fa-undo', class: 'resolution-recovered' },
            { status: 'damaged', label: 'Damaged', icon: 'fa-times-circle', class: 'resolution-damaged' }
            ];
            const method = getRandomElement(methods);
            const reportDate = randomDate2025();
            const resolutionDate = randomDate2025();
            const opex = method.status === 'damaged' ? 0 : getRandomInt(5000, 50000);
            const technician = getRandomElement(EMPLOYEENAMES);
            
            return {
            ...asset,
            method: method.status,
            methodLabel: method.label,
            methodIcon: method.icon,
            methodClass: method.class,
            reportDate,
            resolutionDate,
            opex,
            technician
            };
            }
            
            function createResolutionCard(item) {
            return `
            <div class="resolution-card">
            <div class="resolution-header">
            <div class="resolution-asset-info">
            <div class="resolution-asset-code">${item.code}</div>
            <div class="resolution-asset-name">${item.name}</div>
            </div>
            <div class="resolution-method-badge ${item.methodClass}">
            <i class="fas ${item.methodIcon}"></i>${item.methodLabel}
            </div>
            </div>
            <div class="resolution-details">
            <div class="resolution-detail-item">
            <div class="resolution-detail-label">Reported</div>
            <div class="resolution-detail-value">${item.reportDate}</div>
            </div>
            <div class="resolution-detail-item">
            <div class="resolution-detail-label">Resolved</div>
            <div class="resolution-detail-value">${item.resolutionDate}</div>
            </div>
            <div class="resolution-detail-item">
            <div class="resolution-detail-label">Technician</div>
            <div class="resolution-detail-value">${item.technician}</div>
            </div>
            </div>
            <div class="resolution-opex">
            <div class="resolution-opex-label">
            <i class="fas fa-rupee-sign"></i>
            OPEX Charge
            </div>
            <div class="resolution-opex-value">₹${item.opex.toLocaleString('en-IN')}</div>
            </div>
            </div>
            `;
            }
            
            function initResolutionScroll() {
            const container = document.getElementById('viz-resolution-status');
            if (!container) return;
            
            container.classList.add('resolution-infinite-scroll');
            
            const track = document.createElement('div');
            track.className = 'resolution-scroll-track';
            container.appendChild(track);
            
            for (let i = 0; i < 5; i++) {
            const item = generateResolutionItem();
            const card = document.createElement('div');
            card.innerHTML = createResolutionCard(item);
            track.appendChild(card.firstElementChild);
            }
            
            let scrollPos = 0;
            const speed = 0.5;
            
            function animate() {
            scrollPos += speed;
            const firstCard = track.firstElementChild;
            
            if (firstCard) {
            const cardHeight = firstCard.offsetHeight + 16;
            if (scrollPos >= cardHeight) {
            scrollPos = 0;
            const newItem = generateResolutionItem();
            const card = document.createElement('div');
            card.innerHTML = createResolutionCard(newItem);
            track.appendChild(card.firstElementChild);
            track.removeChild(firstCard);
            }
            }
            
            track.style.transform = `translateY(-${scrollPos}px)`;
            requestAnimationFrame(animate);
            }
            
            animate();
            }
            
            // OPEX BREAKDOWN DONUT
            function initResolutionOpex() {
            const container = document.getElementById('viz-resolution-opex');
            if (!container) return;
            
            const repair = getRandomInt(200000, 400000);
            const replace = getRandomInt(300000, 500000);
            const recovery = getRandomInt(50000, 150000);
            const damage = getRandomInt(100000, 200000);
            const total = repair + replace + recovery + damage;
            
            const repairPct = Math.round((repair / total) * 100);
            const replacePct = Math.round((replace / total) * 100);
            const recoveryPct = Math.round((recovery / total) * 100);
            const damagePct = Math.round((damage / total) * 100);
            
            const gradientStops = [
            `transparent 0deg 1deg`,
            `#10b981 1deg ${repairPct * 3.6}deg`,
            `transparent ${repairPct * 3.6}deg ${repairPct * 3.6 + 2}deg`,
            `#3b82f6 ${repairPct * 3.6 + 2}deg ${(repairPct + replacePct) * 3.6}deg`,
            `transparent ${(repairPct + replacePct) * 3.6}deg ${(repairPct + replacePct) * 3.6 + 2}deg`,
            `#8b5cf6 ${(repairPct + replacePct) * 3.6 + 2}deg ${(repairPct + replacePct + recoveryPct) * 3.6}deg`,
            `transparent ${(repairPct + replacePct + recoveryPct) * 3.6}deg ${(repairPct + replacePct + recoveryPct) * 3.6 + 2}deg`,
            `#ef4444 ${(repairPct + replacePct + recoveryPct) * 3.6 + 2}deg 360deg`
            ].join(', ');
            
            container.innerHTML = `
            <div class="resolution-opex-container">
            <div class="resolution-donut-wrapper">
            <div class="resolution-donut-chart" style="background: conic-gradient(from 0deg, ${gradientStops})"></div>
            <div class="resolution-donut-center">
            <div class="resolution-donut-total">₹${(total / 100000).toFixed(1)}L</div>
            <div class="resolution-donut-label">Total OPEX</div>
            </div>
            </div>
            
            <div class="resolution-opex-legend">
            <div class="resolution-opex-legend-item">
            <div class="resolution-opex-color resolution-opex-color-repair"></div>
            <div class="resolution-opex-legend-info">
            <div class="resolution-opex-legend-name">Repair Costs</div>
            <div class="resolution-opex-legend-value">
              ₹${repair.toLocaleString('en-IN')}
              <span class="resolution-opex-legend-percent">(${repairPct}%)</span>
            </div>
            </div>
            </div>
            
            <div class="resolution-opex-legend-item">
            <div class="resolution-opex-color resolution-opex-color-replace"></div>
            <div class="resolution-opex-legend-info">
            <div class="resolution-opex-legend-name">Replacement Costs</div>
            <div class="resolution-opex-legend-value">
              ₹${replace.toLocaleString('en-IN')}
              <span class="resolution-opex-legend-percent">(${replacePct}%)</span>
            </div>
            </div>
            </div>
            
            <div class="resolution-opex-legend-item">
            <div class="resolution-opex-color resolution-opex-color-recovery"></div>
            <div class="resolution-opex-legend-info">
            <div class="resolution-opex-legend-name">Recovery Operations</div>
            <div class="resolution-opex-legend-value">
              ₹${recovery.toLocaleString('en-IN')}
              <span class="resolution-opex-legend-percent">(${recoveryPct}%)</span>
            </div>
            </div>
            </div>
            
            <div class="resolution-opex-legend-item">
            <div class="resolution-opex-color resolution-opex-color-damage"></div>
            <div class="resolution-opex-legend-info">
            <div class="resolution-opex-legend-name">Damage Write-offs</div>
            <div class="resolution-opex-legend-value">
              ₹${damage.toLocaleString('en-IN')}
              <span class="resolution-opex-legend-percent">(${damagePct}%)</span>
            </div>
            </div>
            </div>
            </div>
            </div>
            `;
            }
            
            // RECOVERY ANALYSIS
            function initRecoveryAnalysis() {
            const container = document.getElementById('viz-recovery-analysis');
            if (!container) return;
            
            const totalReported = getRandomInt(180, 250);
            const recovered = getRandomInt(120, 180);
            const damaged = totalReported - recovered;
            const successRate = Math.round((recovered / totalReported) * 100);
            
            const recoveredPct = Math.round((recovered / totalReported) * 100);
            const damagedPct = Math.round((damaged / totalReported) * 100);
            
            container.innerHTML = `
            <div class="recovery-analysis-container">
            <div class="recovery-bar-item">
            <div class="recovery-bar-header">
            <div class="recovery-bar-label">
            <i class="fas fa-undo"></i>
            Items Recovered
            </div>
            <div class="recovery-bar-value">${recovered}</div>
            </div>
            <div class="recovery-bar-wrapper">
            <div class="recovery-bar-fill recovery-bar-recovered" style="width: ${recoveredPct}%">
            ${recoveredPct}%
            </div>
            </div>
            </div>
            
            <div class="recovery-bar-item">
            <div class="recovery-bar-header">
            <div class="recovery-bar-label">
            <i class="fas fa-times-circle"></i>
            Permanently Damaged
            </div>
            <div class="recovery-bar-value">${damaged}</div>
            </div>
            <div class="recovery-bar-wrapper">
            <div class="recovery-bar-fill recovery-bar-damaged" style="width: ${damagedPct}%">
            ${damagedPct}%
            </div>
            </div>
            </div>
            
            <div class="recovery-success-rate">
            <div class="recovery-success-rate-value">${successRate}%</div>
            <div class="recovery-success-rate-label">Recovery Success Rate</div>
            </div>
            </div>
            `;
            }

            // ═══════════════════════════════════════════════════════════════
            // VEHICLE MILEAGE & REFUELING VISUALIZATION ENGINE
            // ═══════════════════════════════════════════════════════════════

            // VEHICLE NAMES ARRAY
            const VEHICLE_NAMES = [
            { code: 'VH-001', name: 'Maruti Suzuki Swift' },
            { code: 'VH-002', name: 'Hyundai Creta' },
            { code: 'VH-003', name: 'Tata Nexon EV' },
            { code: 'VH-004', name: 'Mahindra Scorpio' },
            { code: 'VH-005', name: 'Honda City' },
            { code: 'VH-006', name: 'Toyota Fortuner' },
            { code: 'VH-007', name: 'MG ZS EV' },
            { code: 'VH-008', name: 'Kia Seltos' },
            { code: 'VH-009', name: 'Tata Tigor EV' },
            { code: 'VH-010', name: 'Hyundai Venue' }
            ];

            // ═══════════════════════════════════════════════════════════════
            // SCROLL 1: VEHICLE MILEAGE TRACKING
            // ═══════════════════════════════════════════════════════════════

            function generateVehicleMileageItem() {
            const vehicle = getRandomElement(VEHICLE_NAMES);
            const driver = getRandomElement(EMPLOYEENAMES);
            const status = ['in-use', 'returned'][Math.floor(Math.random() * 2)];
            const issueDate = randomDate2025();
            const issueTime = `${getRandomInt(0, 23).toString().padStart(2, '0')}:${getRandomInt(0, 59).toString().padStart(2, '0')}`;
            const startOdometer = getRandomInt(15000, 50000);
            const endOdometer = status === 'returned' ? startOdometer + getRandomInt(20, 200) : null;
            const distance = status === 'returned' ? endOdometer - startOdometer : null;
            
            return {
                code: vehicle.code,
                name: vehicle.name,
                driver,
                status,
                statusLabel: status === 'in-use' ? 'In Use' : 'Returned',
                statusClass: status === 'in-use' ? 'vehicle-in-use' : 'vehicle-returned',
                statusIcon: status === 'in-use' ? 'fa-car' : 'fa-check-circle',
                issueDate,
                issueTime,
                startOdometer,
                endOdometer,
                distance
            };
            }

            function createVehicleMileageCard(item) {
            return `
                <div class="vehicle-mileage-card">
                <div class="vehicle-header">
                    <div class="vehicle-info">
                    <div class="vehicle-code">${item.code}</div>
                    <div class="vehicle-name">${item.name}</div>
                    </div>
                    <div class="vehicle-status-badge ${item.statusClass}">
                    <i class="fas ${item.statusIcon}"></i>${item.statusLabel}
                    </div>
                </div>
                <div class="vehicle-mileage-details">
                    <div class="vehicle-detail-item">
                    <div class="vehicle-detail-label">Issued</div>
                    <div class="vehicle-detail-value">${item.issueDate}</div>
                    </div>
                    <div class="vehicle-detail-item">
                    <div class="vehicle-detail-label">Time</div>
                    <div class="vehicle-detail-value">${item.issueTime}</div>
                    </div>
                    <div class="vehicle-detail-item">
                    <div class="vehicle-detail-label">Start ODO</div>
                    <div class="vehicle-detail-value">${item.startOdometer.toLocaleString('en-IN')}</div>
                    </div>
                    <div class="vehicle-detail-item">
                    <div class="vehicle-detail-label">End ODO</div>
                    <div class="vehicle-detail-value">${item.endOdometer ? item.endOdometer.toLocaleString('en-IN') : '—'}</div>
                    </div>
                </div>
                <div class="vehicle-driver">
                    <div class="vehicle-driver-name">
                    <i class="fas fa-user"></i>
                    ${item.driver}
                    </div>
                    <div class="vehicle-distance">${item.distance ? item.distance + ' km' : '—'}</div>
                </div>
                </div>
            `;
            }

            function initVehicleMileageScroll() {
            const container = document.getElementById('viz-vehicle-mileage');
            if (!container) return;
            
            container.classList.add('vehicle-mileage-scroll');
            
            const track = document.createElement('div');
            track.className = 'vehicle-mileage-track';
            container.appendChild(track);
            
            for (let i = 0; i < 5; i++) {
                const item = generateVehicleMileageItem();
                const card = document.createElement('div');
                card.innerHTML = createVehicleMileageCard(item);
                track.appendChild(card.firstElementChild);
            }
            
            let scrollPos = 0;
            const speed = 0.5;
            
            function animate() {
                scrollPos += speed;
                const firstCard = track.firstElementChild;
                
                if (firstCard) {
                const cardHeight = firstCard.offsetHeight + 16;
                if (scrollPos >= cardHeight) {
                    scrollPos = 0;
                    const newItem = generateVehicleMileageItem();
                    const card = document.createElement('div');
                    card.innerHTML = createVehicleMileageCard(newItem);
                    track.appendChild(card.firstElementChild);
                    track.removeChild(firstCard);
                }
                }
                
                track.style.transform = `translateY(-${scrollPos}px)`;
                requestAnimationFrame(animate);
            }
            
            animate();
            }

            // ═══════════════════════════════════════════════════════════════
            // SCROLL 2: REFUELING ACTIVITY TRACKING
            // ═══════════════════════════════════════════════════════════════

            function generateRefuelingItem() {
            const vehicle = getRandomElement(VEHICLE_NAMES);
            const fuelTypes = [
                { type: 'petrol', label: 'Petrol', icon: 'fa-gas-pump', class: 'fuel-petrol', unit: 'L', isGrid: false },
                { type: 'diesel', label: 'Diesel', icon: 'fa-gas-pump', class: 'fuel-diesel', unit: 'L', isGrid: false },
                { type: 'electric', label: 'Electric', icon: 'fa-charging-station', class: 'fuel-electric', unit: 'kWh', isGrid: false },
                { type: 'grid', label: 'Grid', icon: 'fa-plug', class: 'fuel-grid', unit: '—', isGrid: true }
            ];
            const fuel = getRandomElement(fuelTypes);
            const date = randomDate2025();
            const time = `${getRandomInt(0, 23).toString().padStart(2, '0')}:${getRandomInt(0, 59).toString().padStart(2, '0')}`;
            
            let quantity, cost, power;
            if (fuel.isGrid) {
                quantity = null;
                cost = null;
                power = null;
            } else if (fuel.type === 'electric') {
                quantity = getRandomInt(20, 60);
                power = quantity;
                cost = getRandomInt(300, 900);
            } else {
                quantity = getRandomInt(20, 50);
                power = null;
                cost = getRandomInt(1500, 4000);
            }
            
            return {
                code: vehicle.code,
                name: vehicle.name,
                fuelType: fuel.label,
                fuelClass: fuel.class,
                fuelIcon: fuel.icon,
                fuelUnit: fuel.unit,
                date,
                time,
                quantity,
                power,
                cost,
                isGrid: fuel.isGrid
            };
            }

            function createRefuelingCard(item) {
            return `
                <div class="refueling-card">
                <div class="refueling-header">
                    <div class="vehicle-info">
                    <div class="vehicle-code">${item.code}</div>
                    <div class="vehicle-name">${item.name}</div>
                    </div>
                    <div class="refueling-fuel-badge ${item.fuelClass}">
                    <i class="fas ${item.fuelIcon}"></i>${item.fuelType}
                    </div>
                </div>
                <div class="refueling-details">
                    <div class="refueling-detail-item">
                    <div class="refueling-detail-label">Date</div>
                    <div class="refueling-detail-value">${item.date}</div>
                    </div>
                    <div class="refueling-detail-item">
                    <div class="refueling-detail-label">Time</div>
                    <div class="refueling-detail-value">${item.time}</div>
                    </div>
                    <div class="refueling-detail-item">
                    <div class="refueling-detail-label">Quantity</div>
                    <div class="refueling-detail-value">${item.quantity ? item.quantity + ' ' + item.fuelUnit : '—'}</div>
                    </div>
                    ${item.power ? `
                    <div class="refueling-detail-item">
                    <div class="refueling-detail-label">Power</div>
                    <div class="refueling-detail-value">${item.power} kWh</div>
                    </div>
                    ` : ''}
                </div>
                <div class="refueling-cost">
                    <div class="refueling-cost-label">
                    <i class="fas fa-rupee-sign"></i>
                    Cost
                    </div>
                    <div class="refueling-cost-value">${item.isGrid ? 'Grid' : '₹' + item.cost.toLocaleString('en-IN')}</div>
                </div>
                </div>
            `;
            }

            function initRefuelingScroll() {
            const container = document.getElementById('viz-refueling-activity');
            if (!container) return;
            
            container.classList.add('refueling-scroll');
            
            const track = document.createElement('div');
            track.className = 'refueling-track';
            container.appendChild(track);
            
            for (let i = 0; i < 5; i++) {
                const item = generateRefuelingItem();
                const card = document.createElement('div');
                card.innerHTML = createRefuelingCard(item);
                track.appendChild(card.firstElementChild);
            }
            
            let scrollPos = 0;
            const speed = 0.5;
            
            function animate() {
                scrollPos += speed;
                const firstCard = track.firstElementChild;
                
                if (firstCard) {
                const cardHeight = firstCard.offsetHeight + 16;
                if (scrollPos >= cardHeight) {
                    scrollPos = 0;
                    const newItem = generateRefuelingItem();
                    const card = document.createElement('div');
                    card.innerHTML = createRefuelingCard(newItem);
                    track.appendChild(card.firstElementChild);
                    track.removeChild(firstCard);
                }
                }
                
                track.style.transform = `translateY(-${scrollPos}px)`;
                requestAnimationFrame(animate);
            }
            
            animate();
            }

            // ═══════════════════════════════════════════════════════════════
            // SCROLL 3: FUEL EFFICIENCY ANALYSIS (INFINITE SCROLL)
            // ═══════════════════════════════════════════════════════════════

            function generateEfficiencyItem() {
            const types = [
                {
                type: 'conventional',
                label: 'Conventional Fleet',
                sublabel: 'Petrol & Diesel Vehicles',
                icon: 'fa-gas-pump',
                iconClass: 'efficiency-icon-conventional',
                metric1Label: 'km/L Average',
                metric2Label: 'Cost per km',
                metric1: (getRandomInt(120, 180) / 10).toFixed(1),
                metric2: '₹' + (getRandomInt(60, 90) / 10).toFixed(1)
                },
                {
                type: 'electric',
                label: 'Electric Fleet',
                sublabel: 'EV Vehicles',
                icon: 'fa-charging-station',
                iconClass: 'efficiency-icon-electric',
                metric1Label: 'km/kWh Average',
                metric2Label: 'Cost per km',
                metric1: (getRandomInt(50, 80) / 10).toFixed(1),
                metric2: '₹' + (getRandomInt(15, 30) / 10).toFixed(1)
                }
            ];
            
            return getRandomElement(types);
            }

            function createEfficiencyCard(item) {
            return `
                <div class="efficiency-card">
                <div class="efficiency-card-header">
                    <div class="efficiency-icon ${item.iconClass}">
                    <i class="fas ${item.icon}"></i>
                    </div>
                    <div class="efficiency-card-title">
                    <div class="efficiency-card-label">${item.label}</div>
                    <div class="efficiency-card-name">${item.sublabel}</div>
                    </div>
                </div>
                <div class="efficiency-metrics">
                    <div class="efficiency-metric">
                    <div class="efficiency-value">${item.metric1}</div>
                    <div class="efficiency-unit">${item.metric1Label}</div>
                    </div>
                    <div class="efficiency-metric">
                    <div class="efficiency-value">${item.metric2}</div>
                    <div class="efficiency-unit">${item.metric2Label}</div>
                    </div>
                </div>
                </div>
            `;
            }

            function initFuelEfficiencyScroll() {
            const container = document.getElementById('viz-fuel-efficiency');
            if (!container) return;
            
            container.classList.add('fuel-efficiency-scroll');
            
            const track = document.createElement('div');
            track.className = 'fuel-efficiency-track';
            container.appendChild(track);
            
            for (let i = 0; i < 4; i++) {
                const item = generateEfficiencyItem();
                const card = document.createElement('div');
                card.innerHTML = createEfficiencyCard(item);
                track.appendChild(card.firstElementChild);
            }
            
            let scrollPos = 0;
            const speed = 0.5;
            
            function animate() {
                scrollPos += speed;
                const firstCard = track.firstElementChild;
                
                if (firstCard) {
                const cardHeight = firstCard.offsetHeight + 16;
                if (scrollPos >= cardHeight) {
                    scrollPos = 0;
                    const newItem = generateEfficiencyItem();
                    const card = document.createElement('div');
                    card.innerHTML = createEfficiencyCard(newItem);
                    track.appendChild(card.firstElementChild);
                    track.removeChild(firstCard);
                }
                }
                
                track.style.transform = `translateY(-${scrollPos}px)`;
                requestAnimationFrame(animate);
            }
            
            animate();
            }

            
            
            
            
            
            // ═══════════════════════════════════════════════════════════════
            // INITIALIZE ALL SCROLLS
            // ═══════════════════════════════════════════════════════════════
            document.addEventListener('DOMContentLoaded', function() {
            initMaterialScroll('viz-purchase-tracking', generatePurchaseItem, createPurchaseCard);
            initMaterialScroll('viz-employee-consumption', generateEmployeeItem, createEmployeeCard);
            initMaterialScroll('viz-equipment-allocation', generateEquipmentItem, createEquipmentCard);
            initMaterialScroll('viz-waste-accounting', generateWasteItem, createWasteCard);
            initDemandScroll();
            initRequesterScroll();
            initReturnScroll();
            initFloorScroll();
            initRejectionScroll();
            initVolumetricScroll();
            initConsumptionScroll();
            initReturnConditionScroll();
            initRequesterDemandScroll();
            initPeakDemandScroll();
            initBlendFrequencyScroll();
            initBlendRequesterScroll();
            initBlendTimeframeScroll();
            initBlendVolumeScroll();
            initInspectionScroll();
            initReportScroll();
            initCorrelationViz();
            initResolutionScroll();
            initResolutionOpex();
            initRecoveryAnalysis();
            initVehicleMileageScroll();
            initRefuelingScroll();
            initFuelEfficiencyScroll();
            });
        </script>
    </body>
</html>